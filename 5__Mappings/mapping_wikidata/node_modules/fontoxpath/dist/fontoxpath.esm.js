import * as xspattern from 'xspattern';
import * as prsc from 'prsc';
const fontoxpath = (function (xspattern, prsc) {
const VERSION='3.26.0';
const fontoxpathGlobal = {};
var h;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ha=da(this);"function"===typeof Symbol&&Symbol("x");
function p(a,b){if(b)a:{var c=ha;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ca(c,a,{configurable:!0,writable:!0,value:b})}}
p("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,g){this.h=f;ca(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.h};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0;return b});
p("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ha[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ca(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ja(aa(this))}})}return a});p("Symbol.asyncIterator",function(a){return a?a:Symbol("Symbol.asyncIterator")});
function ja(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}function t(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ka(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function w(a){return a instanceof Array?a:ka(t(a))}var la="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ma;
if("function"==typeof Object.setPrototypeOf)ma=Object.setPrototypeOf;else{var na;a:{var oa={a:!0},pa={};try{pa.__proto__=oa;na=pa.a;break a}catch(a){}na=!1}ma=na?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var qa=ma;
function x(a,b){a.prototype=la(b.prototype);a.prototype.constructor=a;if(qa)qa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Nc=b.prototype}function ra(){this.j=!1;this.s=null;this.u=void 0;this.h=1;this.ha=0;this.A=null}function ta(a){if(a.j)throw new TypeError("Generator is already running");a.j=!0}ra.prototype.O=function(a){this.u=a};function ua(a,b){a.A={yc:b,Ac:!0};a.h=a.ha}
ra.prototype.return=function(a){this.A={return:a};this.h=this.ha};function va(a){this.h=new ra;this.s=a}function wa(a,b){ta(a.h);var c=a.h.s;if(c)return xa(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.h.return);a.h.return(b);return ya(a)}
function xa(a,b,c,d){try{var e=b.call(a.h.s,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.h.j=!1,e;var f=e.value}catch(g){return a.h.s=null,ua(a.h,g),ya(a)}a.h.s=null;d.call(a.h,f);return ya(a)}function ya(a){for(;a.h.h;)try{var b=a.s(a.h);if(b)return a.h.j=!1,{value:b.value,done:!1}}catch(c){a.h.u=void 0,ua(a.h,c)}a.h.j=!1;if(a.h.A){b=a.h.A;a.h.A=null;if(b.Ac)throw b.yc;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function za(a){this.next=function(b){ta(a.h);a.h.s?b=xa(a,a.h.s.next,b,a.h.O):(a.h.O(b),b=ya(a));return b};this.throw=function(b){ta(a.h);a.h.s?b=xa(a,a.h.s["throw"],b,a.h.O):(ua(a.h,b),b=ya(a));return b};this.return=function(b){return wa(a,b)};this[Symbol.iterator]=function(){return this}}function Aa(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})}
p("Promise",function(a){function b(g){this.s=0;this.A=void 0;this.h=[];this.ha=!1;var k=this.j();try{g(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.h=null}function d(g){return g instanceof b?g:new b(function(k){k(g)})}if(a)return a;c.prototype.s=function(g){if(null==this.h){this.h=[];var k=this;this.A(function(){k.u()})}this.h.push(g)};var e=ha.setTimeout;c.prototype.A=function(g){e(g,0)};c.prototype.u=function(){for(;this.h&&this.h.length;){var g=this.h;this.h=[];for(var k=0;k<g.length;++k){var l=
g[k];g[k]=null;try{l()}catch(n){this.j(n)}}}this.h=null};c.prototype.j=function(g){this.A(function(){throw g;})};b.prototype.j=function(){function g(n){return function(q){l||(l=!0,n.call(k,q))}}var k=this,l=!1;return{resolve:g(this.na),reject:g(this.u)}};b.prototype.na=function(g){if(g===this)this.u(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.ua(g);else{a:switch(typeof g){case "object":var k=null!=g;break a;case "function":k=!0;break a;default:k=!1}k?this.ka(g):
this.O(g)}};b.prototype.ka=function(g){var k=void 0;try{k=g.then}catch(l){this.u(l);return}"function"==typeof k?this.mb(k,g):this.O(g)};b.prototype.u=function(g){this.B(2,g)};b.prototype.O=function(g){this.B(1,g)};b.prototype.B=function(g,k){if(0!=this.s)throw Error("Cannot settle("+g+", "+k+"): Promise already settled in state"+this.s);this.s=g;this.A=k;2===this.s&&this.Ya();this.J()};b.prototype.Ya=function(){var g=this;e(function(){if(g.T()){var k=ha.console;"undefined"!==typeof k&&k.error(g.A)}},
1)};b.prototype.T=function(){if(this.ha)return!1;var g=ha.CustomEvent,k=ha.Event,l=ha.dispatchEvent;if("undefined"===typeof l)return!0;"function"===typeof g?g=new g("unhandledrejection",{cancelable:!0}):"function"===typeof k?g=new k("unhandledrejection",{cancelable:!0}):(g=ha.document.createEvent("CustomEvent"),g.initCustomEvent("unhandledrejection",!1,!0,g));g.promise=this;g.reason=this.A;return l(g)};b.prototype.J=function(){if(null!=this.h){for(var g=0;g<this.h.length;++g)f.s(this.h[g]);this.h=
null}};var f=new c;b.prototype.ua=function(g){var k=this.j();g.nb(k.resolve,k.reject)};b.prototype.mb=function(g,k){var l=this.j();try{g.call(k,l.resolve,l.reject)}catch(n){l.reject(n)}};b.prototype.then=function(g,k){function l(v,A){return"function"==typeof v?function(G){try{n(v(G))}catch(H){q(H)}}:A}var n,q,u=new b(function(v,A){n=v;q=A});this.nb(l(g,n),l(k,q));return u};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.nb=function(g,k){function l(){switch(n.s){case 1:g(n.A);
break;case 2:k(n.A);break;default:throw Error("Unexpected state: "+n.s);}}var n=this;null==this.h?f.s(l):this.h.push(l);this.ha=!0};b.resolve=d;b.reject=function(g){return new b(function(k,l){l(g)})};b.race=function(g){return new b(function(k,l){for(var n=t(g),q=n.next();!q.done;q=n.next())d(q.value).nb(k,l)})};b.all=function(g){var k=t(g),l=k.next();return l.done?d([]):new b(function(n,q){function u(G){return function(H){v[G]=H;A--;0==A&&n(v)}}var v=[],A=0;do v.push(void 0),A++,d(l.value).nb(u(v.length-
1),q),l=k.next();while(!l.done)})};return b});function Ba(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var Ca="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Ba(d,e)&&(a[e]=d[e])}return a};p("Object.assign",function(a){return a||Ca});
function Da(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}p("String.prototype.repeat",function(a){return a?a:function(b){var c=Da(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}});
function Fa(a,b){a=void 0!==a?String(a):" ";return 0<b&&a?a.repeat(Math.ceil(b/a.length)).substring(0,b):""}p("String.prototype.padEnd",function(a){return a?a:function(b,c){var d=Da(this,null,"padStart");return d+Fa(c,b-d.length)}});
p("WeakMap",function(a){function b(l){this.h=(k+=Math.random()+1).toString();if(l){l=t(l);for(var n;!(n=l.next()).done;)n=n.value,this.set(n[0],n[1])}}function c(){}function d(l){var n=typeof l;return"object"===n&&null!==l||"function"===n}function e(l){if(!Ba(l,g)){var n=new c;ca(l,g,{value:n})}}function f(l){var n=Object[l];n&&(Object[l]=function(q){if(q instanceof c)return q;Object.isExtensible(q)&&e(q);return n(q)})}if(function(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),n=Object.seal({}),
q=new a([[l,2],[n,3]]);if(2!=q.get(l)||3!=q.get(n))return!1;q.delete(l);q.set(n,4);return!q.has(l)&&4==q.get(n)}catch(u){return!1}}())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var k=0;b.prototype.set=function(l,n){if(!d(l))throw Error("Invalid WeakMap key");e(l);if(!Ba(l,g))throw Error("WeakMap key fail: "+l);l[g][this.h]=n;return this};b.prototype.get=function(l){return d(l)&&Ba(l,g)?l[g][this.h]:void 0};b.prototype.has=function(l){return d(l)&&Ba(l,
g)&&Ba(l[g],this.h)};b.prototype.delete=function(l){return d(l)&&Ba(l,g)&&Ba(l[g],this.h)?delete l[g][this.h]:!1};return b});
p("Map",function(a){function b(){var k={};return k.Ba=k.next=k.head=k}function c(k,l){var n=k.h;return ja(function(){if(n){for(;n.head!=k.h;)n=n.Ba;for(;n.next!=n.head;)return n=n.next,{done:!1,value:l(n)};n=null}return{done:!0,value:void 0}})}function d(k,l){var n=l&&typeof l;"object"==n||"function"==n?f.has(l)?n=f.get(l):(n=""+ ++g,f.set(l,n)):n="p_"+l;var q=k.s[n];if(q&&Ba(k.s,n))for(k=0;k<q.length;k++){var u=q[k];if(l!==l&&u.key!==u.key||l===u.key)return{id:n,list:q,index:k,ja:u}}return{id:n,
list:q,index:-1,ja:void 0}}function e(k){this.s={};this.h=b();this.size=0;if(k){k=t(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var k=Object.seal({x:4}),l=new a(t([[k,"s"]]));if("s"!=l.get(k)||1!=l.size||l.get({x:4})||l.set({x:4},"t")!=l||2!=l.size)return!1;var n=l.entries(),q=n.next();if(q.done||q.value[0]!=k||"s"!=q.value[1])return!1;q=n.next();return q.done||4!=q.value[0].x||
"t"!=q.value[1]||!n.next().done?!1:!0}catch(u){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(k,l){k=0===k?0:k;var n=d(this,k);n.list||(n.list=this.s[n.id]=[]);n.ja?n.ja.value=l:(n.ja={next:this.h,Ba:this.h.Ba,head:this.h,key:k,value:l},n.list.push(n.ja),this.h.Ba.next=n.ja,this.h.Ba=n.ja,this.size++);return this};e.prototype.delete=function(k){k=d(this,k);return k.ja&&k.list?(k.list.splice(k.index,1),k.list.length||delete this.s[k.id],k.ja.Ba.next=k.ja.next,k.ja.next.Ba=k.ja.Ba,
k.ja.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.s={};this.h=this.h.Ba=b();this.size=0};e.prototype.has=function(k){return!!d(this,k).ja};e.prototype.get=function(k){return(k=d(this,k).ja)&&k.value};e.prototype.entries=function(){return c(this,function(k){return[k.key,k.value]})};e.prototype.keys=function(){return c(this,function(k){return k.key})};e.prototype.values=function(){return c(this,function(k){return k.value})};e.prototype.forEach=function(k,l){for(var n=this.entries(),
q;!(q=n.next()).done;)q=q.value,k.call(l,q[1],q[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=0;return e});function Ga(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{Fb:e,Mb:f}}return{Fb:-1,Mb:void 0}}p("Array.prototype.find",function(a){return a?a:function(b,c){return Ga(this,b,c).Mb}});
p("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=Da(this,b,"startsWith"),e=d.length,f=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<f&&c<e;)if(d[c++]!=b[g++])return!1;return g>=f}});p("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});function Ha(a){return a?a:Array.prototype.fill}
p("Int8Array.prototype.fill",Ha);p("Uint8Array.prototype.fill",Ha);p("Uint8ClampedArray.prototype.fill",Ha);p("Int16Array.prototype.fill",Ha);p("Uint16Array.prototype.fill",Ha);p("Int32Array.prototype.fill",Ha);p("Uint32Array.prototype.fill",Ha);p("Float32Array.prototype.fill",Ha);p("Float64Array.prototype.fill",Ha);
p("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(k){return k};var e=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof f){b=f.call(b);for(var g=0;!(f=b.next()).done;)e.push(c.call(d,f.value,g++))}else for(f=b.length,g=0;g<f;g++)e.push(c.call(d,b[g],g));return e}});p("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});
p("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});p("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==Da(this,b,"includes").indexOf(b,c||0)}});p("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991});p("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991});
p("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}});p("Number.isFinite",function(a){return a?a:function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b}});p("String.prototype.padStart",function(a){return a?a:function(b,c){var d=Da(this,null,"padStart");return Fa(c,b-d.length)+d}});
function Ia(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}p("Array.prototype.keys",function(a){return a?a:function(){return Ia(this,function(b){return b})}});p("Number.isInteger",function(a){return a?a:function(b){return Number.isFinite(b)?b===Math.floor(b):!1}});
p("Number.isSafeInteger",function(a){return a?a:function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER}});p("Array.prototype.findIndex",function(a){return a?a:function(b,c){return Ga(this,b,c).Fb}});p("String.prototype.endsWith",function(a){return a?a:function(b,c){var d=Da(this,b,"endsWith");void 0===c&&(c=d.length);c=Math.max(0,Math.min(c|0,d.length));for(var e=b.length;0<e&&0<c;)if(d[--c]!=b[--e])return!1;return 0>=e}});
p("String.fromCodePoint",function(a){return a?a:function(b){for(var c="",d=0;d<arguments.length;d++){var e=Number(arguments[d]);if(0>e||1114111<e||e!==Math.floor(e))throw new RangeError("invalid_code_point "+e);65535>=e?c+=String.fromCharCode(e):(e-=65536,c+=String.fromCharCode(e>>>10&1023|55296),c+=String.fromCharCode(e&1023|56320))}return c}});
p("String.prototype.codePointAt",function(a){return a?a:function(b){var c=Da(this,null,"codePointAt"),d=c.length;b=Number(b)||0;if(0<=b&&b<d){b|=0;var e=c.charCodeAt(b);if(55296>e||56319<e||b+1===d)return e;b=c.charCodeAt(b+1);return 56320>b||57343<b?e:1024*(e-55296)+b+9216}}});
p("Set",function(a){function b(c){this.h=new Map;if(c){c=t(c);for(var d;!(d=c.next()).done;)this.add(d.value)}this.size=this.h.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new a(t([c]));if(!d.has(c)||1!=d.size||d.add(c)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=c||f.value[1]!=c)return!1;f=e.next();return f.done||f.value[0]==c||4!=f.value[0].x||
f.value[1]!=f.value[0]?!1:e.next().done}catch(g){return!1}}())return a;b.prototype.add=function(c){c=0===c?0:c;this.h.set(c,c);this.size=this.h.size;return this};b.prototype.delete=function(c){c=this.h.delete(c);this.size=this.h.size;return c};b.prototype.clear=function(){this.h.clear();this.size=0};b.prototype.has=function(c){return this.h.has(c)};b.prototype.entries=function(){return this.h.entries()};b.prototype.values=function(){return this.h.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=
b.prototype.values;b.prototype.forEach=function(c,d){var e=this;this.h.forEach(function(f){return c.call(d,f,f,e)})};return b});p("Math.log10",function(a){return a?a:function(b){return Math.log(b)/Math.LN10}});p("Object.values",function(a){return a?a:function(b){var c=[],d;for(d in b)Ba(b,d)&&c.push(b[d]);return c}});p("Number.isNaN",function(a){return a?a:function(b){return"number"===typeof b&&isNaN(b)}});p("Array.prototype.values",function(a){return a?a:function(){return Ia(this,function(b,c){return c})}});
p("Object.getOwnPropertySymbols",function(a){return a?a:function(){return[]}});function Ja(a,b){if(!("0"!==a&&"-0"!==a||"0"!==b&&"-0"!==b))return 0;var c=/(?:\+|(-))?(\d+)?(?:\.(\d+))?/;a=c.exec(a+"");var d=c.exec(b+""),e=!a[1],f=!d[1];b=(a[2]||"").replace(/^0*/,"");c=(d[2]||"").replace(/^0*/,"");a=a[3]||"";d=d[3]||"";if(e&&!f)return 1;if(!e&&f)return-1;e=e&&f;if(b.length>c.length)return e?1:-1;if(b.length<c.length)return e?-1:1;if(b>c)return e?1:-1;if(b<c)return e?-1:1;b=Math.max(a.length,d.length);c=a.padEnd(b,"0");b=d.padEnd(b,"0");return c>b?e?1:-1:c<b?e?-1:1:0};function La(a,b){a=a.toString();if(-1<a.indexOf(".")&&0===b)return!1;a=/^[-+]?0*([1-9]\d*)?(?:\.((?:\d*[1-9])*)0*)?$/.exec(a);return a[2]?a[2].length<=b:!0}function Ma(){return function(a,b){return 1>Ja(a,b)}}function Na(){return function(a,b){return 0>Ja(a,b)}}function Oa(){return function(a,b){return-1<Ja(a,b)}}function Pa(){return function(a,b){return 0<Ja(a,b)}}
function Qa(a,b){switch(b){case "required":return/(Z)|([+-])([01]\d):([0-5]\d)$/.test(a.toString());case "prohibited":return!/(Z)|([+-])([01]\d):([0-5]\d)$/.test(a.toString());case "optional":return!0}}function Ra(a){switch(a){case 1:case 0:case 6:case 3:return{};case 4:return{ma:La,ra:Ma(),Lc:Na(),sa:Oa(),Mc:Pa()};case 18:return{};case 9:case 8:case 7:case 11:case 12:case 13:case 15:case 14:return{wa:Qa};case 22:case 21:case 20:case 23:case 44:return{};default:return null}}var Sa={},Ta={};function Ua(a){return/^([+-]?(\d*(\.\d*)?([eE][+-]?\d*)?|INF)|NaN)$/.test(a)}function Va(a){return/^[_:A-Za-z][-._:A-Za-z0-9]*$/.test(a)}function Wa(a){return Va(a)&&/^[_A-Za-z]([-._A-Za-z0-9])*$/.test(a)}function Xa(a){a=a.split(":");return 1===a.length?Wa(a[0]):2!==a.length?!1:Wa(a[0])&&Wa(a[1])}function Ya(a){return!/[\u0009\u000A\u000D]/.test(a)}function Za(a){return Wa(a)}
var $a=new Map([[45,function(){return!0}],[46,function(){return!0}],[1,function(){return!0}],[0,function(a){return/^(0|1|true|false)$/.test(a)}],[6,function(a){return Ua(a)}],[3,Ua],[4,function(a){return/^[+-]?\d*(\.\d*)?$/.test(a)}],[18,function(a){return/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.test(a)}],[9,function(a){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(a)}],
[8,function(a){return/^(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(a)}],[7,function(a){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(a)}],[11,function(a){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(a)}],[12,function(a){return/^-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(a)}],
[13,function(a){return/^--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(a)}],[15,function(a){return/^---(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(a)}],[14,function(a){return/^--(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(a)}],[22,function(a){return/^([0-9A-Fa-f]{2})*$/.test(a)}],[21,function(a){return(new RegExp(/^((([A-Za-z0-9+/] ?){4})*((([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/])|(([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=)|(([A-Za-z0-9+/] ?)[AQgw] ?= ?=)))?$/)).test(a)}],
[20,function(){return!0}],[44,Xa],[48,Ya],[52,function(a){return Ya(a)&&!/^ | {2,}| $/.test(a)}],[51,function(a){return/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/.test(a)}],[50,function(a){return/^[-._:A-Za-z0-9]+$/.test(a)}],[25,Va],[23,Xa],[24,Wa],[42,Za],[41,Za],[26,function(a){return Wa(a)}],[5,function(a){return/^[+-]?\d+$/.test(a)}],[16,function(a){return/^-?P[0-9]+(Y([0-9]+M)?|M)$/.test(a)}],[17,function(a){return/^-?P([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9]+)?S)?)?$/.test(a)}]]);var bb=Object.create(null);
[{D:0,name:59},{D:0,name:46,parent:59,K:{whiteSpace:"preserve"}},{D:0,name:19,parent:46},{D:0,name:1,parent:46},{D:0,name:0,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:4,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:6,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:3,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:18,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:9,parent:46,K:{wa:"optional",whiteSpace:"collapse"}},{D:0,name:8,parent:46,K:{wa:"optional",whiteSpace:"collapse"}},{D:0,name:7,parent:46,
K:{wa:"optional",whiteSpace:"collapse"}},{D:0,name:11,parent:46,K:{wa:"optional",whiteSpace:"collapse"}},{D:0,name:12,parent:46,K:{wa:"optional",whiteSpace:"collapse"}},{D:0,name:13,parent:46,K:{wa:"optional",whiteSpace:"collapse"}},{D:0,name:15,parent:46,K:{wa:"optional",whiteSpace:"collapse"}},{D:0,name:14,parent:46,K:{wa:"optional",whiteSpace:"collapse"}},{D:0,name:22,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:21,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:20,parent:46,K:{whiteSpace:"collapse"}},
{D:0,name:23,parent:46,K:{whiteSpace:"collapse"}},{D:0,name:44,parent:46,K:{whiteSpace:"collapse"}},{D:1,name:10,U:9,K:{whiteSpace:"collapse",wa:"required"}},{D:1,name:48,U:1,K:{whiteSpace:"replace"}},{D:1,name:52,U:48,K:{whiteSpace:"collapse"}},{D:1,name:51,U:52,K:{whiteSpace:"collapse"}},{D:1,name:50,U:52,K:{whiteSpace:"collapse"}},{D:2,name:49,type:50,K:{minLength:1,whiteSpace:"collapse"}},{D:1,name:25,U:52,K:{whiteSpace:"collapse"}},{D:1,name:24,U:25,K:{whiteSpace:"collapse"}},{D:1,name:42,U:24,
K:{whiteSpace:"collapse"}},{D:1,name:41,U:24,K:{whiteSpace:"collapse"}},{D:2,name:43,type:41,K:{minLength:1,whiteSpace:"collapse"}},{D:1,name:26,U:24,K:{whiteSpace:"collapse"}},{D:2,name:40,type:26,K:{minLength:1,whiteSpace:"collapse"}},{D:0,name:5,parent:4,K:{ma:0,whiteSpace:"collapse"}},{D:1,name:27,U:5,K:{ma:0,ra:"0",whiteSpace:"collapse"}},{D:1,name:28,U:27,K:{ma:0,ra:"-1",whiteSpace:"collapse"}},{D:1,name:31,U:5,K:{ma:0,ra:"9223372036854775807",sa:"-9223372036854775808",whiteSpace:"collapse"}},
{D:1,name:32,U:31,K:{ma:0,ra:"2147483647",sa:"-2147483648",whiteSpace:"collapse"}},{D:1,name:33,U:32,K:{ma:0,ra:"32767",sa:"-32768",whiteSpace:"collapse"}},{D:1,name:34,U:33,K:{ma:0,ra:"127",sa:"-128",whiteSpace:"collapse"}},{D:1,name:30,U:5,K:{ma:0,sa:"0",whiteSpace:"collapse"}},{D:1,name:36,U:30,K:{ma:0,ra:"18446744073709551615",sa:"0",whiteSpace:"collapse"}},{D:1,name:35,U:36,K:{ma:0,ra:"4294967295",sa:"0",whiteSpace:"collapse"}},{D:1,name:38,U:35,K:{ma:0,ra:"65535",sa:"0",whiteSpace:"collapse"}},
{D:1,name:37,U:38,K:{ma:0,ra:"255",sa:"0",whiteSpace:"collapse"}},{D:1,name:29,U:30,K:{ma:0,sa:"1",whiteSpace:"collapse"}},{D:1,name:16,U:18,K:{whiteSpace:"collapse"}},{D:1,name:17,U:18,K:{whiteSpace:"collapse"}},{D:1,name:60,U:59},{D:3,name:39,Aa:[]},{D:1,name:61,U:60},{D:1,name:62,U:60},{D:0,name:53,parent:59},{D:1,name:54,U:53},{D:1,name:58,U:53},{D:1,name:47,U:53},{D:1,name:56,U:53},{D:1,name:57,U:53},{D:1,name:55,U:53},{D:3,name:2,Aa:[4,5,6,3]},{D:3,name:63,Aa:[]}].forEach(function(a){var b=
a.name,c=a.K||{};switch(a.D){case 0:a=a.parent?bb[a.parent]:null;var d=$a.get(b)||null;bb[b]={D:0,type:b,Ia:c,parent:a,fb:d,La:Ra(b),Aa:[]};break;case 1:a=bb[a.U];d=$a.get(b)||null;bb[b]={D:1,type:b,Ia:c,parent:a,fb:d,La:a.La,Aa:[]};break;case 2:bb[b]={D:2,type:b,Ia:c,parent:bb[a.type],fb:null,La:Sa,Aa:[]};break;case 3:a=a.Aa.map(function(e){return bb[e]}),bb[b]={D:3,type:b,Ia:c,parent:null,fb:null,La:Ta,Aa:a}}});function y(a,b){if(!bb[b])throw Error("Unknown type");return{type:b,value:a}}var cb=y(!0,0),db=y(!1,0);function eb(){return Error("FORG0006: A wrong argument type was specified in a function call.")};function fb(a,b){this.done=a;this.value=b}var z=new fb(!0,void 0);function B(a){return new fb(!1,a)};function gb(a,b){if(3===b.D)return!!b.Aa.find(function(c){return gb(a,c)});for(;a;){if(a.type===b.type)return!0;if(3===a.D)return!!a.Aa.find(function(c){return C(c.type,b.type)});a=a.parent}return!1}function C(a,b){return a===b?!0:gb(bb[a],bb[b])};function hb(a){this.s=E;this.h=a;var b=-1;this.value={next:function(){b++;return b>=a.length?z:B(a[b])}}}h=hb.prototype;h.ob=function(){return this};h.filter=function(a){var b=this,c=-1;return this.s.create({next:function(){for(c++;c<b.h.length&&!a(b.h[c],c,b);)c++;return c>=b.h.length?z:B(b.h[c])}})};h.first=function(){return this.h[0]};h.M=function(){return this.h};h.getEffectiveBooleanValue=function(){if(C(this.h[0].type,53))return!0;throw eb();};h.Na=function(){return this.h.length};h.G=function(){return!1};
h.ya=function(){return!1};h.map=function(a){var b=this,c=-1;return this.s.create({next:function(){return++c>=b.h.length?z:B(a(b.h[c],c,b))}},this.h.length)};h.L=function(a){return a(this.h)};h.$=function(a){return a.multiple?a.multiple(this):a.default(this)};function kb(){this.value={next:function(){return z}}}h=kb.prototype;h.ob=function(){return this};h.filter=function(){return this};h.first=function(){return null};h.M=function(){return[]};h.getEffectiveBooleanValue=function(){return!1};h.Na=function(){return 0};h.G=function(){return!0};h.ya=function(){return!1};h.map=function(){return this};h.L=function(a){return a([])};h.$=function(a){return a.empty?a.empty(this):a.default(this)};function lb(a){var b=a.value;if(C(a.type,53))return!0;if(C(a.type,0))return b;if(C(a.type,1)||C(a.type,20)||C(a.type,19))return 0!==b.length;if(C(a.type,2))return!isNaN(b)&&0!==b;throw eb();};function mb(a,b){var c=this;this.j=E;this.value={next:function(d){if(null!==c.s&&c.h>=c.s)return z;if(void 0!==c.A[c.h])return B(c.A[c.h++]);d=a.next(d);if(d.done)return c.s=c.h,d;if(c.u||2>c.h)c.A[c.h]=d.value;c.h++;return d}};this.u=!1;this.A=[];this.h=0;this.s=void 0===b?null:b}h=mb.prototype;h.ob=function(){return this.j.create(this.M())};h.filter=function(a){var b=this,c=-1,d=this.value;return this.j.create({next:function(e){c++;for(e=d.next(e);!e.done&&!a(e.value,c,b);)c++,e=d.next(0);return e}})};
h.first=function(){if(void 0!==this.A[0])return this.A[0];var a=this.value.next(0);nb(this);return a.done?null:a.value};h.M=function(){if(this.h>this.A.length&&this.s!==this.A.length)throw Error("Implementation error: Sequence Iterator has progressed.");var a=this.value;this.u=!0;for(var b=a.next(0);!b.done;)b=a.next(0);return this.A};
h.getEffectiveBooleanValue=function(){var a=this.value,b=this.h;nb(this);var c=a.next(0);if(c.done)return nb(this,b),!1;c=c.value;if(C(c.type,53))return nb(this,b),!0;if(!a.next(0).done)throw eb();nb(this,b);return lb(c)};h.Na=function(a){if(null!==this.s)return this.s;if(void 0===a?0:a)return-1;a=this.h;var b=this.M().length;nb(this,a);return b};h.G=function(){return 0===this.s?!0:null===this.first()};
h.ya=function(){if(null!==this.s)return 1===this.s;var a=this.value,b=this.h;nb(this);if(a.next(0).done)return nb(this,b),!1;a=a.next(0);nb(this,b);return a.done};h.map=function(a){var b=this,c=0,d=this.value;return this.j.create({next:function(e){e=d.next(e);return e.done?z:B(a(e.value,c++,b))}},this.s)};h.L=function(a,b){var c=this.value,d,e=[],f=!0;(function(){for(var g=c.next(f?0:b);!g.done;g=c.next(b))f=!1,e.push(g.value);d=a(e).value})();return this.j.create({next:function(){return d.next(0)}})};
h.$=function(a){function b(e){d=e.value;e=e.Na(!0);-1!==e&&(c.s=e)}var c=this,d=null;return this.j.create({next:function(e){if(d)return d.next(e);if(c.G())return b(a.empty?a.empty(c):a.default(c)),d.next(e);if(c.ya())return b(a.o?a.o(c):a.default(c)),d.next(e);b(a.multiple?a.multiple(c):a.default(c));return d.next(e)}})};function nb(a,b){a.h=void 0===b?0:b};function ob(a){this.A=E;this.h=a;var b=!1;this.value={next:function(){if(b)return z;b=!0;return B(a)}};this.s=null}h=ob.prototype;h.ob=function(){return this};h.filter=function(a){return a(this.h,0,this)?this:this.A.create()};h.first=function(){return this.h};h.M=function(){return[this.h]};h.getEffectiveBooleanValue=function(){null===this.s&&(this.s=lb(this.h));return this.s};h.Na=function(){return 1};h.G=function(){return!1};h.ya=function(){return!0};
h.map=function(a){return this.A.create(a(this.h,0,this))};h.L=function(a){return a([this.h])};h.$=function(a){return a.o?a.o(this):a.default(this)};var pb=new kb;function qb(a,b){a=void 0===a?null:a;if(null===a)return pb;if(Array.isArray(a))switch(a.length){case 0:return pb;case 1:return new ob(a[0]);default:return new hb(a)}return a.next?new mb(a,void 0===b?null:b):new ob(a)}var E={create:qb,o:function(a){return new ob(a)},empty:function(){return qb()},ca:function(){return qb(cb)},X:function(){return qb(db)}};function rb(a){var b=[],c=a.value;return function(){var d=0;return E.create({next:function(){if(void 0!==b[d])return b[d++];var e=c.next(0);return e.done?e:b[d++]=e}})}};function sb(a,b){this.type=a;this.value=b}
var F={},tb=(F[0]="xs:boolean",F[1]="xs:string",F[2]="xs:numeric",F[3]="xs:double",F[4]="xs:decimal",F[5]="xs:integer",F[6]="xs:float",F[7]="xs:date",F[8]="xs:time",F[9]="xs:dateTime",F[10]="xs:dateTimeStamp",F[11]="xs:gYearMonth",F[12]="xs:gYear",F[13]="xs:gMonthDay",F[14]="xs:gMonth",F[15]="xs:gDay",F[16]="xs:yearMonthDuration",F[17]="xs:dayTimeDuration",F[18]="xs:duration",F[19]="xs:untypedAtomic",F[20]="xs:anyURI",F[21]="xs:base64Binary",F[22]="xs:hexBinary",F[23]="xs:QName",F[24]="xs:NCName",
F[25]="xs:Name",F[26]="xs:ENTITY",F[27]="xs:nonPositiveInteger",F[28]="xs:negativeInteger",F[29]="xs:positiveInteger",F[30]="xs:nonNegativeInteger",F[31]="xs:long",F[32]="xs:int",F[33]="xs:short",F[34]="xs:byte",F[35]="xs:unsignedInt",F[36]="xs:unsignedLong",F[37]="xs:unsignedByte",F[38]="xs:unsignedShort",F[39]="xs:error",F[40]="xs:ENTITIES",F[41]="xs:IDREF",F[42]="xs:ID",F[43]="xs:IDREFS",F[44]="xs:NOTATION",F[45]="xs:anySimpleType",F[46]="xs:anyAtomicType",F[47]="attribute()",F[48]="xs:normalizedString",
F[49]="xs:NMTOKENS",F[50]="xs:NMTOKEN",F[51]="xs:language",F[52]="xs:token",F[53]="node()",F[54]="element()",F[55]="document-node()",F[56]="text()",F[57]="processing-instruction()",F[58]="comment()",F[59]="item()",F[60]="function(*)",F[61]="map(*)",F[62]="array(*)",F[63]="none",F),ub={"xs:boolean":0,"xs:string":1,"xs:numeric":2,"xs:double":3,"xs:decimal":4,"xs:integer":5,"xs:float":6,"xs:date":7,"xs:time":8,"xs:dateTime":9,"xs:dateTimeStamp":10,"xs:gYearMonth":11,"xs:gYear":12,"xs:gMonthDay":13,"xs:gMonth":14,
"xs:gDay":15,"xs:yearMonthDuration":16,"xs:dayTimeDuration":17,"xs:duration":18,"xs:untypedAtomic":19,"xs:anyURI":20,"xs:base64Binary":21,"xs:hexBinary":22,"xs:QName":23,"xs:NCName":24,"xs:Name":25,"xs:ENTITY":26,"xs:nonPositiveInteger":27,"xs:negativeInteger":28,"xs:positiveInteger":29,"xs:nonNegativeInteger":30,"xs:long":31,"xs:int":32,"xs:short":33,"xs:byte":34,"xs:unsignedInt":35,"xs:unsignedLong":36,"xs:unsignedByte":37,"xs:unsignedShort":38,"xs:error":39,"xs:ENTITIES":40,"xs:IDREF":41,"xs:ID":42,
"xs:IDREFS":43,"xs:NOTATION":44,"xs:anySimpleType":45,"xs:anyAtomicType":46,"attribute()":47,"xs:normalizedString":48,"xs:NMTOKENS":49,"xs:NMTOKEN":50,"xs:language":51,"xs:token":52,"node()":53,"element()":54,"document-node()":55,"text()":56,"processing-instruction()":57,"comment()":58,"item()":59,"function(*)":60,"map(*)":61,"array(*)":62};function vb(a){return 2===a.g?tb[a.type]+"*":1===a.g?tb[a.type]+"+":0===a.g?tb[a.type]+"?":tb[a.type]}
function wb(a){if("none"===a)throw Error('XPST0051: The type "none" could not be found');if(!a.startsWith("xs:")&&0<=a.indexOf(":"))throw Error("XPST0081: Invalid prefix for input "+a);var b=ub[a];if(void 0===b)throw Error('XPST0051: The type "'+a+'" could not be found');return b}
function xb(a){switch(a[a.length-1]){case "*":return{type:wb(a.substr(0,a.length-1)),g:2};case "?":return{type:wb(a.substr(0,a.length-1)),g:0};case "+":return{type:wb(a.substr(0,a.length-1)),g:1};default:return{type:wb(a),g:3}}}function yb(a){switch(a){case "*":return 2;case "?":return 0;case "+":return 1;default:return 3}};function Ab(a,b,c){this.namespaceURI=b||null;this.prefix=a||"";this.localName=c}Ab.prototype.va=function(){return this.prefix?this.prefix+":"+this.localName:this.localName};function Bb(a){var b=a.l,c=a.arity,d=void 0===a.Pa?!1:a.Pa,e=void 0===a.I?!1:a.I,f=a.localName,g=a.namespaceURI,k=a.i;a=a.value;sb.call(this,60,null);this.value=a;this.I=e;e=-1;for(a=0;a<b.length;a++)4===b[a]&&(e=a);-1<e&&(a=Array(c-(b.length-1)).fill(b[e-1]),b=b.slice(0,e).concat(a));this.s=b;this.A=c;this.ha=d;this.j=f;this.u=g;this.O=k}x(Bb,sb);
function Cb(a,b){var c=a.value,d=b.map(function(e){return null===e?null:rb(e)});b=b.reduce(function(e,f,g){null===f&&e.push(a.s[g]);return e},[]);b=new Bb({l:b,arity:b.length,Pa:!0,I:a.I,localName:"boundFunction",namespaceURI:a.u,i:a.O,value:function(e,f,g){var k=Array.from(arguments).slice(3),l=d.map(function(n){return null===n?k.shift():n()});return c.apply(void 0,[e,f,g].concat(l))}});return E.o(b)}Bb.prototype.Pa=function(){return this.ha};function Db(a,b){var c=[];2!==a&&1!==a||c.push("type-1-or-type-2");c.push("type-"+a);b&&c.push("name-"+b);return c}function Eb(a){var b=a.node.nodeType;if(2===b||1===b)var c=a.node.localName;return Db(b,c)}function Fb(a){var b=a.nodeType;if(2===b||1===b)var c=a.localName;return Db(b,c)};function Gb(){}Gb.prototype.getAllAttributes=function(a,b){b=void 0===b?null:b;if(1!==a.nodeType)return[];a=Array.from(a.attributes);return null===b?a:a.filter(function(c){return Fb(c).includes(b)})};Gb.prototype.getAttribute=function(a,b){return 1!==a.nodeType?null:a.getAttribute(b)};Gb.prototype.getChildNodes=function(a,b){b=void 0===b?null:b;a=Array.from(a.childNodes);return null===b?a:a.filter(function(c){return Fb(c).includes(b)})};
Gb.prototype.getData=function(a){return 2===a.nodeType?a.value:a.data};Gb.prototype.getFirstChild=function(a,b){b=void 0===b?null:b;for(a=a.firstChild;a;a=a.nextSibling)if(null===b||Fb(a).includes(b))return a;return null};Gb.prototype.getLastChild=function(a,b){b=void 0===b?null:b;for(a=a.lastChild;a;a=a.previousSibling)if(null===b||Fb(a).includes(b))return a;return null};
Gb.prototype.getNextSibling=function(a,b){b=void 0===b?null:b;for(a=a.nextSibling;a;a=a.nextSibling)if(null===b||Fb(a).includes(b))return a;return null};Gb.prototype.getParentNode=function(a,b){b=void 0===b?null:b;return(a=2===a.nodeType?a.ownerElement:a.parentNode)?null===b||Fb(a).includes(b)?a:null:null};Gb.prototype.getPreviousSibling=function(a,b){b=void 0===b?null:b;for(a=a.previousSibling;a;a=a.previousSibling)if(null===b||Fb(a).includes(b))return a;return null};function Hb(){}h=Hb.prototype;h.insertBefore=function(a,b,c){return a.insertBefore(b,c)};h.removeAttributeNS=function(a,b,c){return a.removeAttributeNS(b,c)};h.removeChild=function(a,b){return a.removeChild(b)};h.setAttributeNS=function(a,b,c,d){a.setAttributeNS(b,c,d)};h.setData=function(a,b){a.data=b};var Ib=new Hb;function Jb(a){this.h=a}h=Jb.prototype;h.insertBefore=function(a,b,c){return this.h.insertBefore(a,b,c)};h.removeAttributeNS=function(a,b,c){return this.h.removeAttributeNS(a,b,c)};h.removeChild=function(a,b){return this.h.removeChild(a,b)};h.setAttributeNS=function(a,b,c,d){this.h.setAttributeNS(a,b,c,d)};h.setData=function(a,b){this.h.setData(a,b)};function Kb(a){return void 0!==a.Qa};function Lb(a,b,c){var d=null;b&&(Kb(b.node)?d={F:b.F,offset:c,parent:b.node}:b.F&&(d=b.F));return{node:a,F:d}}function Mb(a){this.h=a;this.s=[]}function Nb(a,b,c){return a.getAllAttributes(b.node,void 0===c?null:c).map(function(d){return Lb(d,b,d.nodeName)})}Mb.prototype.getAllAttributes=function(a,b){return Kb(a)?a.attributes:this.h.getAllAttributes(a,void 0===b?null:b)};
function Ob(a,b,c){b=b.node;return Kb(b)?(a=b.attributes.find(function(d){return c===d.name}))?a.value:null:(a=a.h.getAttribute(b,c))?a:null}function Pb(a,b,c){return a.getChildNodes(b.node,void 0===c?null:c).map(function(d,e){return Lb(d,b,e)})}Mb.prototype.getChildNodes=function(a,b){b=Kb(a)?a.childNodes:this.h.getChildNodes(a,void 0===b?null:b);return 9===a.nodeType?b.filter(function(c){return 10!==c.nodeType}):b};
Mb.prototype.getData=function(a){return Kb(a)?2===a.nodeType?a.value:a.data:this.h.getData(a)||""};function Qb(a,b){return a.getData(b.node)}function Rb(a,b,c){var d=b.node;Kb(d)?a=d.childNodes[0]:((c=a.h.getFirstChild(d,void 0===c?null:c))&&10===c.nodeType&&(c=a.h.getNextSibling(c)),a=c);return a?Lb(a,b,0):null}
function Sb(a,b,c){c=void 0===c?null:c;var d=b.node;Kb(d)?(a=d.childNodes.length-1,d=d.childNodes[a]):((d=a.h.getLastChild(d,c))&&10===d.nodeType&&(d=a.h.getPreviousSibling(d)),a=a.getChildNodes(b.node,c).length-1);return d?Lb(d,b,a):null}
function Tb(a,b,c){c=void 0===c?null:c;var d=b.node,e=b.F;if(Kb(d)){if(e){var f=e.offset+1;var g=e.parent.childNodes[f]}}else if(e){f=e.offset+1;var k=Ub(a,b,null);g=a.getChildNodes(k.node,c)[f]}else{for(g=d;g&&(!(g=a.h.getNextSibling(g,c))||10===g.nodeType););return g?{node:g,F:null}:null}return g?Lb(g,k||Ub(a,b,c),f):null}Mb.prototype.getParentNode=function(a,b){return this.h.getParentNode(a,void 0===b?null:b)};
function Ub(a,b,c){c=void 0===c?null:c;var d=b.node,e=b.F;if(e)"number"===typeof e.offset&&d===e.parent.childNodes[e.offset]||"string"===typeof e.offset&&d===e.parent.attributes.find(function(f){return e.offset===f.nodeName})?(a=e.parent,b=e.F):(a=a.getParentNode(d,c),b=e);else{if(Kb(d))return null;a=a.getParentNode(d,c);b=null}return a?{node:a,F:b}:null}
function Vb(a,b,c){c=void 0===c?null:c;var d=b.node,e=b.F;if(Kb(d)){if(e){var f=e.offset-1;var g=e.parent.childNodes[f]}}else if(e){f=e.offset-1;var k=Ub(a,b,null);g=a.getChildNodes(k.node,c)[f]}else{for(g=d;g&&(!(g=a.h.getPreviousSibling(g,c))||10===g.nodeType););return g?{node:g,F:null}:null}return g?Lb(g,k||Ub(a,b,c),f):null};function Wb(a,b,c,d,e){return e.L(function(f){var g=t(f).next().value;return d.L(function(k){k=t(k).next().value;var l=g.value;if(0>=l||l>k.R.length)throw Error("FOAY0001: array position out of bounds.");return k.R[l-1]()})})};function Xb(a){Bb.call(this,{value:function(c,d,e,f){return Wb(c,d,e,E.o(b),f)},localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/array",l:[{type:5,g:3}],arity:1,i:{type:59,g:2}});var b=this;this.type=62;this.R=a}x(Xb,Bb);function Yb(a){switch(a.node.nodeType){case 2:return 47;case 1:return 54;case 3:case 4:return 56;case 7:return 57;case 8:return 58;case 9:return 55;default:return 53}}function Zb(a){return{type:Yb(a),value:a}};function $b(a,b){a=a.map(function(c){return c.first()});return b(a)};function ac(a,b){var c=C(a.type,1)||C(a.type,20)||C(a.type,19),d=C(b.type,1)||C(b.type,20)||C(b.type,19);if(c&&d)return a.value===b.value;c=C(a.type,4)||C(a.type,3)||C(a.type,6);d=C(b.type,4)||C(b.type,3)||C(b.type,6);if(c&&d)return isNaN(a.value)&&isNaN(b.value)?!0:a.value===b.value;c=C(a.type,0)||C(a.type,22)||C(a.type,18)||C(a.type,23)||C(a.type,44);d=C(b.type,0)||C(b.type,22)||C(b.type,18)||C(b.type,23)||C(b.type,44);return c&&d?a.value===b.value:!1};function bc(a,b,c,d,e){return $b([d,e],function(f){f=t(f);var g=f.next().value,k=f.next().value;return(f=g.h.find(function(l){return ac(l.key,k)}))?f.value():E.empty()})};function cc(a){Bb.call(this,{l:[{type:59,g:3}],arity:1,localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/map",value:function(c,d,e,f){return bc(c,d,e,E.o(b),f)},i:{type:59,g:2}});var b=this;this.type=61;this.h=a}x(cc,Bb);function dc(){}function ec(a,b){return a.ab()===b.ab()&&a.bb()===b.bb()}h=dc.prototype;h.Za=function(){return 0};h.getHours=function(){return 0};h.getMinutes=function(){return 0};h.$a=function(){return 0};h.ab=function(){return 0};h.bb=function(){return 0};h.getSeconds=function(){return 0};h.cb=function(){return 0};h.oa=function(){return!0};function fc(a){if(a>Number.MAX_SAFE_INTEGER||a<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of seconds given to construct DayTimeDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ea=a}x(fc,dc);h=fc.prototype;h.Za=function(){return Math.trunc(this.ea/86400)};h.getHours=function(){return Math.trunc(this.ea%86400/3600)};h.getMinutes=function(){return Math.trunc(this.ea%3600/60)};h.bb=function(){return this.ea};h.getSeconds=function(){var a=this.ea%60;return Object.is(-0,a)?0:a};
h.oa=function(){return Object.is(-0,this.ea)?!1:0<=this.ea};h.toString=function(){return(this.oa()?"P":"-P")+gc(this)};function gc(a){var b=Math.abs(a.Za()),c=Math.abs(a.getHours()),d=Math.abs(a.getMinutes());a=Math.abs(a.getSeconds());b=b?b+"D":"";c=(c?c+"H":"")+(d?d+"M":"")+(a?a+"S":"");return b&&c?b+"T"+c:b?b:c?"T"+c:"T0S"}function hc(a,b,c,d,e,f){a=86400*a+3600*b+60*c+d+e;return new fc(f||0===a?a:-a)}
function ic(a){return(a=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(a))?hc(a[4]?parseInt(a[4],10):0,a[5]?parseInt(a[5],10):0,a[6]?parseInt(a[6],10):0,a[7]?parseInt(a[7],10):0,a[8]?parseFloat(a[8]):0,!a[1]):null}function jc(a){a=/^(Z)|([+-])([01]\d):([0-5]\d)$/.exec(a);return"Z"===a[1]?hc(0,0,0,0,0,!0):hc(0,a[3]?parseInt(a[3],10):0,a[4]?parseInt(a[4],10):0,0,0,"+"===a[2])}
function kc(a,b){if(isNaN(b))throw Error("FOCA0005: Cannot multiply xs:dayTimeDuration by NaN");a=a.ea*b;if(a>Number.MAX_SAFE_INTEGER||!Number.isFinite(a))throw Error("FODT0002: Value overflow while multiplying xs:dayTimeDuration");return new fc(a<Number.MIN_SAFE_INTEGER||Object.is(-0,a)?0:a)};function lc(a){return a?parseInt(a,10):null}function mc(a){a+="";var b=a.startsWith("-");b&&(a=a.substring(1));return(b?"-":"")+a.padStart(4,"0")}function nc(a){return(a+"").padStart(2,"0")}function oc(a){a+="";1===a.split(".")[0].length&&(a=a.padStart(a.length+1,"0"));return a}function pc(a){return 0===a.getHours()&&0===a.getMinutes()?"Z":(a.oa()?"+":"-")+nc(Math.abs(a.getHours()))+":"+nc(Math.abs(a.getMinutes()))}
function qc(a,b,c,d,e,f,g,k,l){this.A=a;this.h=b;this.s=c+(24===d?1:0);this.u=24===d?0:d;this.O=e;this.j=f;this.pa=g;this.Z=k;this.type=void 0===l?9:l}
function rc(a,b){switch(b){case 15:return new qc(1972,12,a.s,0,0,0,0,a.Z,15);case 14:return new qc(1972,a.h,1,0,0,0,0,a.Z,14);case 12:return new qc(a.A,1,1,0,0,0,0,a.Z,12);case 13:return new qc(1972,a.h,a.s,0,0,0,0,a.Z,13);case 11:return new qc(a.A,a.h,1,0,0,0,0,a.Z,11);case 8:return new qc(1972,12,31,a.u,a.O,a.j,a.pa,a.Z,8);case 7:return new qc(a.A,a.h,a.s,0,0,0,0,a.Z,7);default:return new qc(a.A,a.h,a.s,a.u,a.O,a.j,a.pa,a.Z,9)}}h=qc.prototype;h.getDay=function(){return this.s};h.getHours=function(){return this.u};
h.getMinutes=function(){return this.O};h.getMonth=function(){return this.h};h.getSeconds=function(){return this.j};h.getYear=function(){return this.A};function sc(a,b){b=a.Z||b||jc("Z");return new Date(Date.UTC(a.A,a.h-1,a.s,a.u-b.getHours(),a.O-b.getMinutes(),a.j+a.pa))}
h.toString=function(){switch(this.type){case 9:return mc(this.A)+"-"+nc(this.h)+"-"+nc(this.s)+"T"+nc(this.u)+":"+nc(this.O)+":"+oc(this.j+this.pa)+(this.Z?pc(this.Z):"");case 7:return mc(this.A)+"-"+nc(this.h)+"-"+nc(this.s)+(this.Z?pc(this.Z):"");case 8:return nc(this.u)+":"+nc(this.O)+":"+oc(this.j+this.pa)+(this.Z?pc(this.Z):"");case 15:return"---"+nc(this.s)+(this.Z?pc(this.Z):"");case 14:return"--"+nc(this.h)+(this.Z?pc(this.Z):"");case 13:return"--"+nc(this.h)+"-"+nc(this.s)+(this.Z?pc(this.Z):
"");case 12:return mc(this.A)+(this.Z?pc(this.Z):"");case 11:return mc(this.A)+"-"+nc(this.h)+(this.Z?pc(this.Z):"")}throw Error("Unexpected subType");};
function tc(a){var b=/^(?:(-?\d{4,}))?(?:--?(\d\d))?(?:-{1,3}(\d\d))?(T)?(?:(\d\d):(\d\d):(\d\d))?(\.\d+)?(Z|(?:[+-]\d\d:\d\d))?$/.exec(a);a=b[1]?parseInt(b[1],10):null;var c=lc(b[2]),d=lc(b[3]),e=b[4],f=lc(b[5]),g=lc(b[6]),k=lc(b[7]),l=b[8]?parseFloat(b[8]):0;b=b[9]?jc(b[9]):null;if(a&&(-271821>a||273860<a))throw Error("FODT0001: Datetime year is out of bounds");return e?new qc(a,c,d,f,g,k,l,b,9):null!==f&&null!==g&&null!==k?new qc(1972,12,31,f,g,k,l,b,8):null!==a&&null!==c&&null!==d?new qc(a,c,
d,0,0,0,0,b,7):null!==a&&null!==c?new qc(a,c,1,0,0,0,0,b,11):null!==c&&null!==d?new qc(1972,c,d,0,0,0,0,b,13):null!==a?new qc(a,1,1,0,0,0,0,b,12):null!==c?new qc(1972,c,1,0,0,0,0,b,14):new qc(1972,12,d,0,0,0,0,b,15)}function uc(a,b,c){var d=sc(a,c).getTime();c=sc(b,c).getTime();return d===c?a.pa===b.pa?0:a.pa>b.pa?1:-1:d>c?1:-1}function vc(a,b,c){return 0===uc(a,b,c)}function xc(a,b,c){a=(sc(a,c).getTime()-sc(b,c).getTime())/1E3;return new fc(a)}
function yc(a){throw Error("Not implemented: adding durations to "+tb[a.type]);}function zc(a){throw Error("Not implemented: subtracting durations from "+tb[a.type]);};function Ac(a,b){if(null===a)return null;switch(typeof a){case "boolean":return a?cb:db;case "number":return y(a,3);case "string":return y(a,1);case "object":return"nodeType"in a?Zb({node:a,F:null}):Array.isArray(a)?new Xb(a.map(function(c){if(void 0===c)return function(){return E.empty()};c=Ac(c,b);c=null===c?E.empty():E.o(c);return rb(c)})):new cc(Object.keys(a).filter(function(c){return void 0!==a[c]}).map(function(c){var d=Ac(a[c],b);d=null===d?E.empty():E.o(d);return{key:y(c,1),value:rb(d)}}))}throw Error("Value "+
String(a)+' of type "'+typeof a+'" is not adaptable to an XPath value.');}function Bc(a,b){if("number"!==typeof a&&("string"!==typeof a||!$a.get(b)(a)))throw Error("Cannot convert JavaScript value '"+a+"' to the XPath type "+tb[b]+" since it is not valid.");}
function Cc(a,b,c){if(null===b)return null;switch(a){case 0:return b?cb:db;case 1:return y(b+"",1);case 3:case 2:return Bc(b,3),y(+b,3);case 4:return Bc(b,a),y(+b,4);case 5:return Bc(b,a),y(b|0,5);case 6:return Bc(b,a),y(+b,6);case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:if(!(b instanceof Date))throw Error("The JavaScript value "+b+" with type "+typeof b+" is not a valid type to be converted to an XPath "+tb[a]+".");return y(rc(tc(b.toISOString()),a),a);case 53:case 47:case 55:case 54:case 56:case 57:case 58:if("object"!==
typeof b||!("nodeType"in b))throw Error("The JavaScript value "+b+" with type "+typeof b+" is not a valid type to be converted to an XPath "+tb[a]+".");return Zb({node:b,F:null});case 59:return Ac(b,c);default:throw Error('Values of the type "'+a+'" can not be adapted to equivalent XPath values.');}}
function Dc(a,b,c){if(0===c.g)return b=Cc(c.type,b,a),null===b?[]:[b];if(2===c.g||1===c.g){if(!Array.isArray(b))throw Error("The JavaScript value "+b+" should be an array if it is to be converted to "+vb(c)+".");return b.map(function(e){return Cc(c.type,e,a)}).filter(function(e){return null!==e})}var d=Cc(c.type,b,a);if(null===d)throw Error("The JavaScript value "+b+" should be a single entry if it is to be converted to "+vb(c)+".");return[d]}
function Ec(a,b,c){c=void 0===c?{type:59,g:0}:c;return E.create(Dc(a,b,c))};function Fc(a,b){this.h=b=void 0===b?{vb:null,Ab:null,pb:!1}:b;this.Ja=a.Ja;this.Ga=a.Ga;this.N=a.N;this.Ea=a.Ea||Object.create(null)}function Gc(a,b){var c=0,d=b.value;return{next:function(e){e=d.next(e);return e.done?z:B(Hc(a,c++,e.value,b))}}}function Ic(a){a.h.pb||(a.h.pb=!0,a.h.vb=tc((new Date).toISOString()),a.h.Ab=ic("PT0S"));return a.h.vb}function Jc(a){a.h.pb||(a.h.pb=!0,a.h.vb=tc((new Date).toISOString()),a.h.Ab=ic("PT0S"));return a.h.Ab}
function Hc(a,b,c,d){return new Fc({N:c,Ja:b,Ga:d||a.Ga,Ea:a.Ea},a.h)}function Kc(a,b){return new Fc({N:a.N,Ja:a.Ja,Ga:a.Ga,Ea:Object.assign(Object.create(null),a.Ea,b)},a.h)};function Lc(a,b,c,d,e,f,g,k){var l=new Map;this.debug=a;this.Ha=b;this.h=c;this.s=d;this.A=e;this.u=f;this.ha=l;this.O=g;this.j=k};function Mc(a){var b=0,c=null,d=!0;return E.create({next:function(e){for(;b<a.length;){c||(c=a[b].value,d=!0);var f=c.next(d?0:e);d=!1;if(f.done)b++,c=null;else return f}return z}})};function Nc(a,b,c){return Error("FORG0001: Cannot cast "+a+" to "+tb[b]+(c?", "+c:""))}function Oc(a){return Error("XPTY0004: "+a)}function Pc(a){return Error("FOTY0013: Atomization is not supported for "+tb[a]+".")}function Qc(a){return Error("XPST0081: The prefix "+a+" could not be resolved.")};function Uc(a,b){if(C(a.type,46)||C(a.type,19)||C(a.type,0)||C(a.type,4)||C(a.type,3)||C(a.type,6)||C(a.type,5)||C(a.type,2)||C(a.type,23)||C(a.type,1))return E.create(a);var c=b.h;if(C(a.type,53)){var d=a.value;if(2===d.node.nodeType||3===d.node.nodeType)return E.create(y(Qb(c,d),19));if(8===d.node.nodeType||7===d.node.nodeType)return E.create(y(Qb(c,d),1));var e=[];(function k(g){if(8!==d.node.nodeType&&7!==d.node.nodeType){var l=g.nodeType;3===l||4===l?e.push(c.getData(g)):1!==l&&9!==l||c.getChildNodes(g).forEach(function(n){k(n)})}})(d.node);
return E.create(y(e.join(""),19))}if(C(a.type,60)&&!C(a.type,62))throw Pc(a.type);if(C(a.type,62))return Mc(a.R.map(function(f){return Vc(f(),b)}));throw Error("Atomizing "+a.type+" is not implemented.");}function Vc(a,b){var c=!1,d=a.value,e=null;return E.create({next:function(){for(;!c;){if(!e){var f=d.next(0);if(f.done){c=!0;break}e=Uc(f.value,b).value}f=e.next(0);if(f.done)e=null;else return f}return z}})};function Wc(a){for(a=bb[a];a&&0!==a.D;)a=a.parent;return a?a.type:null}function Xc(a,b){b=bb[b];var c=b.Ia;if(!c||!c.whiteSpace)return b.parent?Xc(a,b.parent.type):a;switch(b.Ia.whiteSpace){case "replace":return a.replace(/[\u0009\u000A\u000D]/g," ");case "collapse":return a.replace(/[\u0009\u000A\u000D]/g," ").replace(/ {2,}/g," ").replace(/^ | $/g,"")}return a}function Yc(a,b){for(b=bb[b];b&&null===b.fb;){if(2===b.D||3===b.D)return!0;b=b.parent}return b?b.fb(a):!0}
function Zc(a,b){for(;a;){if(a.La&&a.La[b])return a.La[b];a=a.parent}return function(){return!0}}function $c(a,b){for(var c=bb[b];c;){if(c.Ia&&!Object.keys(c.Ia).every(function(d){if("whiteSpace"===d)return!0;var e=Zc(c,d);return e?e(a,c.Ia[d]):!0}))return!1;c=c.parent}return!0};function ad(a){return a(1)||a(19)?function(b){return{v:!0,value:y(b,20)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:anyURI or any of its derived types.")}}};function bd(a){return a(22)?function(b){for(var c="",d=0;d<b.length;d+=2)c+=String.fromCharCode(parseInt(b.substr(d,2),16));return{v:!0,value:y(btoa(c),21)}}:a(1)||a(19)?function(b){return{v:!0,value:y(b,21)}}:function(){return{error:Error("XPTY0004: Casting not supported from given type to xs:base64Binary or any of its derived types."),v:!1}}};function cd(a){return a(2)?function(b){return{v:!0,value:0===b||isNaN(b)?db:cb}}:a(1)||a(19)?function(b){switch(b){case "true":case "1":return{v:!0,value:cb};case "false":case "0":return{v:!0,value:db};default:return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}};function dd(a){return a(9)?function(b){return{v:!0,value:y(rc(b,7),7)}}:a(19)||a(1)?function(b){return{v:!0,value:y(tc(b),7)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:date or any of its derived types.")}}};function ed(a){return a(7)?function(b){return{v:!0,value:y(rc(b,9),9)}}:a(19)||a(1)?function(b){return{v:!0,value:y(tc(b),9)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dateTime or any of its derived types.")}}};function fd(a){return a(18)&&!a(16)?function(b){return{v:!0,value:y(b.Fa,17)}}:a(16)?function(){return{v:!0,value:y(ic("PT0.0S"),17)}}:a(19)||a(1)?function(b){var c=ic(b);return c?{v:!0,value:y(c,17)}:{v:!1,error:Error("FORG0001: Can not cast "+b+" to xs:dayTimeDuration")}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dayTimeDuration or any of its derived types.")}}};function gd(a){return a(5)?function(b){return{v:!0,value:y(b,4)}}:a(6)||a(3)?function(b){return isNaN(b)||!isFinite(b)?{v:!1,error:Error("FOCA0002: Can not cast "+b+" to xs:decimal")}:Math.abs(b)>Number.MAX_VALUE?{v:!1,error:Error("FOAR0002: Can not cast "+b+" to xs:decimal, it is out of bounds for JavaScript numbers")}:{v:!0,value:y(b,4)}}:a(0)?function(b){return{v:!0,value:y(b?1:0,4)}}:a(1)||a(19)?function(b){var c=parseFloat(b);return!isNaN(c)||isFinite(c)?{v:!0,value:y(c,4)}:{v:!1,error:Error("FORG0001: Can not cast "+
b+" to xs:decimal")}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:decimal or any of its derived types.")}}};function hd(a,b){return a(2)?function(c){return{v:!0,value:c}}:a(0)?function(c){return{v:!0,value:c?1:0}}:a(1)||a(19)?function(c){switch(c){case "NaN":return{v:!0,value:NaN};case "INF":case "+INF":return{v:!0,value:Infinity};case "-INF":return{v:!0,value:-Infinity};case "0":case "+0":return{v:!0,value:0};case "-0":return{v:!0,value:-0}}var d=parseFloat(c);return isNaN(d)?{v:!1,error:Nc(c,b)}:{v:!0,value:d}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to "+b+
" or any of its derived types.")}}};function id(a){var b=hd(a,3);return function(c){c=b(c);return c.v?{v:!0,value:y(c.value,3)}:c}};function jd(a){if(a>Number.MAX_SAFE_INTEGER||a<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of months given to construct YearMonthDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ga=a}x(jd,dc);h=jd.prototype;h.$a=function(){var a=this.ga%12;return 0===a?0:a};h.ab=function(){return this.ga};h.cb=function(){return Math.trunc(this.ga/12)};h.oa=function(){return Object.is(-0,this.ga)?!1:0<=this.ga};h.toString=function(){return(this.oa()?"P":"-P")+kd(this)};
function kd(a){var b=Math.abs(a.cb());a=Math.abs(a.$a());return(b?b+"Y":"")+(a?a+"M":"")||"0M"}function ld(a){var b=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(a);if(b){a=!b[1];b=12*(b[2]?parseInt(b[2],10):0)+(b[3]?parseInt(b[3],10):0);if(b>Number.MAX_SAFE_INTEGER||!Number.isFinite(b))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");a=new jd(a||0===b?b:-b)}else a=null;return a}
function md(a,b){if(isNaN(b))throw Error("FOCA0005: Cannot multiply xs:yearMonthDuration by NaN");a=Math.round(a.ga*b);if(a>Number.MAX_SAFE_INTEGER||!Number.isFinite(a))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");return new jd(a<Number.MIN_SAFE_INTEGER||0===a?0:a)};function nd(a,b){this.Sa=a;this.Fa=b}x(nd,dc);h=nd.prototype;h.Za=function(){return this.Fa.Za()};h.getHours=function(){return this.Fa.getHours()};h.getMinutes=function(){return this.Fa.getMinutes()};h.$a=function(){return this.Sa.$a()};h.ab=function(){return this.Sa.ab()};h.bb=function(){return this.Fa.bb()};h.getSeconds=function(){return this.Fa.getSeconds()};h.cb=function(){return this.Sa.cb()};h.oa=function(){return this.Sa.oa()&&this.Fa.oa()};
h.toString=function(){var a=this.oa()?"P":"-P",b=kd(this.Sa),c=gc(this.Fa);return"0M"===b?a+c:"T0S"===c?a+b:a+b+c};function od(a){return a(16)?function(b){return{v:!0,value:y(new nd(b,new fc(b.oa()?0:-0)),18)}}:a(17)?function(b){b=new nd(new jd(b.oa()?0:-0),b);return{v:!0,value:y(b,18)}}:a(18)?function(b){return{v:!0,value:y(b,18)}}:a(19)||a(1)?function(b){var c;return c=new nd(ld(b),ic(b)),{v:!0,value:y(c,18)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:duration or any of its derived types.")}}};function pd(a){var b=hd(a,6);return function(c){c=b(c);return c.v?{v:!0,value:y(c.value,6)}:c}};function qd(a){return a(7)||a(9)?function(b){return{v:!0,value:y(rc(b,15),15)}}:a(19)||a(1)?function(b){return{v:!0,value:y(tc(b),15)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gDay or any of its derived types.")}}};function rd(a){return a(7)||a(9)?function(b){return{v:!0,value:y(rc(b,14),14)}}:a(19)||a(1)?function(b){return{v:!0,value:y(tc(b),14)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonth or any of its derived types.")}}};function td(a){return a(7)||a(9)?function(b){return{v:!0,value:y(rc(b,13),13)}}:a(19)||a(1)?function(b){return{v:!0,value:y(tc(b),13)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonthDay or any of its derived types.")}}};function ud(a){return a(7)||a(9)?function(b){return{v:!0,value:y(rc(b,12),12)}}:a(19)||a(1)?function(b){return{v:!0,value:y(tc(b),12)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYear or any of its derived types.")}}};function vd(a){return a(7)||a(9)?function(b){return{v:!0,value:y(rc(b,11),11)}}:a(19)||a(1)?function(b){return{v:!0,value:y(tc(b),11)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYearMonth or any of its derived types.")}}};function wd(a){return a(21)?function(b){b=atob(b);for(var c="",d=0,e=b.length;d<e;d++)c+=Number(b.charCodeAt(d)).toString(16);return{v:!0,value:y(c.toUpperCase(),22)}}:a(1)||a(19)?function(b){return{v:!0,value:y(b,22)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:hexBinary or any of its derived types.")}}};function xd(a){return a(0)?function(b){return{v:!0,value:y(b?1:0,5)}}:a(2)?function(b){var c=Math.trunc(b);return!isFinite(c)||isNaN(c)?{v:!1,error:Error("FOCA0002: can not cast "+b+" to xs:integer")}:Number.isSafeInteger(c)?{v:!0,value:y(c,5)}:{v:!1,error:Error("FOAR0002: can not cast "+b+" to xs:integer, it is out of bounds for JavaScript numbers.")}}:a(1)||a(19)?function(b){var c=parseInt(b,10);return isNaN(c)?{v:!1,error:Nc(b,5)}:Number.isSafeInteger(c)?{v:!0,value:y(c,5)}:{v:!1,error:Error("FOCA0003: can not cast "+
b+" to xs:integer, it is out of bounds for JavaScript numbers.")}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:integer or any of its derived types.")}}};var yd=[3,6,4,5];function zd(a){var b=Ad;return function(c){for(var d=t(yd),e=d.next();!e.done;e=d.next())if(e=b(a,e.value)(c),e.v)return e;return{v:!1,error:Error('XPTY0004: Casting not supported from "'+c+'" given type to xs:numeric or any of its derived types.')}}};function Bd(a){if(a(1)||a(19))return function(b){return{v:!0,value:b+""}};if(a(20))return function(b){return{v:!0,value:b}};if(a(23))return function(b){return{v:!0,value:b.prefix?b.prefix+":"+b.localName:b.localName}};if(a(44))return function(b){return{v:!0,value:b.toString()}};if(a(2)){if(a(5)||a(4))return function(b){return{v:!0,value:(b+"").replace("e","E")}};if(a(6)||a(3))return function(b){return isNaN(b)?{v:!0,value:"NaN"}:isFinite(b)?Object.is(b,-0)?{v:!0,value:"-0"}:{v:!0,value:(b+"").replace("e",
"E").replace("E+","E")}:{v:!0,value:(0>b?"-":"")+"INF"}}}return a(9)||a(7)||a(8)||a(15)||a(14)||a(13)||a(12)||a(11)?function(b){return{v:!0,value:b.toString()}}:a(16)?function(b){return{v:!0,value:b.toString()}}:a(17)?function(b){return{v:!0,value:b.toString()}}:a(18)?function(b){return{v:!0,value:b.toString()}}:a(22)?function(b){return{v:!0,value:b.toUpperCase()}}:function(b){return{v:!0,value:b+""}}};function Cd(a){var b=Bd(a);return function(c){c=b(c);return c.v?{v:!0,value:y(c.value,1)}:c}};function Dd(a){return a(9)?function(b){return{v:!0,value:y(rc(b,8),8)}}:a(19)||a(1)?function(b){return{v:!0,value:y(tc(b),8)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:time or any of its derived types.")}}};function Ed(a){var b=Bd(a);return function(c){c=b(c);return c.v?{v:!0,value:y(c.value,19)}:c}};function Fd(a){return a(18)&&!a(17)?function(b){return{v:!0,value:y(b.Sa,16)}}:a(17)?function(){return{v:!0,value:y(ld("P0M"),16)}}:a(19)||a(1)?function(b){var c=ld(b);return c?{v:!0,value:y(c,16)}:{v:!1,error:Nc(b,16)}}:function(){return{v:!1,error:Error("XPTY0004: Casting not supported from given type to xs:yearMonthDuration or any of its derived types.")}}};var Gd=[2,5,17,16];
function Ad(a,b){function c(d){return C(a,d)}if(39===b)return function(){return{v:!1,error:Error("FORG0001: Casting to xs:error is always invalid.")}};switch(b){case 19:return Ed(c);case 1:return Cd(c);case 6:return pd(c);case 3:return id(c);case 4:return gd(c);case 5:return xd(c);case 2:return zd(a);case 18:return od(c);case 16:return Fd(c);case 17:return fd(c);case 9:return ed(c);case 8:return Dd(c);case 7:return dd(c);case 11:return vd(c);case 12:return ud(c);case 13:return td(c);case 15:return qd(c);
case 14:return rd(c);case 0:return cd(c);case 21:return bd(c);case 22:return wd(c);case 20:return ad(c);case 23:throw Error("Casting to xs:QName is not implemented.");}return function(){return{v:!1,error:Error("XPTY0004: Casting not supported from "+a+" to "+b+".")}}}var Hd=Object.create(null);
function Id(a,b){if(19===a&&1===b)return function(f){return{v:!0,value:y(f,1)}};if(44===b)return function(){return{v:!1,error:Error("XPST0080: Casting to xs:NOTATION is not permitted.")}};if(39===b)return function(){return{v:!1,error:Error("FORG0001: Casting to xs:error is not permitted.")}};if(45===a||45===b)return function(){return{v:!1,error:Error("XPST0080: Casting from or to xs:anySimpleType is not permitted.")}};if(46===a||46===b)return function(){return{v:!1,error:Error("XPST0080: Casting from or to xs:anyAtomicType is not permitted.")}};
if(C(a,60)&&1===b)return function(){return{v:!1,error:Error("FOTY0014: Casting from function item to xs:string is not permitted.")}};if(a===b)return function(f){return{v:!0,value:{type:b,value:f}}};var c=Gd.includes(a)?a:Wc(a),d=Gd.includes(b)?b:Wc(b);if(null===d||null===c)return function(){return{v:!1,error:Error("XPST0081: Can not cast: type "+(d?tb[a]:tb[b])+" is unknown.")}};var e=[];1!==c&&19!==c||e.push(function(f){var g=Xc(f,b);return Yc(g,b)?{v:!0,value:g}:{v:!1,error:Nc(f,b,"pattern validation failed.")}});
c!==d&&(e.push(Ad(c,d)),e.push(function(f){return{v:!0,value:f.value}}));19!==d&&1!==d||e.push(function(f){return Yc(f,b)?{v:!0,value:f}:{v:!1,error:Nc(f,b,"pattern validation failed.")}});e.push(function(f){return $c(f,b)?{v:!0,value:f}:{v:!1,error:Nc(f,b,"pattern validation failed.")}});e.push(function(f){return{v:!0,value:{type:b,value:f}}});return function(f){f={v:!0,value:f};for(var g=0,k=e.length;g<k&&(f=e[g](f.value),!1!==f.v);++g);return f}}
function Jd(a,b){var c=a.type+1E4*b,d=Hd[c];d||(d=Hd[c]=Id(a.type,b));return d.call(void 0,a.value,b)};function Kd(a,b){a=Jd(a,b);if(!0===a.v)return a.value;throw a.error;};function Ld(a){var b=!1;return{next:function(){if(b)return z;b=!0;return B(a)}}};function Md(a,b){return a===b?!0:a&&b&&a.offset===b.offset&&a.parent===b.parent?Md(a.F,b.F):!1}function Nd(a,b){return a===b||a.node===b.node&&Md(a.F,b.F)?!0:!1};function Od(a,b,c){var d=Ub(a,b,null);a=Pb(a,d,null);d=0;for(var e=a.length;d<e;++d){var f=a[d];if(Nd(f,b))return-1;if(Nd(f,c))return 1}}function Pd(a,b){for(var c=[];b;b=Ub(a,b,null))c.unshift(b);return c}function Qd(a,b){for(var c=[];b;b=a.getParentNode(b,null))c.unshift(b);return c}
function Rd(a,b,c,d){if(c.F||d.F||Kb(c.node)||Kb(d.node)){if(Nd(c,d))return 0;c=Pd(b,c);d=Pd(b,d);var e=c[0],f=d[0];if(!Nd(e,f))return b=a.findIndex(function(q){return Nd(q,e)}),c=a.findIndex(function(q){return Nd(q,f)}),-1===b&&(b=a.push(e)),-1===c&&(c=a.push(f)),b-c;a=1;for(var g=Math.min(c.length,d.length);a<g&&Nd(c[a],d[a]);++a);return c[a]?d[a]?Od(b,c[a],d[a]):1:-1}c=c.node;d=d.node;if(c===d)return 0;c=Qd(b,c);d=Qd(b,d);if(c[0]!==d[0]){var k={node:c[0],F:null},l={node:d[0],F:null};b=a.findIndex(function(q){return Nd(q,
k)});c=a.findIndex(function(q){return Nd(q,l)});-1===b&&(b=a.push(k));-1===c&&(c=a.push(l));return b-c}g=1;for(a=Math.min(c.length,d.length);g<a&&c[g]===d[g];++g);a=c[g];c=d[g];if(!a)return-1;if(!c)return 1;b=b.getChildNodes(d[g-1],null);d=0;for(g=b.length;d<g;++d){var n=b[d];if(n===a)return-1;if(n===c)return 1}}
function Sd(a,b,c,d){var e=C(c.type,47),f=C(d.type,47);if(e&&!f){if(c=Ub(b,c.value),d=d.value,Nd(c,d))return 1}else if(f&&!e){if(c=c.value,d=Ub(b,d.value),Nd(c,d))return-1}else if(e&&f){if(Nd(Ub(b,d.value),Ub(b,c.value)))return c.value.node.localName>d.value.node.localName?1:-1;c=Ub(b,c.value);d=Ub(b,d.value)}else c=c.value,d=d.value;return Rd(a,b,c,d)}function Td(a,b,c){return Sd(a.s,a,b,c)}
function Ud(a,b){return Vd(b,function(c,d){return Sd(a.s,a,c,d)}).filter(function(c,d,e){return 0===d?!0:!Nd(c.value,e[d-1].value)})}function Wd(a,b){return a<b?-1:0}function Vd(a,b){b=void 0===b?Wd:b;if(1>=a.length)return a;var c=Math.floor(a.length/2),d=Vd(a.slice(0,c),b);a=Vd(a.slice(c),b);for(c=[];d.length&&a.length;)0>b(d[0],a[0])?c.push(d.shift()):c.push(a.shift());return c.concat(d.concat(a))};var Xd=xspattern;function Yd(a,b){if(C(a.type,2)){if(C(a.type,6))return 3===b?y(a.value,3):null;if(C(a.type,4)){if(6===b)return y(a.value,6);if(3===b)return y(a.value,3)}return null}return C(a.type,20)&&1===b?y(a.value,1):null};function Zd(a,b,c,d,e){if(C(a.type,b.type))return a;C(b.type,46)&&C(a.type,53)&&(a=Uc(a,c).first());if(C(a.type,b.type)||46===b.type)return a;if(C(a.type,19)){c=Kd(a,b.type);if(!c)throw Error("XPTY0004 Unable to convert "+(e?"return":"argument")+" of type "+tb[a.type]+" to type "+vb(b)+" while calling "+d);return c}c=Yd(a,b.type);if(!c)throw Error("XPTY0004 Unable to cast "+(e?"return":"argument")+" of type "+tb[a.type]+" to type "+vb(b)+" while calling "+d);return c}
function $d(a){switch(a){case 2:return"*";case 1:return"+";case 0:return"?";case 3:return""}}
function ae(a,b,c,d,e){return 0===a.g?b.$({default:function(){return b.map(function(f){return Zd(f,a,c,d,e)})},multiple:function(){throw Error("XPTY0004: Multiplicity of "+(e?"function return value":"function argument")+" of type "+tb[a.type]+$d(a.g)+" for "+d+' is incorrect. Expected "?", but got "+".');}}):1===a.g?b.$({empty:function(){throw Error("XPTY0004: Multiplicity of "+(e?"function return value":"function argument")+" of type "+tb[a.type]+$d(a.g)+" for "+d+' is incorrect. Expected "+", but got "empty-sequence()"');
},default:function(){return b.map(function(f){return Zd(f,a,c,d,e)})}}):2===a.g?b.map(function(f){return Zd(f,a,c,d,e)}):b.$({o:function(){return b.map(function(f){return Zd(f,a,c,d,e)})},default:function(){throw Error("XPTY0004: Multiplicity of "+(e?"function return value":"function argument")+" of type "+tb[a.type]+$d(a.g)+" for "+d+" is incorrect. Expected exactly one");}})};function be(a,b){return C(a,5)?y(b,5):C(a,6)?y(b,6):C(a,3)?y(b,3):y(b,4)}function ce(a){if(Math.floor(a)===a||isNaN(a))return 0;a=/\d+(?:\.(\d*))?(?:[Ee](-)?(\d+))*/.exec(a+"");var b=a[1]?a[1].length:0;if(a[3]){if(a[2])return b+parseInt(a[3],10);a=b-parseInt(a[3],10);return 0>a?0:a}return b}function de(a,b,c){return b&&0===a*c%1%.5?0===Math.floor(a*c)%2?Math.floor(a*c)/c:Math.ceil(a*c)/c:Math.round(a*c)/c}
function ee(a,b,c,d,e,f){var g=!1;return E.create({next:function(){if(g)return z;var k=e.first();if(!k)return g=!0,z;if((C(k.type,6)||C(k.type,3))&&(0===k.value||isNaN(k.value)||Infinity===k.value||-Infinity===k.value))return g=!0,B(k);var l;f?l=f.first().value:l=0;g=!0;if(ce(k.value)<l)return B(k);var n=[5,4,3,6].find(function(u){return C(k.type,u)}),q=Kd(k,4);l=de(q.value,a,Math.pow(10,l));switch(n){case 4:return B(y(l,4));case 3:return B(y(l,3));case 6:return B(y(l,6));case 5:return B(y(l,5))}}})}
function fe(a,b,c,d){return Vc(d,b).$({empty:function(){return E.o(y(NaN,3))},o:function(){var e=Jd(d.first(),3);return e.v?E.o(e.value):E.o(y(NaN,3))},multiple:function(){throw Error("fn:number may only be called with zero or one values");}})}function ge(a,b,c,d){if(d.G())return d;a=d.M();return E.o(a[Math.floor(Math.random()*a.length)])}
function he(){return E.o(new cc([{key:y("number",1),value:function(){return E.o(y(Math.random(),3))}},{key:y("next",1),value:function(){return E.o(new Bb({value:he,Pa:!0,localName:"",namespaceURI:"",l:[],arity:0,i:{type:61,g:3}}))}},{key:y("permute",1),value:function(){return E.o(new Bb({value:ge,Pa:!0,localName:"",namespaceURI:"",l:[{type:59,g:2}],arity:1,i:{type:59,g:2}}))}}]))}
var ie=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"abs",l:[{type:2,g:0}],i:{type:2,g:0},m:function(a,b,c,d){return d.map(function(e){return be(e.type,Math.abs(e.value))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ceiling",l:[{type:2,g:0}],i:{type:2,g:0},m:function(a,b,c,d){return d.map(function(e){return be(e.type,Math.ceil(e.value))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"floor",l:[{type:2,g:0}],i:{type:2,g:0},m:function(a,
b,c,d){return d.map(function(e){return be(e.type,Math.floor(e.value))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",l:[{type:2,g:0}],i:{type:2,g:0},m:ee.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",l:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},m:ee.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",l:[{type:2,g:0}],i:{type:2,g:0},m:ee.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",
localName:"round-half-to-even",l:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},m:ee.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",l:[{type:46,g:0}],i:{type:3,g:3},m:fe},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",l:[],i:{type:3,g:3},m:function(a,b,c){var d=a.N&&ae({type:46,g:0},E.o(a.N),b,"fn:number",!1);if(!d)throw Error("XPDY0002: fn:number needs an atomizable context item.");return fe(a,b,c,d)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",
localName:"random-number-generator",l:[],i:{type:61,g:3},m:he},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",l:[{type:46,g:0}],i:{type:61,g:3},m:function(){throw Error("Not implemented: Specifying a seed is not supported");}}];function je(){throw Error("FOCH0002: No collations are supported");}function ke(a,b,c,d){if(null===b.N)throw Error("XPDY0002: The function which was called depends on dynamic context, which is absent.");return a(b,c,d,E.o(b.N))}function le(a,b,c,d){return d.$({empty:function(){return E.o(y("",1))},default:function(){return d.map(function(e){if(C(e.type,53)){var f=Uc(e,b).first();return C(e.type,47)?Kd(f,1):f}return Kd(e,1)})}})}
function me(a,b,c,d,e){return $b([e],function(f){var g=t(f).next().value;return Vc(d,b).L(function(k){k=k.map(function(l){return Kd(l,1).value}).join(g.value);return E.o(y(k,1))})})}function ne(a,b,c,d){if(d.G())return E.o(y(0,5));a=d.first().value;return E.o(y(Array.from(a).length,5))}
function oe(a,b,c,d,e,f){var g=ee(!1,a,b,c,e,null),k=null!==f?ee(!1,a,b,c,f,null):null,l=!1,n=null,q=null,u=null;return E.create({next:function(){if(l)return z;if(!n&&(n=d.first(),null===n))return l=!0,B(y("",1));q||(q=g.first());!u&&f&&(u=null,u=k.first());l=!0;return B(y(Array.from(n.value).slice(Math.max(q.value-1,0),f?q.value+u.value-1:void 0).join(""),1))}})}
function pe(a,b,c,d,e){if(d.G()||0===d.first().value.length)return E.empty();a=d.first().value;e=e.first().value;e=qe(e);return E.create(a.split(e).map(function(f){return y(f,1)}))}function re(a,b,c,d){if(d.G())return E.o(y("",1));a=d.first().value.trim();return E.o(y(a.replace(/\s+/g," "),1))}var se=new Map,te=new Map;
function qe(a){if(te.has(a))return te.get(a);try{var b=new RegExp(a,"g")}catch(c){throw Error("FORX0002: "+c);}if(b.test(""))throw Error("FORX0003: the pattern "+a+" matches the zero length string");te.set(a,b);return b}
var ue=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",l:[{type:1,g:0},{type:1,g:0}],i:{type:5,g:0},m:function(a,b,c,d,e){if(d.G()||e.G())return E.empty();a=d.first().value;e=e.first().value;return a>e?E.o(y(1,5)):a<e?E.o(y(-1,5)):E.o(y(0,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",l:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:5,g:0},m:je},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"concat",l:[{type:46,g:0},
{type:46,g:0},4],i:{type:1,g:3},m:function(a,b,c,d){for(var e=[],f=3;f<arguments.length;++f)e[f-3]=arguments[f];e=e.map(function(g){return Vc(g,b).L(function(k){return E.o(y(k.map(function(l){return null===l?"":Kd(l,1).value}).join(""),1))})});return $b(e,function(g){return E.o(y(g.map(function(k){return k.value}).join(""),1))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",l:[{type:1,g:0},{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},m:je},{namespaceURI:"http://www.w3.org/2005/xpath-functions",
localName:"contains",l:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},m:function(a,b,c,d,e){a=d.G()?"":d.first().value;e=e.G()?"":e.first().value;return 0===e.length?E.ca():0===a.length?E.X():a.includes(e)?E.ca():E.X()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",l:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},m:function(a,b,c,d,e){a=e.G()?"":e.first().value;if(0===a.length)return E.ca();d=d.G()?"":d.first().value;return 0===d.length?E.X():d.endsWith(a)?E.ca():E.X()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",
localName:"ends-with",l:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},m:je},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",l:[{type:1,g:0}],i:{type:1,g:3},m:re},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",l:[],i:{type:1,g:3},m:ke.bind(null,function(a,b,c,d){return re(a,b,c,le(a,b,c,d))})},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",l:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},m:function(a,
b,c,d,e){a=e.G()?"":e.first().value;if(0===a.length)return E.ca();d=d.G()?"":d.first().value;return 0===d.length?E.X():d.startsWith(a)?E.ca():E.X()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",l:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},m:je},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",l:[{type:59,g:0}],i:{type:1,g:3},m:le},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",l:[],i:{type:1,g:3},m:ke.bind(null,
le)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-before",l:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},m:function(a,b,c,d,e){a=d.G()?"":d.first().value;e=e.G()?"":e.first().value;if(""===e)return E.o(y("",1));e=a.indexOf(e);return-1===e?E.o(y("",1)):E.o(y(a.substring(0,e),1))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-after",l:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},m:function(a,b,c,d,e){a=d.G()?"":d.first().value;e=e.G()?"":e.first().value;
if(""===e)return E.o(y(a,1));b=a.indexOf(e);return-1===b?E.o(y("",1)):E.o(y(a.substring(b+e.length),1))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",l:[{type:1,g:0},{type:3,g:3}],i:{type:1,g:3},m:oe},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",l:[{type:1,g:0},{type:3,g:3},{type:3,g:3}],i:{type:1,g:3},m:oe},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"upper-case",l:[{type:1,g:0}],i:{type:1,g:3},m:function(a,b,c,
d){return d.G()?E.o(y("",1)):d.map(function(e){return y(e.value.toUpperCase(),1)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"lower-case",l:[{type:1,g:0}],i:{type:1,g:3},m:function(a,b,c,d){return d.G()?E.o(y("",1)):d.map(function(e){return y(e.value.toLowerCase(),1)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",l:[{type:46,g:2},{type:1,g:3}],i:{type:1,g:3},m:me},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",
l:[{type:46,g:2}],i:{type:1,g:3},m:function(a,b,c,d){return me(a,b,c,d,E.o(y("",1)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",l:[{type:1,g:0}],i:{type:5,g:3},m:ne},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",l:[],i:{type:5,g:3},m:ke.bind(null,function(a,b,c,d){return ne(a,b,c,le(a,b,c,d))})},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",l:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],i:{type:1,
g:2},m:function(){throw Error("Not implemented: Using flags in tokenize is not supported");}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",l:[{type:1,g:0},{type:1,g:3}],i:{type:1,g:2},m:pe},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",l:[{type:1,g:0}],i:{type:1,g:2},m:function(a,b,c,d){return pe(a,b,c,re(a,b,c,d),E.o(y(" ",1)))}},{l:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],m:function(a,b,c,d,e,f){return $b([d,e,f],function(g){var k=t(g),
l=k.next().value;g=k.next().value;k=k.next().value;l=Array.from(l?l.value:"");var n=Array.from(g.value),q=Array.from(k.value);g=l.map(function(u){if(n.includes(u)){if(u=n.indexOf(u),u<=q.length)return q[u]}else return u});return E.o(y(g.join(""),1))})},localName:"translate",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:5,g:2}],m:function(a,b,c,d){return d.L(function(e){e=e.map(function(f){f=f.value;if(9===f||10===f||13===f||32<=f&&55295>=f||57344<=f&&65533>=f||65536<=
f&&1114111>=f)return String.fromCodePoint(f);throw Error("FOCH0001");}).join("");return E.o(y(e,1))})},localName:"codepoints-to-string",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:1,g:0}],m:function(a,b,c,d){return $b([d],function(e){e=(e=t(e).next().value)?e.value.split(""):[];return 0===e.length?E.empty():E.create(e.map(function(f){return y(f.codePointAt(0),5)}))})},localName:"string-to-codepoints",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,
g:2}},{l:[{type:1,g:0}],m:function(a,b,c,d){return $b([d],function(e){e=t(e).next().value;return null===e||0===e.value.length?E.create(y("",1)):E.create(y(encodeURIComponent(e.value).replace(/[!'()*]/g,function(f){return"%"+f.charCodeAt(0).toString(16).toUpperCase()}),1))})},localName:"encode-for-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:1,g:0}],m:function(a,b,c,d){return $b([d],function(e){e=t(e).next().value;return null===e||0===e.value.length?E.create(y("",
1)):E.create(y(e.value.replace(/([\u00A0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFEF "<>{}|\\^`/\n\u007f\u0080-\u009f]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,function(f){return encodeURI(f)}),1))})},localName:"iri-to-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:1,g:0},{type:1,g:0}],m:function(a,b,c,d,e){return $b([d,e],function(f){var g=t(f);f=g.next().value;g=g.next().value;if(null===f||null===g)return E.empty();f=f.value;g=g.value;if(f.length!==g.length)return E.X();f=f.split("");
g=g.split("");for(var k=0;k<f.length;k++)if(f[k].codePointAt(0)!==g[k].codePointAt(0))return E.X();return E.ca()})},localName:"codepoint-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:0}},{l:[{type:1,g:0},{type:1,g:3}],m:function(a,b,c,d,e){return $b([d,e],function(f){var g=t(f);f=g.next().value;g=g.next().value;f=f?f.value:"";g=g.value;var k=se.get(g);if(!k){try{k=Xd.compile(g,{language:"xpath"})}catch(l){throw Error("FORX0002: "+l);}se.set(g,k)}return k(f)?E.ca():E.X()})},
localName:"matches",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],m:function(a,b,c,d,e,f){return $b([d,e,f],function(g){var k=t(g);g=k.next().value;var l=k.next().value;k=k.next().value;g=g?g.value:"";l=l.value;k=k.value;if(k.includes("$0"))throw Error("Using $0 in fn:replace to replace substrings with full matches is not supported.");k=k.split(/((?:\$\$)|(?:\\\$)|(?:\\\\))/).map(function(n){switch(n){case "\\$":return"$$";case "\\\\":return"\\";
case "$$":throw Error('FORX0004: invalid replacement: "$$"');default:return n}}).join("");l=qe(l);g=g.replace(l,k);return E.o(y(g,1))})},localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:1,g:0},{type:1,g:3},{type:1,g:3},{type:1,g:3}],localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3},m:function(){throw Error("Not implemented: Using flags in replace is not supported");}}];function ve(a,b,c,d){if(null===b.N)throw Error("XPDY0002: The function which was called depends on dynamic context, which is absent.");return a(b,c,d,E.o(b.N))}function we(a,b,c,d){return $b([d],function(e){e=t(e).next().value;if(null===e)return E.empty();e=e.value;switch(e.node.nodeType){case 1:case 2:return E.o(y(new Ab(e.node.prefix,e.node.namespaceURI,e.node.localName),23));case 7:return E.o(y(new Ab("","",e.node.target),23));default:return E.empty()}})}
function xe(a,b,c,d){return d.$({default:function(){return le(a,b,c,we(a,b,c,d))},empty:function(){return E.empty()}})}function ye(a,b,c,d){return Vc(d,b)}function ze(a,b,c,d){return $b([d],function(e){e=(e=t(e).next().value)?e.value:null;return null!==e&&Rb(b.h,e,null)?E.ca():E.X()})}
function Ae(a,b,c,d){return $b([d],function(e){function f(n){for(var q=0,u=n;null!==u;)(n.node.nodeType!==u.node.nodeType?0:1===u.node.nodeType?u.node.localName===n.node.localName&&u.node.namespaceURI===n.node.namespaceURI:7===u.node.nodeType?u.node.target===n.node.target:1)&&q++,u=Vb(k,u,null);return q}var g=t(e).next().value;if(null===g)return E.empty();var k=b.h;e="";for(g=g.value;null!==Ub(b.h,g,null);g=Ub(b.h,g,null))switch(g.node.nodeType){case 1:var l=g;e="/Q{"+(l.node.namespaceURI||"")+"}"+
l.node.localName+"["+f(l)+"]"+e;break;case 2:l=g;e="/@"+(l.node.namespaceURI?"Q{"+l.node.namespaceURI+"}":"")+l.node.localName+e;break;case 3:e="/text()["+f(g)+"]"+e;break;case 7:l=g;e="/processing-instruction("+l.node.target+")["+f(l)+"]"+e;break;case 8:e="/comment()["+f(g)+"]"+e}return 9===g.node.nodeType?E.create(y(e||"/",1)):E.create(y("Q{http://www.w3.org/2005/xpath-functions}root()"+e,1))})}function Be(a,b,c,d){return d.map(function(e){return y(e.value.node.namespaceURI||"",20)})}
function Ce(a,b,c,d){return d.$({default:function(){return d.map(function(e){return 7===e.value.node.nodeType?y(e.value.node.target,1):y(e.value.node.localName||"",1)})},empty:function(){return E.o(y("",1))}})}function De(a,b,c){if(2===b.node.nodeType)return Nd(b,c);for(;c;){if(Nd(b,c))return!0;if(9===c.node.nodeType)break;c=Ub(a,c,null)}return!1}
function Ee(a,b,c,d){return d.map(function(e){if(!C(e.type,53))throw Error("XPTY0004 Argument passed to fn:root() should be of the type node()");for(e=e.value;e;){var f=e;e=Ub(b.h,f,null)}return Zb(f)})}
var Fe=[{l:[{type:53,g:0}],m:xe,localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{l:[],m:ve.bind(null,xe),localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:53,g:3}],m:Be,localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{l:[],m:ve.bind(null,Be),localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{l:[{type:53,g:2}],m:function(a,
b,c,d){return d.L(function(e){if(!e.length)return E.empty();e=Ud(b.h,e).reduceRight(function(f,g,k,l){if(k===l.length-1)return f.push(g),f;if(De(b.h,g.value,f[0].value))return f;f.unshift(g);return f},[]);return E.create(e)})},localName:"innermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{l:[{type:53,g:2}],m:function(a,b,c,d){return d.L(function(e){if(!e.length)return E.empty();e=Ud(b.h,e).reduce(function(f,g,k){if(0===k)return f.push(g),f;if(De(b.h,f[f.length-1].value,
g.value))return f;f.push(g);return f},[]);return E.create(e)},1)},localName:"outermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{l:[{type:53,g:0}],m:ze,localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[],m:ve.bind(null,ze),localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:53,g:0}],m:Ae,localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,
g:0}},{l:[],m:ve.bind(null,Ae),localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{l:[{type:53,g:0}],m:we,localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{l:[],m:ve.bind(null,we),localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{l:[{type:53,g:0}],m:Ce,localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[],m:ve.bind(null,Ce),localName:"local-name",
namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{l:[{type:53,g:0}],m:Ee,localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{l:[],m:ve.bind(null,Ee),localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{l:[],m:ve.bind(null,ye),localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{l:[{type:59,g:2}],m:ye,localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",
i:{type:46,g:2}}];function Ge(a,b){var c=0,d=a.length,e=!1,f=null;return{next:function(){if(!e){for(;c<d;){f||(f=b(a[c],c,a));var g=f.next(0);f=null;if(g.value)c++;else return B(!1)}e=!0;return B(!0)}return z}}}function He(a){a=a.node.nodeType;return 1===a||3===a}
function Ie(a,b){if((C(a.type,4)||C(a.type,6))&&(C(b.type,4)||C(b.type,6))){var c=Kd(a,6),d=Kd(b,6);return c.value===d.value||isNaN(a.value)&&isNaN(b.value)}return(C(a.type,4)||C(a.type,6)||C(a.type,3))&&(C(b.type,4)||C(b.type,6)||C(b.type,3))?(c=Kd(a,3),d=Kd(b,3),c.value===d.value||isNaN(a.value)&&isNaN(b.value)):C(a.type,23)&&C(b.type,23)?a.value.namespaceURI===b.value.namespaceURI&&a.value.localName===b.value.localName:(C(a.type,9)||C(a.type,7)||C(a.type,8)||C(a.type,11)||C(a.type,12)||C(a.type,
13)||C(a.type,14)||C(a.type,15))&&(C(b.type,9)||C(b.type,7)||C(b.type,8)||C(b.type,11)||C(b.type,12)||C(b.type,13)||C(b.type,14)||C(b.type,15))?vc(a.value,b.value):(C(a.type,16)||C(a.type,17)||C(a.type,18))&&(C(b.type,16)||C(b.type,17)||C(b.type,17))?ec(a.value,b.value):a.value===b.value}function Je(a,b,c){c=t([b,c].map(function(d){return{type:1,value:d.reduce(function(e,f){return e+=Uc(f,a).first().value},"")}}));b=c.next().value;c=c.next().value;return B(Ie(b,c))}
function Ke(a,b,c,d){for(;a.value&&C(a.value.type,56);){b.push(a.value);var e=Tb(d,a.value.value);a=c.next(0);if(e&&3!==e.node.nodeType)break}return a}
function Le(a,b,c,d,e){var f=b.h,g=d.value,k=e.value,l=null,n=null,q=null,u,v=[],A=[];return{next:function(){for(;!u;)if(l||(l=g.next(0)),l=Ke(l,v,g,f),n||(n=k.next(0)),n=Ke(n,A,k,f),v.length||A.length){var G=Je(b,v,A);v.length=0;A.length=0;if(!1===G.value)return u=!0,G}else{if(l.done||n.done)return u=!0,B(l.done===n.done);q||(q=Me(a,b,c,l.value,n.value));G=q.next(0);q=null;if(!1===G.value)return u=!0,G;n=l=null}return z}}}
function Ne(a,b,c,d,e){return d.h.length!==e.h.length?Ld(!1):Ge(d.h,function(f){var g=e.h.find(function(k){return Ie(k.key,f.key)});return g?Le(a,b,c,f.value(),g.value()):Ld(!1)})}function Oe(a,b,c,d,e){return d.R.length!==e.R.length?Ld(!1):Ge(d.R,function(f,g){g=e.R[g];return Le(a,b,c,f(),g())})}
function Qe(a,b,c,d,e){d=Pb(b.h,d.value);e=Pb(b.h,e.value);d=d.filter(function(f){return He(f)});e=e.filter(function(f){return He(f)});d=E.create(d.map(function(f){return Zb(f)}));e=E.create(e.map(function(f){return Zb(f)}));return Le(a,b,c,d,e)}
function Re(a,b,c,d,e){var f=Le(a,b,c,we(a,b,c,E.o(d)),we(a,b,c,E.o(e))),g=Qe(a,b,c,d,e);d=Nb(b.h,d.value).filter(function(n){return"http://www.w3.org/2000/xmlns/"!==n.node.namespaceURI}).sort(function(n,q){return n.node.nodeName>q.node.nodeName?1:-1}).map(function(n){return Zb(n)});e=Nb(b.h,e.value).filter(function(n){return"http://www.w3.org/2000/xmlns/"!==n.node.namespaceURI}).sort(function(n,q){return n.node.nodeName>q.node.nodeName?1:-1}).map(function(n){return Zb(n)});var k=Le(a,b,c,E.create(d),
E.create(e)),l=!1;return{next:function(){if(l)return z;var n=f.next(0);if(!n.done&&!1===n.value)return l=!0,n;n=k.next(0);if(!n.done&&!1===n.value)return l=!0,n;n=g.next(0);l=!0;return n}}}function Se(a,b,c,d,e){var f=Le(a,b,c,we(a,b,c,E.o(d)),we(a,b,c,E.o(e))),g=!1;return{next:function(){if(g)return z;var k=f.next(0);return k.done||!1!==k.value?B(Ie(Uc(d,b).first(),Uc(e,b).first())):(g=!0,k)}}}
function Me(a,b,c,d,e){if(C(d.type,46)&&C(e.type,46))return Ld(Ie(d,e));if(C(d.type,61)&&C(e.type,61))return Ne(a,b,c,d,e);if(C(d.type,62)&&C(e.type,62))return Oe(a,b,c,d,e);if(C(d.type,53)&&C(e.type,53)){if(C(d.type,55)&&C(e.type,55))return Qe(a,b,c,d,e);if(C(d.type,54)&&C(e.type,54))return Re(a,b,c,d,e);if(C(d.type,47)&&C(e.type,47)||C(d.type,57)&&C(e.type,57)||C(d.type,58)&&C(e.type,58))return Se(a,b,c,d,e)}return Ld(!1)};function Te(a){return Error("XUST0001: "+(void 0===a?"Can not execute an updating expression in a non-updating context.":a))}function Ue(a){return Error("XUTY0004: The attribute "+a.name+'="'+a.value+'" follows a node that is not an attribute node.')}function Ve(){return Error("XUTY0005: The target of a insert expression with into must be a single element or document node.")}
function We(){return Error("XUTY0006: The target of a insert expression with before or after must be a single element, text, comment, or processing instruction node.")}function Xe(){return Error("XUTY0008: The target of a replace expression must be a single element, attribute, text, comment, or processing instruction node.")}function Ye(){return Error("XUTY0012: The target of a rename expression must be a single element, attribute, or processing instruction node.")}
function Ze(a){return Error("XUDY0017: The target "+a.outerHTML+" is used in more than one replace value of expression.")}function $e(a){return Error("XUDY0021: Applying the updates will result in the XDM instance violating constraint: '"+a+"'")}function af(a){return Error("XUDY0023: The namespace binding "+a+" is conflicting.")}function bf(a){return Error("XUDY0024: The namespace binding "+a+" is conflicting.")}
function cf(){return Error("XUDY0027: The target for an insert, replace, or rename expression expression should not be empty.")};function I(a,b,c,d,e){c=void 0===c?{C:!1,Y:!1,S:"unsorted",subtree:!1}:c;this.s=a;this.O=c.S||"unsorted";this.subtree=!!c.subtree;this.Y=!!c.Y;this.C=!!c.C;this.ha=b;this.I=!1;this.Ya=null;this.bc=void 0===d?!1:d;this.type=e}function J(a,b,c){b&&null!==b.N?a.C?(null===a.Ya&&(a.Ya=rb(a.h(null,c).ob())),a=a.Ya()):a=a.h(b,c):a=a.h(b,c);return a}I.prototype.A=function(){return null};
I.prototype.P=function(a){this.ha.forEach(function(b){return b.P(a)});if(!this.bc&&this.ha.some(function(b){return b.I}))throw Te();};function df(a,b){this.H=a;this.fa=b};function ef(a){a&&"object"===typeof a&&"nodeType"in a&&(a=a.ownerDocument||a,"function"===typeof a.createElementNS&&"function"===typeof a.createProcessingInstruction&&"function"===typeof a.createTextNode&&"function"===typeof a.createComment&&(this.h=a));this.h||(this.h=null)}h=ef.prototype;h.createAttributeNS=function(a,b){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createAttributeNS(a,b)};
h.createCDATASection=function(a){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createCDATASection(a)};h.createComment=function(a){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createComment(a)};h.createDocument=function(){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.implementation.createDocument(null,null,null)};
h.createElementNS=function(a,b){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createElementNS(a,b)};h.createProcessingInstruction=function(a,b){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createProcessingInstruction(a,b)};h.createTextNode=function(a){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createTextNode(a)};function ff(a,b,c,d){var e=Ub(c,a).node,f=(a=Tb(c,a))?a.node:null;b.forEach(function(g){d.insertBefore(e,g.node,f)})}function gf(a,b,c,d){var e=Ub(c,a).node;b.forEach(function(f){d.insertBefore(e,f.node,a.node)})}function hf(a,b,c,d){var e=(c=Rb(c,a))?c.node:null;b.forEach(function(f){d.insertBefore(a.node,f.node,e)})}function jf(a,b,c){b.forEach(function(d){c.insertBefore(a.node,d.node,null)})}
function kf(a,b,c,d){b.forEach(function(e){var f=e.node.nodeName;if(Ob(c,a,f))throw $e("An attribute "+f+" already exists.");d.setAttributeNS(a.node,e.node.namespaceURI,f,Qb(c,e))})}
function lf(a,b,c,d,e){d||(d=new ef(a?a.node:null));switch(a.node.nodeType){case 1:var f=c.getAllAttributes(a.node),g=c.getChildNodes(a.node),k=d.createElementNS(b.namespaceURI,b.va());var l={node:k,F:null};f.forEach(function(n){e.setAttributeNS(k,n.namespaceURI,n.nodeName,n.value)});g.forEach(function(n){e.insertBefore(k,n,null)});break;case 2:b=d.createAttributeNS(b.namespaceURI,b.va());b.value=Qb(c,a);l={node:b,F:null};break;case 7:l={node:d.createProcessingInstruction(b.va(),Qb(c,a)),F:null}}if(!Ub(c,
a))throw Error("Not supported: renaming detached nodes.");mf(a,[l],c,e)}function nf(a,b,c,d){c.getChildNodes(a.node).forEach(function(e){return d.removeChild(a.node,e)});b&&d.insertBefore(a.node,b.node,null)}
function mf(a,b,c,d){var e=Ub(c,a),f=a.node.nodeType;if(2===f){if(b.some(function(l){return 2!==l.node.nodeType}))throw Error('Constraint "If $target is an attribute node, $replacement must consist of zero or more attribute nodes." failed.');var g=e?e.node:null;d.removeAttributeNS(g,a.node.namespaceURI,a.node.nodeName);b.forEach(function(l){var n=l.node.nodeName;if(Ob(c,e,n))throw $e("An attribute "+n+" already exists.");d.setAttributeNS(g,l.node.namespaceURI,n,Qb(c,l))})}if(1===f||3===f||8===f||
7===f){var k=(f=Tb(c,a))?f.node:null;d.removeChild(e.node,a.node);b.forEach(function(l){d.insertBefore(e.node,l.node,k)})}};function of(a,b,c,d){pf(a,b);a.filter(function(e){return-1!==["insertInto","insertAttributes","replaceValue","rename"].indexOf(e.type)}).forEach(function(e){switch(e.type){case "insertInto":jf(e.target,e.content,d);break;case "insertAttributes":kf(e.target,e.content,b,d);break;case "rename":lf(e.target,e.s,b,c,d);break;case "replaceValue":var f=e.target;e=e.s;if(2===f.node.nodeType){var g=Ub(b,f);g?d.setAttributeNS(g.node,f.node.namespaceURI,f.node.nodeName,e):f.node.value=e}else d.setData(f.node,
e)}});a.filter(function(e){return-1!==["insertBefore","insertAfter","insertIntoAsFirst","insertIntoAsLast"].indexOf(e.type)}).forEach(function(e){switch(e.type){case "insertAfter":ff(e.target,e.content,b,d);break;case "insertBefore":gf(e.target,e.content,b,d);break;case "insertIntoAsFirst":hf(e.target,e.content,b,d);break;case "insertIntoAsLast":jf(e.target,e.content,d)}});a.filter(function(e){return"replaceNode"===e.type}).forEach(function(e){mf(e.target,e.s,b,d)});a.filter(function(e){return"replaceElementContent"===
e.type}).forEach(function(e){nf(e.target,e.text,b,d)});a.filter(function(e){return"delete"===e.type}).forEach(function(e){e=e.target;var f=Ub(b,e);(f=f?f.node:null)&&(2===e.node.nodeType?d.removeAttributeNS(f,e.node.namespaceURI,e.node.nodeName):d.removeChild(f,e.node))});if(a.some(function(e){return"put"===e.type}))throw Error('Not implemented: the execution for pendingUpdate "put" is not yet implemented.');}
function pf(a,b){function c(f){return new Ab(f.node.prefix,f.node.namespaceURI,f.node.localName)}function d(f,g){var k=new Set;a.filter(function(l){return l.type===f}).map(function(l){return l.target}).forEach(function(l){l=l?l.node:null;k.has(l)&&g(l);k.add(l)})}d("rename",function(f){throw Error("XUDY0015: The target "+f.outerHTML+" is used in more than one rename expression.");});d("replaceNode",function(f){throw Error("XUDY0016: The target "+f.outerHTML+" is used in more than one replace expression.");
});d("replaceValue",function(f){throw Ze(f);});d("replaceElementContent",function(f){throw Ze(f);});var e=new Map;a.filter(function(f){return"replaceNode"===f.type&&2===f.target.node.nodeType}).forEach(function(f){var g=Ub(b,f.target);g=g?g.node:null;var k=e.get(g);k?k.push.apply(k,w(f.s.map(c))):e.set(g,f.s.map(c))});a.filter(function(f){return"rename"===f.type&&2===f.target.node.nodeType}).forEach(function(f){var g=Ub(b,f.target);if(g){g=g.node;var k=e.get(g);k?k.push(f.s):e.set(g,[f.s])}});e.forEach(function(f){var g=
{};f.forEach(function(k){g[k.prefix]||(g[k.prefix]=k.namespaceURI);if(g[k.prefix]!==k.namespaceURI)throw bf(k.namespaceURI);})})}function qf(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return a.concat.apply(a,w(c.filter(Boolean)))};function rf(a,b,c,d){I.call(this,a,b,c,!0,d);this.I=!0}x(rf,I);rf.prototype.h=function(){throw Te();};function sf(a){return a.I?function(b,c){return a.u(b,c)}:function(b,c){var d=a.h(b,c);return{next:function(){var e=d.M();return B({fa:[],H:e})}}}};function tf(a,b){a=a.next(0);b(a.value.fa);return E.create(a.value.H)}function uf(a,b,c,d){rf.call(this,a,b,c,d);this.I=this.ha.some(function(e){return e.I})}x(uf,rf);uf.prototype.h=function(a,b){return this.B(a,b,this.ha.map(function(c){return function(d){return c.h(d,b)}}))};
uf.prototype.u=function(a,b){var c=[],d=this.B(a,b,this.ha.map(function(f){return f.I?function(g){g=f.u(g,b);return tf(g,function(k){return c=qf(c,k)})}:function(g){return f.h(g,b)}})),e=!1;return{next:function(){if(e)return z;var f=d.M();e=!0;return B(new df(f,c))}}};uf.prototype.P=function(a){rf.prototype.P.call(this,a);vf(this)};function vf(a){a.ha.some(function(b){return b.I})&&(a.I=!0)};var wf=["external","attribute","nodeName","nodeType","universal"],xf=wf.length;function yf(a){this.h=wf.map(function(b){return a[b]||0});if(Object.keys(a).some(function(b){return!wf.includes(b)}))throw Error("Invalid specificity kind passed");}yf.prototype.add=function(a){var b=this,c=wf.reduce(function(d,e,f){d[e]=b.h[f]+a.h[f];return d},Object.create(null));return new yf(c)};function zf(a,b){for(var c=0;c<xf;++c){if(b.h[c]<a.h[c])return 1;if(b.h[c]>a.h[c])return-1}return 0};function Af(){return Oc("Expected base expression of a function call to evaluate to a sequence of single function item")}function Bf(a,b,c,d){for(var e=[],f=0;f<b.length;++f)if(null===b[f])e.push(null);else{var g=ae(a[f],b[f],c,d,!1);e.push(g)}return e}function Cf(a,b){if(!C(a.type,60))throw Oc("Expected base expression to evaluate to a function item");if(a.A!==b)throw Af();return a}
function Df(a,b,c,d,e,f,g){var k=0;e=e.map(function(l){return l?null:f[k++](c)});e=Bf(a.s,e,d,a.j);if(0<=e.indexOf(null))return Cb(a,e);b=b.apply(void 0,[c,d,g].concat(w(e)));return ae(a.O,b,d,a.j,!0)}function Ef(a,b,c){var d={};uf.call(this,new yf((d.external=1,d)),[a].concat(b.filter(function(e){return!!e})),{S:"unsorted",Y:!1,subtree:!1,C:!1},c);this.ka=b.length;this.T=b.map(function(e){return null===e});this.J=null;this.na=a;this.ua=b}x(Ef,uf);
Ef.prototype.u=function(a,b){var c=this;if(!this.j||!this.j.I)return uf.prototype.u.call(this,a,b);var d=[],e=Df(this.j,function(g,k,l,n){for(var q=[],u=3;u<arguments.length;++u)q[u-3]=arguments[u];return tf(c.j.value.apply(c.j,[g,k,l].concat(w(q))),function(v){d=qf(d,v)})},a,b,this.T,this.ua.map(function(g){return function(){return g.I?tf(g.u(a,b),function(k){d=qf(d,k)}):J(g,a,b)}}),this.J),f=!1;return{next:function(){if(f)return z;var g=e.M();f=!0;return B({fa:d,H:g})}}};
Ef.prototype.B=function(a,b,c){var d=this;c=t(c);var e=c.next().value,f=ka(c);if(this.j)return Df(this.j,function(k,l,n,q){for(var u=[],v=3;v<arguments.length;++v)u[v-3]=arguments[v];return d.j.value.apply(d.j,[k,l,n].concat(w(u)))},a,b,this.T,f,this.J);var g=e(a);return g.$({default:function(){throw Af();},o:function(){return g.L(function(k){k=t(k).next().value;k=Cf(k,d.ka);if(k.I)throw Error("XUDY0038: The function returned by the PrimaryExpr of a dynamic function invocation can not be an updating function");
return Df(k,k.value,a,b,d.T,f,d.J)})}})};Ef.prototype.P=function(a){this.J=Ff(a);uf.prototype.P.call(this,a);if(this.na.C){a=J(this.na,null,null);if(!a.ya())throw Af();this.j=Cf(a.first(),this.ka);this.j.I&&(this.I=!0)}};function Gf(a,b,c,d,e,f){return $b([d,e,f],function(g){var k=t(g);g=k.next().value;var l=k.next().value;k=k.next().value;l=l.value;k=k.value;if(l>g.R.length||0>=l)throw Error("FOAY0001: subarray start out of bounds.");if(0>k)throw Error("FOAY0002: subarray length out of bounds.");if(l+k>g.R.length+1)throw Error("FOAY0001: subarray start + length out of bounds.");return E.o(new Xb(g.R.slice(l-1,k+l-1)))})}
function Hf(a,b,c,d,e){return $b([d],function(f){var g=t(f).next().value;return e.L(function(k){k=k.map(function(v){return v.value}).sort(function(v,A){return A-v}).filter(function(v,A,G){return G[A-1]!==v});for(var l=g.R.concat(),n=0,q=k.length;n<q;++n){var u=k[n];if(u>g.R.length||0>=u)throw Error("FOAY0001: subarray position out of bounds.");l.splice(u-1,1)}return E.o(new Xb(l))})})}function If(a){return C(a,1)||C(a,20)||C(a,19)}
function Jf(a,b,c,d,e){return 0===d.length?0!==e.length:0!==e.length&&Me(a,b,c,d[0],e[0]).next(0).value?Jf(a,b,c,d.slice(1),e.slice(1)):d[0].value!==d[0].value?!0:If(d[0].type)&&0!==e.length&&If(e[0].type)?d[0].value<e[0].value:0===e.length?!1:d[0].value<e[0].value}function Kf(a,b,c,d){d.sort(function(e,f){return Le(a,b,c,E.create(e),E.create(f)).next(0).value?0:Jf(a,b,c,e,f)?-1:1});return E.o(new Xb(d.map(function(e){return function(){return E.create(e)}})))}
function Lf(a,b){return C(b.type,62)?b.R.reduce(function(c,d){return d().L(function(e){return e.reduce(Lf,c)})},a):Mc([a,E.o(b)])}
var Mf=[{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"size",l:[{type:62,g:3}],i:{type:5,g:3},m:function(a,b,c,d){return $b([d],function(e){e=t(e).next().value;return E.o(y(e.R.length,5))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"get",l:[{type:62,g:3},{type:5,g:3}],i:{type:59,g:2},m:Wb},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"put",l:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},m:function(a,b,c,
d,e,f){return $b([e,d],function(g){var k=t(g);g=k.next().value;k=k.next().value;g=g.value;if(0>=g||g>k.R.length)throw Error("FOAY0001: array position out of bounds.");k=k.R.concat();k.splice(g-1,1,rb(f));return E.o(new Xb(k))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"append",l:[{type:62,g:3},{type:59,g:2}],i:{type:62,g:3},m:function(a,b,c,d,e){return $b([d],function(f){f=t(f).next().value.R.concat([rb(e)]);return E.o(new Xb(f))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",
localName:"subarray",l:[{type:62,g:3},{type:5,g:3},{type:5,g:3}],i:{type:62,g:3},m:Gf},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",l:[{type:62,g:3},{type:5,g:3}],i:{type:62,g:3},m:function(a,b,c,d,e){var f=E.o(y(d.first().value.length-e.first().value+1,5));return Gf(a,b,c,d,e,f)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"remove",l:[{type:62,g:3},{type:5,g:2}],i:{type:62,g:3},m:Hf},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",
localName:"insert-before",l:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},m:function(a,b,c,d,e,f){return $b([d,e],function(g){var k=t(g);g=k.next().value;k=k.next().value.value;if(k>g.R.length+1||0>=k)throw Error("FOAY0001: subarray position out of bounds.");g=g.R.concat();g.splice(k-1,0,rb(f));return E.o(new Xb(g))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"head",l:[{type:62,g:3}],i:{type:59,g:2},m:function(a,b,c,d){return Wb(a,b,c,d,E.o(y(1,5)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",
localName:"tail",l:[{type:62,g:3}],i:{type:59,g:2},m:function(a,b,c,d){return Hf(a,b,c,d,E.o(y(1,5)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"reverse",l:[{type:62,g:3}],i:{type:62,g:3},m:function(a,b,c,d){return $b([d],function(e){e=t(e).next().value;return E.o(new Xb(e.R.concat().reverse()))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"join",l:[{type:62,g:2}],i:{type:62,g:3},m:function(a,b,c,d){return d.L(function(e){e=e.reduce(function(f,
g){return f.concat(g.R)},[]);return E.o(new Xb(e))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each",l:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},m:function(a,b,c,d,e){return $b([d,e],function(f){f=t(f);var g=f.next().value,k=f.next().value;if(1!==k.A)throw Oc("The callback passed into array:for-each has a wrong arity.");f=g.R.map(function(l){return rb(k.value.call(void 0,a,b,c,Bf(k.s,[l()],b,"array:for-each")[0]))});return E.o(new Xb(f))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",
localName:"filter",l:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},m:function(a,b,c,d,e){return $b([d,e],function(f){f=t(f);var g=f.next().value,k=f.next().value;if(1!==k.A)throw Oc("The callback passed into array:filter has a wrong arity.");var l=g.R.map(function(u){u=Bf(k.s,[u()],b,"array:filter")[0];var v=k.value;return v(a,b,c,u)}),n=[],q=!1;return E.create({next:function(){if(q)return z;for(var u=0,v=g.R.length;u<v;++u){var A=l[u].getEffectiveBooleanValue();n[u]=A}u=g.R.filter(function(G,H){return n[H]});
q=!0;return B(new Xb(u))}})})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-left",l:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},m:function(a,b,c,d,e,f){return $b([d,f],function(g){g=t(g);var k=g.next().value,l=g.next().value;if(2!==l.A)throw Oc("The callback passed into array:fold-left has a wrong arity.");return k.R.reduce(function(n,q){q=Bf(l.s,[q()],b,"array:fold-left")[0];return l.value.call(void 0,a,b,c,n,q)},e)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",
localName:"fold-right",l:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},m:function(a,b,c,d,e,f){return $b([d,f],function(g){g=t(g);var k=g.next().value,l=g.next().value;if(2!==l.A)throw Oc("The callback passed into array:fold-right has a wrong arity.");return k.R.reduceRight(function(n,q){q=Bf(l.s,[q()],b,"array:fold-right")[0];return l.value.call(void 0,a,b,c,n,q)},e)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each-pair",l:[{type:62,g:3},{type:62,
g:3},{type:60,g:3}],i:{type:62,g:3},m:function(a,b,c,d,e,f){return $b([d,e,f],function(g){var k=t(g);g=k.next().value;var l=k.next().value;k=k.next().value;if(2!==k.A)throw Oc("The callback passed into array:for-each-pair has a wrong arity.");for(var n=[],q=0,u=Math.min(g.R.length,l.R.length);q<u;++q){var v=t(Bf(k.s,[g.R[q](),l.R[q]()],b,"array:for-each-pair")),A=v.next().value;v=v.next().value;n[q]=rb(k.value.call(void 0,a,b,c,A,v))}return E.o(new Xb(n))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",
localName:"sort",l:[{type:62,g:3}],i:{type:62,g:3},m:function(a,b,c,d){return $b([d],function(e){e=t(e).next().value.R.map(function(f){return f().M()});return Kf(a,b,c,e)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"flatten",l:[{type:59,g:2}],i:{type:59,g:2},m:function(a,b,c,d){return d.L(function(e){return e.reduce(Lf,E.empty())})}}];function K(a,b,c,d,e){return e.G()?e:E.o(Kd(e.first(),a))}
var Nf=[{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"untypedAtomic",l:[{type:46,g:0}],i:{type:19,g:0},m:K.bind(null,19)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"error",l:[{type:46,g:0}],i:{type:39,g:0},m:K.bind(null,39)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"string",l:[{type:46,g:0}],i:{type:1,g:0},m:K.bind(null,1)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"boolean",l:[{type:46,g:0}],i:{type:0,g:0},m:K.bind(null,0)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",
localName:"decimal",l:[{type:46,g:0}],i:{type:4,g:0},m:K.bind(null,4)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"float",l:[{type:46,g:0}],i:{type:6,g:0},m:K.bind(null,6)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"double",l:[{type:46,g:0}],i:{type:3,g:0},m:K.bind(null,3)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"duration",l:[{type:46,g:0}],i:{type:18,g:0},m:K.bind(null,18)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTime",
l:[{type:46,g:0}],i:{type:9,g:0},m:K.bind(null,9)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",l:[{type:46,g:0}],i:{type:10,g:0},m:K.bind(null,10)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"time",l:[{type:46,g:0}],i:{type:8,g:0},m:K.bind(null,8)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"date",l:[{type:46,g:0}],i:{type:7,g:0},m:K.bind(null,7)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYearMonth",l:[{type:46,g:0}],
i:{type:11,g:0},m:K.bind(null,11)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYear",l:[{type:46,g:0}],i:{type:12,g:0},m:K.bind(null,12)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonthDay",l:[{type:46,g:0}],i:{type:13,g:0},m:K.bind(null,13)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gDay",l:[{type:46,g:0}],i:{type:15,g:0},m:K.bind(null,15)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonth",l:[{type:46,g:0}],i:{type:14,g:0},m:K.bind(null,
14)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"hexBinary",l:[{type:46,g:0}],i:{type:22,g:0},m:K.bind(null,22)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"base64Binary",l:[{type:46,g:0}],i:{type:21,g:0},m:K.bind(null,21)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"QName",l:[{type:46,g:0}],i:{type:23,g:0},m:function(a,b,c,d){if(d.G())return d;a=d.first();if(C(a.type,2))throw Error("XPTY0004: The provided QName is not a string-like value.");a=Kd(a,
1).value;a=Xc(a,23);if(!Yc(a,23))throw Error("FORG0001: The provided QName is invalid.");if(!a.includes(":"))return c=c.ba(""),E.o(y(new Ab("",c,a),23));d=t(a.split(":"));b=d.next().value;d=d.next().value;c=c.ba(b);if(!c)throw Error("FONS0004: The value "+a+" can not be cast to a QName. Did you mean to use fn:QName?");return E.o(y(new Ab(b,c,d),23))}},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"anyURI",l:[{type:46,g:0}],i:{type:20,g:0},m:K.bind(null,20)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",
localName:"normalizedString",l:[{type:46,g:0}],i:{type:48,g:0},m:K.bind(null,48)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"token",l:[{type:46,g:0}],i:{type:52,g:0},m:K.bind(null,52)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"language",l:[{type:46,g:0}],i:{type:51,g:0},m:K.bind(null,51)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKEN",l:[{type:46,g:0}],i:{type:50,g:0},m:K.bind(null,50)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKENS",
l:[{type:46,g:0}],i:{type:49,g:2},m:K.bind(null,49)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"Name",l:[{type:46,g:0}],i:{type:25,g:0},m:K.bind(null,25)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NCName",l:[{type:46,g:0}],i:{type:24,g:0},m:K.bind(null,24)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ID",l:[{type:46,g:0}],i:{type:42,g:0},m:K.bind(null,42)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREF",l:[{type:46,g:0}],i:{type:41,
g:0},m:K.bind(null,41)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREFS",l:[{type:46,g:0}],i:{type:43,g:2},m:K.bind(null,43)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITY",l:[{type:46,g:0}],i:{type:26,g:0},m:K.bind(null,26)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITIES",l:[{type:46,g:0}],i:{type:40,g:2},m:K.bind(null,40)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"integer",l:[{type:46,g:0}],i:{type:5,g:0},m:K.bind(null,
5)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonPositiveInteger",l:[{type:46,g:0}],i:{type:27,g:0},m:K.bind(null,27)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"negativeInteger",l:[{type:46,g:0}],i:{type:28,g:0},m:K.bind(null,28)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"long",l:[{type:46,g:0}],i:{type:31,g:0},m:K.bind(null,31)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"int",l:[{type:46,g:0}],i:{type:32,g:0},m:K.bind(null,32)},
{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"short",l:[{type:46,g:0}],i:{type:33,g:0},m:K.bind(null,33)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"byte",l:[{type:46,g:0}],i:{type:34,g:0},m:K.bind(null,34)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonNegativeInteger",l:[{type:46,g:0}],i:{type:30,g:0},m:K.bind(null,30)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedLong",l:[{type:46,g:0}],i:{type:36,g:0},m:K.bind(null,36)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",
localName:"unsignedInt",l:[{type:46,g:0}],i:{type:35,g:0},m:K.bind(null,35)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedShort",l:[{type:46,g:0}],i:{type:38,g:0},m:K.bind(null,38)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedByte",l:[{type:46,g:0}],i:{type:37,g:0},m:K.bind(null,37)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"positiveInteger",l:[{type:46,g:0}],i:{type:29,g:0},m:K.bind(null,29)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",
localName:"yearMonthDuration",l:[{type:46,g:0}],i:{type:16,g:0},m:K.bind(null,16)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dayTimeDuration",l:[{type:46,g:0}],i:{type:17,g:0},m:K.bind(null,17)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",l:[{type:46,g:0}],i:{type:10,g:0},m:K.bind(null,10)}];function Of(a,b,c,d){return d.G()?d:E.o(y(d.first().value.getYear(),5))}function Pf(a,b,c,d){return d.G()?d:E.o(y(d.first().value.getMonth(),5))}function Qf(a,b,c,d){return d.G()?d:E.o(y(d.first().value.getDay(),5))}function Rf(a,b,c,d){return d.G()?d:E.o(y(d.first().value.getHours(),5))}function Sf(a,b,c,d){return d.G()?d:E.o(y(d.first().value.getMinutes(),5))}function Tf(a,b,c,d){d.G()||(a=E,b=a.o,d=d.first().value,d=b.call(a,y(d.j+d.pa,4)));return d}
function Uf(a,b,c,d){return d.G()?d:(a=d.first().value.Z)?E.o(y(a,17)):E.empty()}
var Vf=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"dateTime",l:[{type:7,g:0},{type:8,g:0}],i:{type:9,g:0},m:function(a,b,c,d,e){if(d.G())return d;if(e.G())return e;a=d.first().value;e=e.first().value;b=a.Z;c=e.Z;if(b||c){if(!b||c)if(!b&&c)b=c;else if(!ec(b,c))throw Error("FORG0008: fn:dateTime: got a date and time value with different timezones.");}else b=null;return E.o(y(new qc(a.getYear(),a.getMonth(),a.getDay(),e.getHours(),e.getMinutes(),e.getSeconds(),e.pa,b),9))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",
localName:"year-from-dateTime",l:[{type:9,g:0}],i:{type:5,g:0},m:Of},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-dateTime",l:[{type:9,g:0}],i:{type:5,g:0},m:Pf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-dateTime",l:[{type:9,g:0}],i:{type:5,g:0},m:Qf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-dateTime",l:[{type:9,g:0}],i:{type:5,g:0},m:Rf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-dateTime",
l:[{type:9,g:0}],i:{type:5,g:0},m:Sf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-dateTime",l:[{type:9,g:0}],i:{type:4,g:0},m:Tf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-dateTime",l:[{type:9,g:0}],i:{type:17,g:0},m:Uf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-date",l:[{type:7,g:0}],i:{type:5,g:0},m:Of},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-date",l:[{type:7,
g:0}],i:{type:5,g:0},m:Pf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-date",l:[{type:7,g:0}],i:{type:5,g:0},m:Qf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-date",l:[{type:7,g:0}],i:{type:17,g:0},m:Uf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-time",l:[{type:8,g:0}],i:{type:5,g:0},m:Rf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-time",l:[{type:8,g:0}],i:{type:5,
g:0},m:Sf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-time",l:[{type:8,g:0}],i:{type:4,g:0},m:Tf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-time",l:[{type:8,g:0}],i:{type:17,g:0},m:Uf}];function Wf(a,b,c,d,e){return d.L(function(f){for(var g=Vc(E.create(f),b).map(function(n){return Kd(n,1)}).M(),k="",l=0;l<g.length;l++)k+="{type: "+g[l].type+", value: "+g[l].value+"}\n";void 0!==e&&(k+=e.first().value);b.O.trace(k);return E.create(f)})}var Xf=[{l:[{type:59,g:2}],m:Wf,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:1,g:3}],m:Wf,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}}];function Yf(a,b,c,d,e){a=void 0===d||d.G()?new Ab("err","http://www.w3.org/2005/xqt-errors","FOER0000"):d.first().value;b="";void 0===e||e.G()||(b=": "+e.first().value);throw Error(""+a.localName+b);}
var Zf=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",l:[],i:{type:63,g:3},m:Yf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",l:[{type:23,g:0}],i:{type:63,g:3},m:Yf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",l:[{type:23,g:0},{type:1,g:3}],i:{type:63,g:3},m:Yf},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",l:[{type:23,g:0},{type:1,g:3},{type:59,g:2}],i:{type:63,g:3},m:function(){throw Error("Not implemented: Using an error object in error is not supported");
}}];function $f(a){return"string"===typeof a?a:(a=(new Gb).getChildNodes(a).find(function(b){return 8===b.nodeType}))?a.data:"some expression"};function ag(a,b){a=Error.call(this,a);this.message=a.message;"stack"in a&&(this.stack=a.stack);this.position={end:{la:b.end.la,line:b.end.line,offset:b.end.offset},start:{la:b.start.la,line:b.start.line,offset:b.start.offset}}}x(ag,Error);function bg(a,b){if(b instanceof Error)throw b;"string"!==typeof a&&(a=$f(a));var c=cg(b);a=a.replace("\r","").split("\n");var d=Math.floor(Math.log10(Math.min(c.end.line+2,a.length)))+1;a=a.reduce(function(e,f,g){var k=g+1;if(2<c.start.line-k||2<k-c.end.line)return e;g=Array(d).fill(" ",0,Math.floor(Math.log10(k))+1-d).join("")+k+": ";e.push(g+f);if(k>=c.start.line&&k<=c.end.line){var l=k<c.end.line?f.length+g.length:c.end.la-1+g.length;k=k>c.start.line?g.length:c.start.la-1+g.length;e.push(Array(g.length+
f.length).fill(" ",0,k).fill("^",k,l).join(""))}return e},[]);b=dg(b).join("\n");throw new ag(a.join("\n")+"\n\n"+b,c);};var eg=Object.create(null);function fg(a,b){for(var c=[],d=0;d<a.length+1;++d)c[d]=[];return function k(f,g){if(0===f)return g;if(0===g)return f;if(void 0!==c[f][g])return c[f][g];var l=0;a[f-1]!==b[g-1]&&(l=1);l=Math.min(k(f-1,g)+1,k(f,g-1)+1,k(f-1,g-1)+l);return c[f][g]=l}(a.length,b.length)}
function gg(a){var b=eg[a]?eg[a]:Object.keys(eg).map(function(c){return{name:c,wb:fg(a,c.slice(c.lastIndexOf(":")+1))}}).sort(function(c,d){return c.wb-d.wb}).slice(0,5).filter(function(c){return c.wb<a.length/2}).reduce(function(c,d){return c.concat(eg[d.name])},[]).slice(0,5);return b.length?b.map(function(c){return'"Q{'+c.namespaceURI+"}"+c.localName+" ("+c.l.map(function(d){return 4===d?"...":vb(d)}).join(", ")+')"'}).reduce(function(c,d,e,f){return 0===e?c+d:c+((e!==f.length-1?", ":" or ")+d)},
"Did you mean ")+"?":"No similar functions found."}function hg(a,b,c){var d=eg[a+":"+b];return d?(d=d.find(function(e){return e.l.some(function(f){return 4===f})?e.l.length-1<=c:e.l.length===c}))?{l:d.l,arity:c,m:d.m,I:d.I,localName:b,namespaceURI:a,i:d.i}:null:null}function ig(a,b,c,d,e){eg[a+":"+b]||(eg[a+":"+b]=[]);eg[a+":"+b].push({l:c,arity:c.length,m:e,I:!1,localName:b,namespaceURI:a,i:d})};var jg={},kg=(jg.xml="http://www.w3.org/XML/1998/namespace",jg.xs="http://www.w3.org/2001/XMLSchema",jg.fn="http://www.w3.org/2005/xpath-functions",jg.map="http://www.w3.org/2005/xpath-functions/map",jg.array="http://www.w3.org/2005/xpath-functions/array",jg.math="http://www.w3.org/2005/xpath-functions/math",jg.fontoxpath="http://fontoxml.com/fontoxpath",jg.local="http://www.w3.org/2005/xquery-local-functions",jg);function lg(a,b,c,d){this.Ca=[Object.create(null)];this.Da=Object.create(null);this.O=a;this.ha=Object.keys(b).reduce(function(e,f){if(void 0===b[f])return e;e[f]="Q{}"+f+"[0]";return e},Object.create(null));this.s=Object.create(null);this.h=Object.create(null);this.A=c;this.u=d;this.j=[]}lg.prototype.za=function(a,b,c){return hg(a,b,c)};lg.prototype.qb=function(a,b){if(a)return null;a=this.ha[b];this.s[b]||(this.s[b]={name:b});return a};
lg.prototype.Ra=function(a,b){var c=this.u(a,b);if(c)this.j.push({Bc:a,arity:b,Hb:c});else if(""===a.prefix){if(this.A)return{namespaceURI:this.A,localName:a.localName}}else if(b=this.ba(a.prefix,!0))return{namespaceURI:b,localName:a.localName};return c};lg.prototype.ba=function(a,b){if(void 0!==b&&!b)return null;if(kg[a])return kg[a];b=this.O(a);this.h[a]||(this.h[a]={namespaceURI:b,prefix:a});return void 0!==b||a?b:null};function mg(a){return Error("XPTY0004: "+a)}function ng(a,b){a=2===a.node.nodeType?a.node.nodeName+'="'+Qb(b,a)+'"':a.node.outerHTML;return Error("XQTY0024: The node "+a+" follows a node that is not an attribute node or a namespace node.")}function og(a){return Error('XQDY0044: The node name "'+a.va()+'" is invalid for a computed attribute constructor.')}function pg(){return Error("XQST0045: Functions and variables may not be declared in one of the reserved namespace URIs.")}
function qg(){return Error("XQST0060: Functions declared in a module or as an external function must reside in a namespace.")}function rg(){return Error("XQST0066: A Prolog may contain at most one default function namespace declaration.")}function sg(){return Error("XQST0070: The prefixes xml and xmlns may not be used in a namespace declaration or be bound to another namespaceURI.")}
function tg(a){return Error('XQDY0074: The value "'+a+'" of a name expressions cannot be converted to an expanded QName.')}function ug(a){return Error('XPST0081: The prefix "'+a+'" could not be resolved')};function vg(a,b){return"Q{"+(a||"")+"}"+b}function wg(a,b){for(var c=a.length-1;0<=c;--c)if(b in a[c])return a[c][b]}function xg(a){this.s=a;this.O=this.h=0;this.j=[Object.create(null)];this.u=Object.create(null);this.A=null;this.Da=a&&a.Da;this.Ca=a&&a.Ca}function Ff(a){for(var b=new xg(a.s),c=0;c<a.h+1;++c)b.j=[Object.assign(Object.create(null),b.j[0],a.j[c])],b.Ca=[Object.assign(Object.create(null),b.Ca[0],a.Ca[c])],b.u=Object.assign(Object.create(null),a.u),b.Da=a.Da,b.A=a.A;return b}
function yg(a){a.O++;a.h++;a.j[a.h]=Object.create(null);a.Ca[a.h]=Object.create(null)}xg.prototype.za=function(a,b,c,d){d=void 0===d?!1:d;var e=this.u[vg(a,b)+"~"+c];return!e||d&&e.Bb?null===this.s?null:this.s.za(a,b,c,d):e};xg.prototype.qb=function(a,b){var c=wg(this.Ca,vg(a,b));return c?c:null===this.s?null:this.s.qb(a,b)};function zg(a,b,c){return(a=a.Da[vg(b,c)])?a:null}
function Ag(a,b,c,d,e){d=vg(b,c)+"~"+d;if(a.u[d])throw Error('XQST0049: The function or variable "Q{'+b+"}"+c+'" is declared more than once.');a.u[d]=e}function Bg(a,b,c){a.j[a.h][b]=c}function Cg(a,b,c){b=vg(b||"",c);return a.Ca[a.h][b]=b+"["+a.O+"]"}function Dg(a,b,c,d){a.Da[vg(b||"",c)+"["+a.O+"]"]=d}function Eg(a){a.j.length=a.h;a.Ca.length=a.h;a.h--}
xg.prototype.Ra=function(a,b){var c=a.prefix,d=a.localName;return""===c&&this.A?{localName:d,namespaceURI:this.A}:c&&(c=this.ba(c,!1))?{localName:d,namespaceURI:c}:null===this.s?null:this.s.Ra(a,b)};xg.prototype.ba=function(a,b){var c=wg(this.j,a||"");return void 0===c?null===this.s?void 0:this.s.ba(a||"",void 0===b?!0:b):c};function M(a,b){"*"===b||Array.isArray(b)||(b=[b]);for(var c=1;c<a.length;++c)if(Array.isArray(a[c])){var d=a[c];if("*"===b||b.includes(d[0]))return d}return null}function N(a){return 2>a.length?"":"object"===typeof a[1]?a[2]||"":a[1]||""}function O(a,b){if(!Array.isArray(a))return null;a=a[1];return"object"!==typeof a||Array.isArray(a)?null:b in a?a[b]:null}function P(a,b){return b.reduce(M,a)}
function Q(a,b){for(var c=[],d=1;d<a.length;++d)if(Array.isArray(a[d])){var e=a[d];"*"!==b&&e[0]!==b||c.push(e)}return c}function Fg(a){return{localName:N(a),namespaceURI:O(a,"URI"),prefix:O(a,"prefix")}}
function Gg(a){function b(f){switch(f[0]){case "documentTest":return 55;case "elementTest":return 54;case "attributeTest":return 47;case "piTest":return 57;case "commentTest":return 58;case "textTest":return 56;case "anyKindTest":return 53;case "anyItemType":return 59;case "anyFunctionTest":case "functionTest":case "typedFunctionTest":return 60;case "anyMapTest":case "typedMapTest":return 61;case "anyArrayTest":case "typedArrayTest":return 62;case "atomicType":return wb([O(f,"prefix"),N(f)].join(":"));
case "parenthesizedItemType":return b(M(f,"*"));default:throw Error('Type declaration "'+M(c,"*")[0]+'" is not supported.');}}var c=M(a,"typeDeclaration");if(!c||M(c,"voidSequenceType"))return{type:59,g:2};a={type:b(M(c,"*")),g:3};var d=null,e=M(c,"occurrenceIndicator");e&&(d=N(e));switch(d){case "*":return a.g=2,a;case "?":return a.g=0,a;case "+":return a.g=1,a;case "":case null:return a}}
function R(a,b,c){if("object"!==typeof a[1]||Array.isArray(a[1])){var d={};d[b]=c;a.splice(1,0,d)}else a[1][b]=c};function Hg(a){var b={type:62,g:3};R(a,"type",b);return b};function Ig(a,b){if(!b||!b.ia)return{type:59,g:2};var c=M(a,"EQName");if(!c)return{type:59,g:2};var d=Fg(c);c=d.localName;var e=d.prefix;d=Q(M(a,"arguments"),"*");c=b.ia.Ra({localName:c,prefix:e},d.length);if(!c)return{type:59,g:2};b=b.ia.za(c.namespaceURI,c.localName,d.length+1);if(!b)return{type:59,g:2};59!==b.i.type&&R(a,"type",b.i);return b.i};function S(a,b,c){return(a<<20)+(b<<12)+(c.charCodeAt(0)<<8)+c.charCodeAt(1)}
var Jg={},Kg=(Jg[S(2,2,"idivOp")]=5,Jg[S(16,16,"addOp")]=16,Jg[S(16,16,"subtractOp")]=16,Jg[S(16,16,"divOp")]=4,Jg[S(16,2,"multiplyOp")]=16,Jg[S(16,2,"divOp")]=16,Jg[S(2,16,"multiplyOp")]=16,Jg[S(17,17,"addOp")]=17,Jg[S(17,17,"subtractOp")]=17,Jg[S(17,17,"divOp")]=4,Jg[S(17,2,"multiplyOp")]=17,Jg[S(17,2,"divOp")]=17,Jg[S(2,17,"multiplyOp")]=17,Jg[S(9,9,"subtractOp")]=17,Jg[S(7,7,"subtractOp")]=17,Jg[S(8,8,"subtractOp")]=17,Jg[S(9,16,"addOp")]=9,Jg[S(9,16,"subtractOp")]=9,Jg[S(9,17,"addOp")]=9,Jg[S(9,
17,"subtractOp")]=9,Jg[S(7,16,"addOp")]=7,Jg[S(7,16,"subtractOp")]=7,Jg[S(7,17,"addOp")]=7,Jg[S(7,17,"subtractOp")]=7,Jg[S(8,17,"addOp")]=8,Jg[S(8,17,"subtractOp")]=8,Jg[S(9,16,"addOp")]=9,Jg[S(9,16,"subtractOp")]=9,Jg[S(9,17,"addOp")]=9,Jg[S(9,17,"subtractOp")]=9,Jg[S(7,17,"addOp")]=7,Jg[S(7,17,"subtractOp")]=7,Jg[S(7,16,"addOp")]=7,Jg[S(7,16,"subtractOp")]=7,Jg[S(8,17,"addOp")]=8,Jg[S(8,17,"subtractOp")]=8,Jg),Lg={},Mg=(Lg[S(2,2,"addOp")]=function(a,b){return a+b},Lg[S(2,2,"subtractOp")]=function(a,
b){return a-b},Lg[S(2,2,"multiplyOp")]=function(a,b){return a*b},Lg[S(2,2,"divOp")]=function(a,b){return a/b},Lg[S(2,2,"modOp")]=function(a,b){return a%b},Lg[S(2,2,"idivOp")]=function(a,b){return Math.trunc(a/b)},Lg[S(16,16,"addOp")]=function(a,b){return new jd(a.ga+b.ga)},Lg[S(16,16,"subtractOp")]=function(a,b){return new jd(a.ga-b.ga)},Lg[S(16,16,"divOp")]=function(a,b){return a.ga/b.ga},Lg[S(16,2,"multiplyOp")]=md,Lg[S(16,2,"divOp")]=function(a,b){if(isNaN(b))throw Error("FOCA0005: Cannot divide xs:yearMonthDuration by NaN");
a=Math.round(a.ga/b);if(a>Number.MAX_SAFE_INTEGER||!Number.isFinite(a))throw Error("FODT0002: Value overflow while dividing xs:yearMonthDuration");return new jd(a<Number.MIN_SAFE_INTEGER||0===a?0:a)},Lg[S(2,16,"multiplyOp")]=function(a,b){return md(b,a)},Lg[S(17,17,"addOp")]=function(a,b){return new fc(a.ea+b.ea)},Lg[S(17,17,"subtractOp")]=function(a,b){return new fc(a.ea-b.ea)},Lg[S(17,17,"divOp")]=function(a,b){if(0===b.ea)throw Error("FOAR0001: Division by 0");return a.ea/b.ea},Lg[S(17,2,"multiplyOp")]=
kc,Lg[S(17,2,"divOp")]=function(a,b){if(isNaN(b))throw Error("FOCA0005: Cannot divide xs:dayTimeDuration by NaN");a=a.ea/b;if(a>Number.MAX_SAFE_INTEGER||!Number.isFinite(a))throw Error("FODT0002: Value overflow while dividing xs:dayTimeDuration");return new fc(a<Number.MIN_SAFE_INTEGER||Object.is(-0,a)?0:a)},Lg[S(2,17,"multiplyOp")]=function(a,b){return kc(b,a)},Lg[S(9,9,"subtractOp")]=xc,Lg[S(7,7,"subtractOp")]=xc,Lg[S(8,8,"subtractOp")]=xc,Lg[S(9,16,"addOp")]=yc,Lg[S(9,16,"subtractOp")]=zc,Lg[S(9,
17,"addOp")]=yc,Lg[S(9,17,"subtractOp")]=zc,Lg[S(7,16,"addOp")]=yc,Lg[S(7,16,"subtractOp")]=zc,Lg[S(7,17,"addOp")]=yc,Lg[S(7,17,"subtractOp")]=zc,Lg[S(8,17,"addOp")]=yc,Lg[S(8,17,"subtractOp")]=zc,Lg[S(9,16,"addOp")]=yc,Lg[S(9,16,"subtractOp")]=zc,Lg[S(9,17,"addOp")]=yc,Lg[S(9,17,"subtractOp")]=zc,Lg[S(7,17,"addOp")]=yc,Lg[S(7,17,"subtractOp")]=zc,Lg[S(7,16,"addOp")]=yc,Lg[S(7,16,"subtractOp")]=zc,Lg[S(8,17,"addOp")]=yc,Lg[S(8,17,"subtractOp")]=zc,Lg);function Ng(a,b){return C(a,5)&&C(b,5)?5:C(a,4)&&C(b,4)?4:C(a,6)&&C(b,6)?6:3}var Og=[2,16,17,9,7,8];
function Pg(a,b,c){function d(G,H){return{V:e?e(G):G,W:f?f(H):H}}var e=null,f=null;C(b,19)&&(e=function(G){return Kd(G,3)},b=3);C(c,19)&&(f=function(G){return Kd(G,3)},c=3);var g=Og.filter(function(G){return C(b,G)}),k=Og.filter(function(G){return C(c,G)});if(g.includes(2)&&k.includes(2)){var l=Mg[S(2,2,a)],n=Kg[S(2,2,a)];n||(n=Ng(b,c));"divOp"===a&&5===n&&(n=4);return"idivOp"===a?Qg(d,l)[0]:function(G,H){G=d(G,H);return y(l(G.V.value,G.W.value),n)}}g=t(g);for(var q=g.next();!q.done;q=g.next()){q=
q.value;for(var u={},v=t(k),A=v.next();!A.done;u={ib:u.ib,lb:u.lb},A=v.next())if(A=A.value,u.ib=Mg[S(q,A,a)],u.lb=Kg[S(q,A,a)],u.ib&&void 0!==u.lb)return function(G){return function(H,L){H=d(H,L);return y(G.ib(H.V.value,H.W.value),G.lb)}}(u)}}
function Rg(a,b,c){function d(u,v){return{V:f?f(u):u,W:g?g(v):v}}var e=[2,53,59,46,47];if(e.includes(b)||e.includes(c))return 2;var f=null,g=null;C(b,19)&&(f=function(u){return Kd(u,3)},b=3);C(c,19)&&(g=function(u){return Kd(u,3)},c=3);var k=Og.filter(function(u){return C(b,u)});e=Og.filter(function(u){return C(c,u)});if(k.includes(2)&&e.includes(2))return e=Kg[S(2,2,a)],void 0===e&&(e=Ng(b,c)),"divOp"===a&&5===e&&(e=4),"idivOp"===a?Qg(d,function(u,v){return Math.trunc(u/v)})[1]:e;k=t(k);for(var l=
k.next();!l.done;l=k.next()){l=l.value;for(var n=t(e),q=n.next();!q.done;q=n.next())if(q=Kg[S(l,q.value,a)],void 0!==q)return q}}
function Qg(a,b){return[function(c,d){d=a(c,d);c=d.V;d=d.W;if(0===d.value)throw Error("FOAR0001: Divisor of idiv operator cannot be (-)0");if(Number.isNaN(c.value)||Number.isNaN(d.value)||!Number.isFinite(c.value))throw Error("FOAR0002: One of the operands of idiv is NaN or the first operand is (-)INF");return Number.isFinite(c.value)&&!Number.isFinite(d.value)?y(0,5):y(b(c.value,d.value),5)},5]}var Sg=Object.create(null);
function Yg(a,b,c,d,e){I.call(this,b.s.add(c.s),[b,c],{C:!1},!1,d);this.B=b;this.J=c;this.j=a;this.u=e}x(Yg,I);
Yg.prototype.h=function(a,b){var c=this;return Vc(J(this.B,a,b),b).L(function(d){return 0===d.length?E.empty():Vc(J(c.J,a,b),b).L(function(e){if(0===e.length)return E.empty();if(1<d.length||1<e.length)throw Error('XPTY0004: the operands of the "'+c.j+'" operator should be empty or singleton.');var f=d[0];e=e[0];if(c.u&&c.type)return E.o(c.u(f,e));var g=f.type;var k=e.type,l=c.j,n=g+"~"+k+"~"+l,q=Sg[n];q||(q=Sg[n]=Pg(l,g,k));g=q;if(!g)throw Error("XPTY0004: "+c.j+" not available for types "+tb[f.type]+
" and "+tb[e.type]);return E.o(g(f,e))})})};function Zg(a,b){for(var c=T,d=!1,e=1;e<a.length;e++)switch(a[e][0]){case "letClause":$g(b);var f=a[e],g=b,k=c,l=P(f,["letClauseItem","typedVariableBinding","varName"]);l=Fg(l);f=P(f,["letClauseItem","letExpr"]);k=k(f[1],g);ah(g,l.localName,k);break;case "forClause":d=!0;$g(b);bh(a[e],b,c);break;case "whereClause":$g(b);g=a[e];c(g,b);R(g,"type",{type:0,g:3});break;case "orderByClause":$g(b);break;case "returnClause":e=a[e];g=c;c=P(e,["*"]);b=g(c,b);R(c,"type",b);R(e,"type",b);c=b;if(!c)return{type:59,
g:2};d&&(c={type:c.type,g:2});59!==c.type&&R(a,"type",c);return c;default:c=c(a[e],b);if(!c)return{type:59,g:2};d&&(c={type:c.type,g:2});59!==c.type&&R(a,"type",c);return c}if(0<b.h)b.h--,b.s.pop(),b.A.pop();else throw Error("Variable scope out of bound");}
function bh(a,b,c){var d=Fg(P(a,["forClauseItem","typedVariableBinding","varName"]));if(a=P(a,["forClauseItem","forExpr","sequenceExpr"]))a=Q(a,"*").map(function(e){return c(e,b)}),a.includes(void 0)||a.includes(null)||(a=ch(a),1===a.length&&ah(b,d.localName,a[0]))}function ch(a){return a.filter(function(b,c,d){return d.findIndex(function(e){return e.type===b.type&&e.g===b.g})===c})};function dh(a,b){if(!b||!b.ia)return{type:59,g:2};var c=M(a,"functionName"),d=Fg(c),e=d.localName,f=d.prefix,g=d.namespaceURI;d=Q(M(a,"arguments"),"*");if(null===g){f=b.ia.Ra({localName:e,prefix:f},d.length);if(!f)return{type:59,g:2};e=f.localName;g=f.namespaceURI;R(c,"URI",g);c[2]=e}b=b.ia.za(g,e,d.length);if(!b||63===b.i.type)return{type:59,g:2};59!==b.i.type&&R(a,"type",b.i);return b.i};function eh(a){var b={type:61,g:3};R(a,"type",b);return b};function fh(a,b){if(!b||!b.ia)return{type:59,g:2};var c=M(a,"functionName"),d=Fg(c),e=d.localName,f=d.namespaceURI,g=d.prefix;d=Number(P(a,["integerConstantExpr","value"])[1]);if(!f){f=b.ia.Ra({localName:e,prefix:g},d);if(!f)return{type:59,g:2};e=f.localName;f=f.namespaceURI;R(c,"URI",f)}b=b.ia.za(f,e,d)||null;if(!b)return{type:59,g:2};59!==b.i.type&&63!==b.i.type&&R(a,"type",b.i);return b.i};function gh(a,b){var c=Q(a,"stepExpr");if(!c)return{type:59,g:2};c=t(c);for(var d=c.next();!d.done;d=c.next()){var e=d.value;d=void 0;var f=b;if(e){var g=Q(e,"*"),k="";g=t(g);for(var l=g.next();!l.done;l=g.next())switch(l=l.value,l[0]){case "filterExpr":d=O(P(l,["*"]),"type");break;case "xpathAxis":k=l[1];b:{switch(k){case "attribute":d={type:47,g:2};break b;case "child":case "decendant":case "self":case "descendant-or-self":case "following-sibling":case "following":case "namespace":case "parent":case "ancestor":case "preceding-sibling":case "preceding":case "ancestor-or-self":d=
{type:53,g:2};break b}d=void 0}break;case "nameTest":var n=Fg(l);null!==n.namespaceURI||"attribute"===k&&!n.prefix||(n=f.ba(n.prefix||""),void 0!==n&&R(l,"URI",n))}d&&59!==d.type&&R(e,"type",d)}e=O(e,"type")}e&&59!==e.type&&R(a,"type",e);return e};function hh(a){var b={type:0,g:3};R(a,"type",b);return b};function ih(a,b,c){0===b?b={type:53,g:2}:c.includes(void 0)||c.includes(null)?b={type:59,g:2}:(b=ch(c),b=1<b.length?{type:59,g:2}:{type:b[0].type,g:2});b&&59!==b.type&&R(a,"type",b);return b};function jh(a,b,c,d){if(!b||c.includes(void 0))return{type:59,g:2};for(var e=Q(a,"typeswitchExprCaseClause"),f=0;f<c.length;f++){var g=M(e[f],"*");switch(g[0]){case "sequenceType":if(g=kh(g,b,c[f]))return 59!==g.type&&R(a,"type",g),g;continue;case "sequenceTypeUnion":for(d=Q(g,"*"),e=0;2>e;e++)if(g=kh(d[e],b,c[f]))return 59!==g.type&&R(a,"type",g),g;default:return{type:59,g:2}}}59!==d.type&&R(a,"type",d);return d}
function kh(a,b,c){var d=Q(a,"*"),e=M(a,"atomicType");if(!e)return{type:59,g:2};if(wb(O(e,"prefix")+":"+e[2])===b.type)if(1===d.length){if(3===b.g)return c}else if(a=M(a,"occurrenceIndicator")[1],b.g===yb(a))return c};function lh(a,b){T(a,b)}function T(a,b){var c=mh.get(a[0]);if(c)return c(a,b);for(c=1;c<a.length;c++)a[c]&&T(a[c],b)}function nh(a,b){var c=T(M(a,"firstOperand")[1],b),d=T(M(a,"secondOperand")[1],b);var e=a[0];if(c&&d)if(b=Rg(e,c.type,d.type))c={type:b,g:c.g},2!==b&&59!==b&&R(a,"type",c),a=c;else throw Error("XPTY0004: "+e+" not available for types "+vb(c)+" and "+vb(d));else a={type:2,g:3};return a}
function oh(a,b){T(M(a,"firstOperand")[1],b);T(M(a,"secondOperand")[1],b);a:{switch(a[0]){case "orOp":b={type:0,g:3};R(a,"type",b);a=b;break a;case "andOp":b={type:0,g:3};R(a,"type",b);a=b;break a}a=void 0}return a}function ph(a,b){T(M(a,"firstOperand")[1],b);T(M(a,"secondOperand")[1],b);a:{switch(a[0]){case "unionOp":b={type:53,g:2};R(a,"type",b);a=b;break a;case "intersectOp":b={type:53,g:2};R(a,"type",b);a=b;break a;case "exceptOp":b={type:53,g:2};R(a,"type",b);a=b;break a}a=void 0}return a}
function qh(a,b){T(M(a,"firstOperand")[1],b);T(M(a,"secondOperand")[1],b);b={type:0,g:3};R(a,"type",b);return b}function rh(a,b){T(M(a,"firstOperand")[1],b);T(M(a,"secondOperand")[1],b);b={type:0,g:3};R(a,"type",b);return b}function sh(a,b){T(M(a,"firstOperand")[1],b);T(M(a,"secondOperand")[1],b);b={type:0,g:3};R(a,"type",b);return b}
var mh=new Map([["unaryMinusOp",function(a,b){b=T(M(a,"operand")[1],b);b?C(b.type,2)?(b={type:b.type,g:b.g},R(a,"type",b),a=b):(b={type:3,g:3},R(a,"type",b),a=b):(b={type:2,g:2},R(a,"type",b),a=b);return a}],["unaryPlusOp",function(a,b){b=T(M(a,"operand")[1],b);b?C(b.type,2)?(b={type:b.type,g:b.g},R(a,"type",b),a=b):(b={type:3,g:3},R(a,"type",b),a=b):(b={type:2,g:2},R(a,"type",b),a=b);return a}],["addOp",nh],["subtractOp",nh],["divOp",nh],["idivOp",nh],["modOp",nh],["multiplyOp",nh],["andOp",oh],
["orOp",oh],["sequenceExpr",function(a,b){var c=Q(a,"*"),d=c.map(function(e){return T(e,b)});return ih(a,c.length,d)}],["unionOp",ph],["intersectOp",ph],["exceptOp",ph],["stringConcatenateOp",function(a,b){T(M(a,"firstOperand")[1],b);T(M(a,"secondOperand")[1],b);b={type:1,g:3};R(a,"type",b);return b}],["rangeSequenceExpr",function(a,b){T(M(a,"startExpr")[1],b);T(M(a,"endExpr")[1],b);b={type:5,g:1};R(a,"type",b);return b}],["equalOp",qh],["notEqualOp",qh],["lessThanOrEqualOp",qh],["lessThanOp",qh],
["greaterThanOrEqualOp",qh],["greaterThanOp",qh],["eqOp",rh],["neOp",rh],["ltOp",rh],["leOp",rh],["gtOp",rh],["geOp",rh],["isOp",sh],["nodeBeforeOp",sh],["nodeAfterOp",sh],["pathExpr",function(a,b){var c=M(a,"rootExpr");c&&c[1]&&T(c[1],b);Q(a,"stepExpr").map(function(d){return T(d,b)});return gh(a,b)}],["contextItemExpr",function(){return{type:59,g:2}}],["ifThenElseExpr",function(a,b){T(M(M(a,"ifClause"),"*"),b);var c=T(M(M(a,"thenClause"),"*"),b);b=T(M(M(a,"elseClause"),"*"),b);c&&b?c.type===b.type&&
c.g===b.g?(59!==c.type&&R(a,"type",c),a=c):a={type:59,g:2}:a={type:59,g:2};return a}],["instanceOfExpr",function(a,b){T(M(a,"argExpr"),b);T(M(a,"sequenceType"),b);b={type:0,g:3};R(a,"type",b);return b}],["integerConstantExpr",function(a){var b={type:5,g:3};R(a,"type",b);return b}],["doubleConstantExpr",function(a){var b={type:3,g:3};R(a,"type",b);return b}],["decimalConstantExpr",function(a){var b={type:4,g:3};R(a,"type",b);return b}],["stringConstantExpr",function(a){var b={type:1,g:3};R(a,"type",
b);return b}],["functionCallExpr",function(a,b){var c=M(a,"arguments");Q(c,"*").map(function(d){return T(d,b)});return dh(a,b)}],["arrowExpr",function(a,b){T(M(a,"argExpr")[1],b);return Ig(a,b)}],["dynamicFunctionInvocationExpr",function(a,b){T(P(a,["functionItem","*"]),b);(a=M(a,"arguments"))&&T(a,b);return{type:59,g:2}}],["namedFunctionRef",function(a,b){return fh(a,b)}],["inlineFunctionExpr",function(a,b){T(M(a,"functionBody")[1],b);b={type:60,g:3};R(a,"type",b);return b}],["castExpr",function(a){var b=
P(a,["singleType","atomicType"]);b={type:wb(O(b,"prefix")+":"+b[2]),g:3};59!==b.type&&R(a,"type",b);return b}],["castableExpr",function(a){var b={type:0,g:3};R(a,"type",b);return b}],["simpleMapExpr",function(a,b){for(var c=Q(a,"pathExpr"),d,e=0;e<c.length;e++)d=T(c[e],b);void 0!==d&&null!==d?((b={type:d.type,g:2},59!==b.type)&&R(a,"type",b),a=b):a={type:59,g:2};return a}],["mapConstructor",function(a,b){Q(a,"mapConstructorEntry").map(function(c){return{key:T(P(c,["mapKeyExpr","*"]),b),value:T(P(c,
["mapValueExpr","*"]),b)}});return eh(a)}],["arrayConstructor",function(a,b){Q(M(a,"*"),"arrayElem").map(function(c){return T(c,b)});return Hg(a)}],["unaryLookup",function(a){M(a,"NCName");return{type:59,g:2}}],["typeswitchExpr",function(a,b){var c=T(M(a,"argExpr")[1],b),d=Q(a,"typeswitchExprCaseClause").map(function(f){return T(P(f,["resultExpr"])[1],b)}),e=T(P(a,["typeswitchExprDefaultClause","resultExpr"])[1],b);return jh(a,c,d,e)}],["quantifiedExpr",function(a,b){Q(a,"*").map(function(c){return T(c,
b)});return hh(a)}],["x:stackTrace",function(a,b){a=Q(a,"*");return T(a[0],b)}],["queryBody",function(a,b){return T(a[1],b)}],["flworExpr",function(a,b){return Zg(a,b)}],["varRef",function(a,b){var c=Fg(M(a,"name")),d;a:{for(d=b.h;0<=d;d--){var e=b.s[d][c.localName];if(e){d=e;break a}}d=void 0}d&&59!==d.type&&R(a,"type",d);null===c.namespaceURI&&(b=b.ba(c.prefix),void 0!==b&&R(a,"URI",b));return d}]]);function th(a){this.h=0;this.ia=a;this.s=[{}];this.A=[{}]}function ah(a,b,c){if(a.s[a.h][b])throw Error("Another variable of in the scope "+a.h+" with the same name "+b+" already exists");a.s[a.h][b]=c}function $g(a){a.h++;a.s.push({});a.A.push({})}th.prototype.ba=function(a){for(var b=this.h;0<=b;b--){var c=this.A[b][a];if(void 0!==c)return c}return this.ia?this.ia.ba(a):void 0};function uh(a,b){var c={};I.call(this,new yf((c.external=1,c)),a,{C:a.every(function(d){return d.C})},!1,b);this.j=a}x(uh,I);uh.prototype.h=function(a,b){return 0===this.j.length?E.o(new Xb([])):J(this.j[0],a,b).L(function(c){return E.o(new Xb(c.map(function(d){return rb(E.o(d))})))})};function vh(a,b){var c={};I.call(this,new yf((c.external=1,c)),a,{C:a.every(function(d){return d.C})},!1,b);this.j=a}x(vh,I);vh.prototype.h=function(a,b){return E.o(new Xb(this.j.map(function(c){return rb(J(c,a,b))})))};function wh(a){if(null===a)throw Error("XPDY0002: context is absent, it needs to be present to use axes.");if(!C(a.type,53))throw Error("XPTY0020: Axes can only be applied to nodes.");return a.value};function xh(a,b,c){var d=b;return{next:function(){if(!d)return z;var e=d;d=Ub(a,e,c);return B(Zb(e))}}}function yh(a,b){b=b||{Oa:!1};I.call(this,a.s,[a],{S:"reverse-sorted",Y:!1,subtree:!1,C:!1});this.j=a;this.u=!!b.Oa}x(yh,I);yh.prototype.h=function(a,b){var c=this;b=b.h;a=wh(a.N);var d=this.j.A();d=d&&(d.startsWith("name-")||"type-1"===d)?"type-1":null;return E.create(xh(b,this.u?a:Ub(b,a,d),d)).filter(function(e){return c.j.j(e)})};var zh=new Map([["type-1-or-type-2",["name","type-1","type-2"]],["type-1",["name"]],["type-2",["name"]]]);function Ah(a,b){if(null===a)return b;if(null===b||a===b)return a;var c=a.startsWith("name-")?"name":a,d=b.startsWith("name-")?"name":b,e=zh.get(c);if(void 0!==e&&e.includes(d))return b;b=zh.get(d);return void 0!==b&&b.includes(c)?a:"empty"};function Bh(a,b){var c={};I.call(this,new yf((c.attribute=1,c)),[a],{S:"unsorted",subtree:!0,Y:!0,C:!1});this.j=a;this.u=Ah(this.j.A(),b)}x(Bh,I);Bh.prototype.h=function(a,b){var c=this;b=b.h;a=wh(a.N);if(1!==a.node.nodeType)return E.empty();a=Nb(b,a,this.u).filter(function(d){return"http://www.w3.org/2000/xmlns/"!==d.node.namespaceURI}).map(function(d){return Zb(d)}).filter(function(d){return c.j.j(d)});return E.create(a)};Bh.prototype.A=function(){return"type-1"};function Ch(a,b){I.call(this,a.s,[a],{S:"sorted",subtree:!0,Y:!0,C:!1});this.u=a;this.j=Ah(b,a.A())}x(Ch,I);Ch.prototype.h=function(a,b){var c=this,d=b.h,e=wh(a.N);a=e.node.nodeType;if(1!==a&&9!==a)return E.empty();var f=null,g=!1;return E.create({next:function(){for(;!g;){if(!f){f=Rb(d,e,c.j);if(!f){g=!0;continue}return B(Zb(f))}if(f=Tb(d,f,c.j))return B(Zb(f));g=!0}return z}}).filter(function(k){return c.u.j(k)})};function Dh(a,b,c){var d=b.node.nodeType;if(1!==d&&9!==d)return{next:function(){return z}};var e=Rb(a,b,c);return{next:function(){if(!e)return z;var f=e;e=Tb(a,e,c);return B(f)}}};function Eh(a,b,c){var d=[Ld(b)];return{next:function(e){0<d.length&&0!==(e&1)&&d.shift();if(!d.length)return z;for(e=d[0].next(0);e.done;){d.shift();if(!d.length)return z;e=d[0].next(0)}d.unshift(Dh(a,e.value,c));return B(Zb(e.value))}}}function Fh(a,b){b=b||{Oa:!1};I.call(this,a.s,[a],{C:!1,Y:!1,S:"sorted",subtree:!0});this.j=a;this.u=!!b.Oa;this.B=(a=this.j.A())&&(a.startsWith("name-")||"type-1"===a)?"type-1":null}x(Fh,I);
Fh.prototype.h=function(a,b){var c=this;b=b.h;a=wh(a.N);a=Eh(b,a,this.B);this.u||a.next(0);return E.create(a).filter(function(d){return c.j.j(d)})};function Gh(a,b,c){var d=a.node.nodeType;if(1!==d&&9!==d)return a;for(d=Sb(b,a,c);null!==d;){if(1!==d.node.nodeType)return d;a=d;d=Sb(b,a,c)}return a}
function Hh(a,b,c,d){if(void 0===c?0:c){var e=b,f=!1;return{next:function(){if(f)return z;if(Nd(e,b))return e=Gh(b,a,d),Nd(e,b)?(f=!0,z):B(Zb(e));var k=e.node.nodeType,l=9===k||2===k?null:Vb(a,e,d);if(null!==l)return e=Gh(l,a,d),B(Zb(e));e=9===k?null:Ub(a,e,d);return Nd(e,b)?(f=!0,z):B(Zb(e))}}}var g=[Dh(a,b,d)];return{next:function(){if(!g.length)return z;for(var k=g[0].next(0);k.done;){g.shift();if(!g.length)return z;k=g[0].next(0)}g.unshift(Dh(a,k.value,d));return B(Zb(k.value))}}};function Ih(a,b,c){for(var d=[];b&&9!==b.node.nodeType;b=Ub(a,b,null)){var e=Tb(a,b,c);e&&d.push(e)}var f=null;return{next:function(){for(;f||d.length;){if(!f){f=Hh(a,d[0],!1,c);var g=B(Zb(d[0])),k=Tb(a,d[0],c);k?d[0]=k:d.shift();return g}g=f.next(0);if(g.done)f=null;else return g}return z}}}function Jh(a){I.call(this,a.s,[a],{S:"sorted",Y:!0,subtree:!1,C:!1});this.j=a;this.u=(a=this.j.A())&&(a.startsWith("name-")||"type-1"===a)?"type-1":null}x(Jh,I);
Jh.prototype.h=function(a,b){var c=this;b=b.h;a=wh(a.N);return E.create(Ih(b,a,this.u)).filter(function(d){return c.j.j(d)})};function Kh(a,b,c){return{next:function(){return(b=b&&Tb(a,b,c))?B(Zb(b)):z}}}function Lh(a,b){I.call(this,a.s,[a],{S:"sorted",Y:!0,subtree:!1,C:!1});this.j=a;this.u=Ah(this.j.A(),b)}x(Lh,I);Lh.prototype.h=function(a,b){var c=this;b=b.h;a=wh(a.N);return E.create(Kh(b,a,this.u)).filter(function(d){return c.j.j(d)})};function Mh(a,b){I.call(this,a.s,[a],{S:"reverse-sorted",Y:!0,subtree:!0,C:!1});this.j=a;this.u=Ah(b,this.j.A())}x(Mh,I);Mh.prototype.h=function(a,b){b=b.h;a=wh(a.N);a=Ub(b,a,this.u);if(!a)return E.empty();a=Zb(a);return this.j.j(a)?E.o(a):E.empty()};function Nh(a,b,c){for(var d=[];b&&9!==b.node.nodeType;b=Ub(a,b,null)){var e=Vb(a,b,c);null!==e&&d.push(e)}var f=null;return{next:function(){for(;f||d.length;){f||(f=Hh(a,d[0],!0,c));var g=f.next(0);if(g.done){f=null;g=Vb(a,d[0],c);var k=B(Zb(d[0]));null===g?d.shift():d[0]=g;return k}return g}return z}}}function Oh(a){I.call(this,a.s,[a],{C:!1,Y:!0,S:"reverse-sorted",subtree:!1});this.j=a;this.u=(a=this.j.A())&&(a.startsWith("name-")||"type-1"===a)?"type-1":null}x(Oh,I);
Oh.prototype.h=function(a,b){var c=this;b=b.h;a=wh(a.N);return E.create(Nh(b,a,this.u)).filter(function(d){return c.j.j(d)})};function Ph(a,b,c){return{next:function(){return(b=b&&Vb(a,b,c))?B(Zb(b)):z}}}function Qh(a,b){I.call(this,a.s,[a],{C:!1,Y:!0,S:"reverse-sorted",subtree:!1});this.j=a;this.u=Ah(this.j.A(),b)}x(Qh,I);Qh.prototype.h=function(a,b){var c=this;b=b.h;a=wh(a.N);return E.create(Ph(b,a,this.u)).filter(function(d){return c.j.j(d)})};function Rh(a,b){I.call(this,a.s,[a],{S:"sorted",subtree:!0,Y:!0,C:!1});this.j=a;this.u=Ah(this.j.A(),b)}x(Rh,I);Rh.prototype.h=function(a){wh(a.N);return this.j.j(a.N)?E.o(a.N):E.empty()};Rh.prototype.A=function(){return this.u};function Sh(a,b,c,d){var e=a.s.add(b.s).add(c.s);uf.call(this,e,[a,b,c],{C:a.C&&b.C&&c.C,Y:b.Y===c.Y&&b.Y,S:b.O===c.O?b.O:"unsorted",subtree:b.subtree===c.subtree&&b.subtree},d);this.j=a}x(Sh,uf);Sh.prototype.B=function(a,b,c){var d=null,e=c[0](a);return E.create({next:function(f){d||(d=(e.getEffectiveBooleanValue()?c[1](a):c[2](a)).value);return d.next(f)}})};Sh.prototype.P=function(a){uf.prototype.P.call(this,a);if(this.j.I)throw Te();};function Th(a,b,c){this.location=a;this.s=b;this.h=c}function cg(a){return a.h instanceof Error?a.location:cg(a.h)}function dg(a){var b=a.h instanceof ag?["Inner error:",a.h.message]:a.h instanceof Error?[a.h.toString()]:dg(a.h);b.push("  at <"+a.s+">:"+a.location.start.line+":"+a.location.start.la+" - "+a.location.end.line+":"+a.location.end.la);return b};function Uh(a,b,c){uf.call(this,c.s,[c],{C:c.C,Y:c.Y,S:c.O,subtree:c.subtree});this.j=b;this.J={end:{la:a.end.la,line:a.end.line,offset:a.end.offset},start:{la:a.start.la,line:a.start.line,offset:a.start.offset}}}x(Uh,uf);Uh.prototype.B=function(a,b,c){var d=this;b=t(c).next().value;try{var e=b(a)}catch(f){throw new Th(this.J,this.j,f);}return E.create({next:function(f){try{return e.value.next(f)}catch(g){throw new Th(d.J,d.j,g);}}})};
Uh.prototype.P=function(a){try{uf.prototype.P.call(this,a)}catch(b){throw new Th(this.J,this.j,b);}};function Vh(a,b,c,d){I.call(this,a,b,c,!0);this.j=d;this.I=this.j.I}x(Vh,I);function Wh(a,b,c,d){var e=[],f=a.J(b,c,d,function(k){if(a.j instanceof Vh){var l=Wh(a.j,b,k,d);return tf(l,function(q){return e=q})}var n=null;return E.create({next:function(){for(;;){if(!n){var q=k.next(0);if(q.done)return z;q=a.j.u(q.value,d);n=tf(q,function(u){return e=qf(e,u)}).value}q=n.next(0);if(q.done)n=null;else return q}}})}),g=!1;return{next:function(){if(g)return z;var k=f.M();g=!0;return B(new df(k,e))}}}
Vh.prototype.h=function(a,b){var c=this;return this.J(a,Ld(a),b,function(d){if(c.j instanceof Vh)return Xh(c.j,a,d,b);var e=null;return E.create({next:function(f){for(;;){if(!e){var g=d.next(0);if(g.done)return z;e=J(c.j,g.value,b).value}g=e.next(f);if(g.done)e=null;else return g}}})})};Vh.prototype.u=function(a,b){return Wh(this,a,Ld(a),b)};
Vh.prototype.P=function(a){I.prototype.P.call(this,a);this.I=this.j.I;a=t(this.ha);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b!==this.j&&b.I)throw Te();};function Xh(a,b,c,d){return a.J(b,c,d,function(e){if(a.j instanceof Vh)return Xh(a.j,b,e,d);var f=null;return E.create({next:function(){for(;;){if(!f){var g=e.next(0);if(g.done)return z;f=J(a.j,g.value,d).value}g=f.next(0);if(g.done)f=null;else return g}}})})};function Yh(a,b,c,d){Vh.call(this,b.s.add(d.s),[b,d],{C:!1},d);this.T=a.prefix;this.ka=a.namespaceURI;this.$b=a.localName;this.mb=null;this.B=c;this.ua=null;this.na=b}x(Yh,Vh);
Yh.prototype.J=function(a,b,c,d){var e=this,f=null,g=null,k=0;return d({next:function(){for(var l={};;){if(!f){var n=b.next(0);if(n.done)return z;g=n.value;k=0;f=J(e.na,g,c).value}l.hb=f.next(0);if(l.hb.done)f=null;else return k++,n={},l=(n[e.mb]=function(q){return function(){return E.o(q.hb.value)}}(l),n),e.ua&&(l[e.ua]=function(){return E.o(new sb(5,k))}),B(Kc(g,l));l={hb:l.hb}}}})};
Yh.prototype.P=function(a){if(this.T&&(this.ka=a.ba(this.T),!this.ka&&this.T))throw Error("XPST0081: Could not resolve namespace for prefix "+this.T+" in a for expression");this.na.P(a);yg(a);this.mb=Cg(a,this.ka,this.$b);if(this.B){if(this.B.prefix&&(this.B.namespaceURI=a.ba(this.B.prefix),!this.B.namespaceURI&&this.B.prefix))throw Error("XPST0081: Could not resolve namespace for prefix "+this.T+" in the positionalVariableBinding in a for expression");this.ua=Cg(a,this.B.namespaceURI,this.B.localName)}this.j.P(a);
Eg(a);if(this.na.I)throw Te();this.j.I&&(this.I=!0)};function Zh(a,b,c){var d={};I.call(this,new yf((d.external=1,d)),[c],{C:!1,S:"unsorted"});this.T=a.map(function(e){return e.name});this.B=a.map(function(e){return e.type});this.u=null;this.J=b;this.j=c}x(Zh,I);
Zh.prototype.h=function(a,b){var c=this,d=new Bb({l:this.B,arity:this.B.length,Pa:!0,I:this.j.I,localName:"dynamic-function",namespaceURI:"",i:this.J,value:function(e,f,g,k){for(var l=[],n=3;n<arguments.length;++n)l[n-3]=arguments[n];n=Kc(Hc(a,-1,null,E.empty()),c.u.reduce(function(q,u,v){q[u]=rb(l[v]);return q},Object.create(null)));return J(c.j,n,b)}});return E.o(d)};
Zh.prototype.P=function(a){yg(a);this.u=this.T.map(function(b){return Cg(a,b.namespaceURI,b.localName)});this.j.P(a);Eg(a);if(this.j.I)throw Error("Not implemented: inline functions can not yet be updating.");};function $h(a,b,c){Vh.call(this,b.s.add(c.s),[b,c],{C:!1,Y:c.Y,S:c.O,subtree:c.subtree},c);if(a.prefix||a.namespaceURI)throw Error("Not implemented: let expressions with namespace usage.");this.B=a.prefix;this.T=a.namespaceURI;this.ua=a.localName;this.ka=b;this.na=null}x($h,Vh);$h.prototype.J=function(a,b,c,d){var e=this;return d({next:function(){var f=b.next(0);if(f.done)return z;f=f.value;var g={};f=Kc(f,(g[e.na]=rb(J(e.ka,f,c)),g));return B(f)}})};
$h.prototype.P=function(a){if(this.B&&(this.T=a.ba(this.B),!this.T&&this.B))throw Error("XPST0081: Could not resolve namespace for prefix "+this.B+" using in a for expression");this.ka.P(a);yg(a);this.na=Cg(a,this.T,this.ua);this.j.P(a);Eg(a);this.I=this.j.I;if(this.ka.I)throw Te();};function ai(a,b){I.call(this,new yf({}),[],{C:!0,S:"sorted"},!1,b);switch(b.type){case 5:var c=y(parseInt(a,10),b.type);break;case 1:c=y(a,b.type);break;case 4:case 3:c=y(parseFloat(a),b.type);break;default:throw new TypeError("Type "+b+" not expected in a literal");}this.j=function(){return E.o(c)}}x(ai,I);ai.prototype.h=function(){return this.j()};function bi(a,b){var c={};I.call(this,new yf((c.external=1,c)),a.reduce(function(d,e){return d.concat(e.key,e.value)},[]),{C:!1},!1,b);this.j=a}x(bi,I);bi.prototype.h=function(a,b){var c=this,d=this.j.map(function(e){return Vc(J(e.key,a,b),b).$({default:function(){throw Error("XPTY0004: A key of a map should be a single atomizable value.");},o:function(f){return f}})});return $b(d,function(e){return E.o(new cc(e.map(function(f,g){return{key:f,value:rb(J(c.j[g].value,a,b))}})))})};function ci(a,b,c){var d={};I.call(this,new yf((d.external=1,d)),[],{C:!0},!1,c);this.u=b;this.B=a;this.j=null}x(ci,I);ci.prototype.h=function(){var a=new Bb({l:this.j.l,I:this.j.I,arity:this.u,localName:this.j.localName,namespaceURI:this.j.namespaceURI,i:this.j.i,value:this.j.m});return E.o(a)};
ci.prototype.P=function(a){var b=this.B.namespaceURI,c=this.B.localName,d=this.B.prefix;if(null===b){var e=a.Ra({localName:c,prefix:d},this.u);if(!e)throw Error("XPST0017: The function "+(d?d+":":"")+c+" with arity "+this.u+" could not be resolved. "+gg(c));b=e.namespaceURI;c=e.localName}this.j=a.za(b,c,this.u)||null;if(!this.j)throw a=this.B,Error("XPST0017: Function "+((a.namespaceURI?"Q{"+a.namespaceURI+"}":a.prefix?a.prefix+":":"")+a.localName)+" with arity of "+this.u+" not registered. "+gg(c));
I.prototype.P.call(this,a)};var di={},ei=(di[5]=5,di[27]=5,di[28]=5,di[31]=5,di[32]=5,di[33]=5,di[34]=5,di[30]=5,di[36]=5,di[35]=5,di[38]=5,di[37]=5,di[29]=5,di[4]=4,di[6]=6,di[3]=3,di);function fi(a,b,c){I.call(this,b.s,[b],{C:!1},!1,c);this.u=b;this.j=a}x(fi,I);
fi.prototype.h=function(a,b){var c=this;return Vc(J(this.u,a,b),b).L(function(d){if(0===d.length)return E.empty();var e=d[0];if(c.type)return d="+"===c.j?+e.value:-e.value,0===e.type&&(d=Number.NaN),E.o(y(d,c.type.type));if(1<d.length)throw Error("XPTY0004: The operand to a unary operator must be a sequence with a length less than one");return C(e.type,19)?(e=Kd(e,3).value,E.o(y("+"===c.j?e:-e,3))):C(e.type,2)?"+"===c.j?E.o(e):E.o(y(-1*e.value,ei[e.type])):E.o(y(Number.NaN,3))})};function gi(a,b){I.call(this,a.reduce(function(c,d){return c.add(d.s)},new yf({})),a,{C:a.every(function(c){return c.C})},!1,b);this.j=a;this.u=a.reduce(function(c,d){return Ah(c,d.A())},null)}x(gi,I);
gi.prototype.h=function(a,b){var c=this,d=0,e=null,f=!1,g=null;if(null!==a){var k=a.N;null!==k&&C(k.type,53)&&(g=Eb(k.value))}return E.create({next:function(){if(!f){for(;d<c.j.length;){if(!e){var l=c.j[d];if(null!==g&&null!==l.A()&&!g.includes(l.A()))return d++,f=!0,B(db);e=J(l,a,b)}if(!1===e.getEffectiveBooleanValue())return f=!0,B(db);e=null;d++}f=!0;return B(cb)}return z}})};gi.prototype.A=function(){return this.u};function hi(a,b){var c=a.reduce(function(e,f){return 0<zf(e,f.s)?e:f.s},new yf({}));I.call(this,c,a,{C:a.every(function(e){return e.C})},!1,b);var d;for(b=0;b<a.length;++b){void 0===d&&(d=a[b].A());if(null===d)break;if(d!==a[b].A()){d=null;break}}this.u=d;this.j=a}x(hi,I);
hi.prototype.h=function(a,b){var c=this,d=0,e=null,f=!1,g=null;if(null!==a){var k=a.N;null!==k&&C(k.type,53)&&(g=Eb(k.value))}return E.create({next:function(){if(!f){for(;d<c.j.length;){if(!e){var l=c.j[d];if(null!==g&&null!==l.A()&&!g.includes(l.A())){d++;continue}e=J(l,a,b)}if(!0===e.getEffectiveBooleanValue())return f=!0,B(cb);e=null;d++}f=!0;return B(db)}return z}})};hi.prototype.A=function(){return this.u};function ii(a,b){var c;return E.create({next:function(d){for(;;){if(!c){var e=a.value.next(d);if(e.done)return z;c=Uc(e.value,b)}e=c.value.next(d);if(e.done)c=null;else return e}}})};function ji(a,b){if("eqOp"===a)return function(c,d){d=b(c,d);c=d.V;d=d.W;return c.value.namespaceURI===d.value.namespaceURI&&c.value.localName===d.value.localName};if("neOp"===a)return function(c,d){d=b(c,d);c=d.V;d=d.W;return c.value.namespaceURI!==d.value.namespaceURI||c.value.localName!==d.value.localName};throw Error('XPTY0004: Only the "eq" and "ne" comparison is defined for xs:QName');}
function ki(a,b){switch(a){case "eqOp":return function(c,d){c=b(c,d);return c.V.value===c.W.value};case "neOp":return function(c,d){c=b(c,d);return c.V.value!==c.W.value};case "ltOp":return function(c,d){c=b(c,d);return c.V.value<c.W.value};case "leOp":return function(c,d){c=b(c,d);return c.V.value<=c.W.value};case "gtOp":return function(c,d){c=b(c,d);return c.V.value>c.W.value};case "geOp":return function(c,d){c=b(c,d);return c.V.value>=c.W.value}}}
function li(a,b){switch(a){case "ltOp":return function(c,d){c=b(c,d);return c.V.value.ga<c.W.value.ga};case "leOp":return function(c,d){d=b(c,d);c=d.V;d=d.W;return ec(c.value,d.value)||c.value.ga<d.value.ga};case "gtOp":return function(c,d){c=b(c,d);return c.V.value.ga>c.W.value.ga};case "geOp":return function(c,d){d=b(c,d);c=d.V;d=d.W;return ec(c.value,d.value)||c.value.ga>d.value.ga}}}
function mi(a,b){switch(a){case "eqOp":return function(c,d){c=b(c,d);return ec(c.V.value,c.W.value)};case "ltOp":return function(c,d){c=b(c,d);return c.V.value.ea<c.W.value.ea};case "leOp":return function(c,d){d=b(c,d);c=d.V;d=d.W;return ec(c.value,d.value)||c.value.ea<d.value.ea};case "gtOp":return function(c,d){c=b(c,d);return c.V.value.ea>c.W.value.ea};case "geOp":return function(c,d){d=b(c,d);c=d.V;d=d.W;return ec(c.value,d.value)||c.value.ea>d.value.ea}}}
function ni(a,b){switch(a){case "eqOp":return function(c,d){c=b(c,d);return ec(c.V.value,c.W.value)};case "neOp":return function(c,d){c=b(c,d);return!ec(c.V.value,c.W.value)}}}
function oi(a,b){switch(a){case "eqOp":return function(c,d,e){c=b(c,d);return vc(c.V.value,c.W.value,Jc(e))};case "neOp":return function(c,d,e){c=b(c,d);return!vc(c.V.value,c.W.value,Jc(e))};case "ltOp":return function(c,d,e){c=b(c,d);e=Jc(e);return 0>uc(c.V.value,c.W.value,e)};case "leOp":return function(c,d,e){d=b(c,d);c=d.V;d=d.W;var f;(f=vc(c.value,d.value,Jc(e)))||(e=Jc(e),f=0>uc(c.value,d.value,e));return f};case "gtOp":return function(c,d,e){c=b(c,d);e=Jc(e);return 0<uc(c.V.value,c.W.value,
e)};case "geOp":return function(c,d,e){d=b(c,d);c=d.V;d=d.W;var f;(f=vc(c.value,d.value,Jc(e)))||(e=Jc(e),f=0<uc(c.value,d.value,e));return f}}}function pi(a,b){switch(a){case "eqOp":return function(c,d,e){c=b(c,d);return vc(c.V.value,c.W.value,Jc(e))};case "neOp":return function(c,d,e){c=b(c,d);return!vc(c.V.value,c.W.value,Jc(e))}}}
function qi(a,b,c){function d(n,q){return{V:g?g(n):n,W:k?k(q):q}}function e(n){return C(b,n)&&C(c,n)}function f(n){return 0<n.filter(function(q){return C(b,q)}).length&&0<n.filter(function(q){return C(c,q)}).length}var g=null,k=null;C(b,19)&&C(c,19)?b=c=1:C(b,19)?(g=function(n){return Kd(n,c)},b=c):C(c,19)&&(k=function(n){return Kd(n,b)},c=b);if(C(b,23)&&C(c,23))return ji(a,d);if(e(0)||f([1,47,61])||f([2,47,61])||e(20)||e(22)||e(21)||f([1,20])){var l=ki(a,d);if(void 0!==l)return l}if(e(16)&&(l=li(a,
d),void 0!==l)||e(17)&&(l=mi(a,d),void 0!==l)||e(18)&&(l=ni(a,d),void 0!==l))return l;if(e(9)||e(7)||e(8))if(l=oi(a,d),void 0!==l)return l;if(e(11)||e(12)||e(13)||e(14)||e(15))if(l=pi(a,d),void 0!==l)return l;throw Error("XPTY0004: "+a+" not available for "+tb[b]+" and "+tb[c]);}var ri=Object.create(null);function si(a,b,c){var d=b+"~"+c+"~"+a,e=ri[d];e||(e=ri[d]=qi(a,b,c));return e}function ti(a,b,c){I.call(this,b.s.add(c.s),[b,c],{C:!1});this.j=b;this.B=c;this.u=a}x(ti,I);
ti.prototype.h=function(a,b){var c=this,d=J(this.j,a,b),e=J(this.B,a,b),f=ii(d,b),g=ii(e,b);return f.$({empty:function(){return E.empty()},o:function(){return g.$({empty:function(){return E.empty()},o:function(){var k=f.first(),l=g.first();return si(c.u,k.type,l.type)(k,l,a)?E.ca():E.X()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton.");}})},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton.");}})};var ui={},vi=(ui.equalOp="eqOp",ui.notEqualOp="neOp",ui.lessThanOrEqualOp="leOp",ui.lessThanOp="ltOp",ui.greaterThanOrEqualOp="geOp",ui.greaterThanOp="gtOp",ui);
function wi(a,b,c,d){a=vi[a];return c.L(function(e){return b.filter(function(f){for(var g=0,k=e.length;g<k;++g){var l=e[g],n=void 0,q=void 0,u=f.type,v=l.type;if(C(u,19)||C(v,19))C(u,2)?n=3:C(v,2)?q=3:C(u,17)?n=17:C(v,17)?q=17:C(u,16)?n=16:C(v,16)?q=16:C(u,19)?q=v:C(v,19)&&(n=u);q=t([q,n]);n=q.next().value;q=q.next().value;n?f=Kd(f,n):q&&(l=Kd(l,q));if(si(a,f.type,l.type)(f,l,d))return!0}return!1}).$({default:function(){return E.ca()},empty:function(){return E.X()}})})}
function xi(a,b,c){I.call(this,b.s.add(c.s),[b,c],{C:!1});this.j=b;this.B=c;this.u=a}x(xi,I);xi.prototype.h=function(a,b){var c=this,d=J(this.j,a,b),e=J(this.B,a,b);return d.$({empty:function(){return E.X()},default:function(){return e.$({empty:function(){return E.X()},default:function(){var f=ii(d,b),g=ii(e,b);return wi(c.u,f,g,a)}})}})};function yi(a,b,c,d){if(!C(c,53)||!C(d,53))throw Error("XPTY0004: Sequences to compare are not nodes");switch(a){case "isOp":return zi(c,d);case "nodeBeforeOp":return b?function(e,f){return 0>Td(b,e.first(),f.first())}:void 0;case "nodeAfterOp":return b?function(e,f){return 0<Td(b,e.first(),f.first())}:void 0;default:throw Error("Unexpected operator");}}
function zi(a,b){return a!==b||47!==a&&53!==a&&54!==a&&55!==a&&56!==a&&57!==a&&58!==a?function(){return!1}:function(c,d){return Nd(c.first().value,d.first().value)}}function Ai(a,b,c){I.call(this,b.s.add(c.s),[b,c],{C:!1});this.j=b;this.B=c;this.u=a}x(Ai,I);
Ai.prototype.h=function(a,b){var c=this,d=J(this.j,a,b),e=J(this.B,a,b);return d.$({empty:function(){return E.empty()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton");},o:function(){return e.$({empty:function(){return E.empty()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton");},o:function(){var f=d.first(),g=e.first();return yi(c.u,b.h,f.type,g.type)(d,e,a)?E.ca():E.X()}})}})};function Bi(a,b,c,d){return c.L(function(e){if(e.some(function(f){return!C(f.type,53)}))throw Error("XPTY0004: Sequences given to "+a+" should only contain nodes.");return"sorted"===d?E.create(e):"reverse-sorted"===d?E.create(e.reverse()):E.create(Ud(b,e))})}function Ci(a,b,c,d){I.call(this,0<zf(b.s,c.s)?b.s:c.s,[b,c],{C:b.C&&c.C},!1,d);this.j=a;this.u=b;this.B=c}x(Ci,I);
Ci.prototype.h=function(a,b){var c=this,d=Bi(this.j,b.h,J(this.u,a,b),this.u.O);a=Bi(this.j,b.h,J(this.B,a,b),this.B.O);var e=d.value,f=a.value,g=null,k=null,l=!1,n=!1;return E.create({next:function(){if(l)return z;for(;!n;){if(!g){var q=e.next(0);if(q.done)return l=!0,z;g=q.value}if(!k){q=f.next(0);if(q.done){n=!0;break}k=q.value}if(Nd(g.value,k.value)){if(q=B(g),k=g=null,"intersectOp"===c.j)return q}else if(0>Td(b.h,g,k)){if(q=B(g),g=null,"exceptOp"===c.j)return q}else k=null}if("exceptOp"===c.j)return null!==
g?(q=B(g),g=null,q):e.next(0);l=!0;return z}})};function Di(a,b){uf.call(this,a.reduce(function(c,d){return c.add(d.s)},new yf({})),a,{S:"unsorted",C:a.every(function(c){return c.C})},b)}x(Di,uf);Di.prototype.B=function(a,b,c){return c.length?Mc(c.map(function(d){return d(a)})):E.empty()};function Ei(a,b,c){I.call(this,(new yf({})).add(a.s),[a,b],{C:a.C&&b.C},!1,c);this.j=a;this.u=b}x(Ei,I);Ei.prototype.h=function(a,b){var c=this,d=J(this.j,a,b),e=Gc(a,d),f=null,g=null,k=!1;return E.create({next:function(l){for(;!k;){if(!f&&(f=e.next(l),f.done))return k=!0,z;g||(g=J(c.u,f.value,b));var n=g.value.next(l);if(n.done)f=g=null;else return n}}})};function Fi(a,b,c){I.call(this,a.s,[a],{C:!1});this.j=wb(b.prefix?b.prefix+":"+b.localName:b.localName);if(46===this.j||45===this.j||44===this.j)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(b.namespaceURI)throw Error("Not implemented: castable as expressions with a namespace URI.");this.B=a;this.u=c}x(Fi,I);
Fi.prototype.h=function(a,b){var c=this,d=Vc(J(this.B,a,b),b);return d.$({empty:function(){return c.u?E.ca():E.X()},o:function(){return d.map(function(e){return Jd(e,c.j).v?cb:db})},multiple:function(){return E.X()}})};function Gi(a,b,c){I.call(this,a.s,[a],{C:!1});this.j=wb(b.prefix?b.prefix+":"+b.localName:b.localName);if(46===this.j||45===this.j||44===this.j)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(b.namespaceURI)throw Error("Not implemented: casting expressions with a namespace URI.");this.B=a;this.u=c}x(Gi,I);
Gi.prototype.h=function(a,b){var c=this,d=Vc(J(this.B,a,b),b);return d.$({empty:function(){if(!c.u)throw Error("XPTY0004: Sequence to cast is empty while target type is singleton.");return E.empty()},o:function(){return d.map(function(e){return Kd(e,c.j)})},multiple:function(){throw Error("XPTY0004: Sequence to cast is not singleton or empty.");}})};function Hi(a,b){var c=a.value,d=null,e=!1;return E.create({next:function(){for(;!e;){if(!d){var f=c.next(0);if(f.done)return e=!0,B(cb);d=b(f.value)}f=d.getEffectiveBooleanValue();d=null;if(!1===f)return e=!0,B(db)}return z}})};function Ii(a,b,c,d){I.call(this,a.s,[a],{C:!1},!1,d);this.B=a;this.u=b;this.j=c}x(Ii,I);Ii.prototype.h=function(a,b){var c=this,d=J(this.B,a,b);return d.$({empty:function(){return"?"===c.j||"*"===c.j?E.ca():E.X()},multiple:function(){return"+"===c.j||"*"===c.j?Hi(d,function(e){var f=E.o(e);e=Hc(a,0,e,f);return J(c.u,e,b)}):E.X()},o:function(){return Hi(d,function(e){var f=E.o(e);e=Hc(a,0,e,f);return J(c.u,e,b)})}})};function Ji(a,b){return null!==a&&null!==b&&C(a.type,53)&&C(b.type,53)?Nd(a.value,b.value):!1}function Ki(a){var b=a.next(0);if(b.done)return E.empty();var c=null,d=null;return E.create({next:function(e){if(b.done)return z;c||(c=b.value.value);do{var f=c.next(e);if(f.done){b=a.next(0);if(b.done)return f;c=b.value.value}}while(f.done||Ji(f.value,d));d=f.value;return f}})}
function Li(a,b){var c=[];(function(){for(var g=b.next(0),k={};!g.done;)k.jb=g.value.value,g={current:k.jb.next(0),next:function(l){return function(n){return l.jb.next(n)}}(k)},g.current.done||c.push(g),g=b.next(0),k={jb:k.jb}})();var d=null,e=!1,f={};return E.create((f[Symbol.iterator]=function(){return this},f.next=function(){e||(e=!0,c.every(function(v){return C(v.current.value.type,53)})&&c.sort(function(v,A){return Td(a,v.current.value,A.current.value)}));do{if(!c.length)return z;var g=c.shift();
var k=g.current;g.current=g.next(0);if(!C(k.value.type,53))return k;if(!g.current.done){for(var l=0,n=c.length-1,q=0;l<=n;){q=Math.floor((l+n)/2);var u=Td(a,g.current.value,c[q].current.value);if(0===u){l=q;break}0<u?l=q+1:n=q-1}c.splice(l,0,g)}}while(Ji(k.value,d));d=k.value;return k},f))};function Mi(a,b){var c=a.reduce(function(d,e){return 0<zf(d,e.s)?d:e.s},new yf({}));I.call(this,c,a,{C:a.every(function(d){return d.C})},!1,b);this.j=a}x(Mi,I);
Mi.prototype.h=function(a,b){var c=this;if(this.j.every(function(e){return"sorted"===e.O})){var d=0;return Li(b.h,{next:function(){return d>=c.j.length?z:B(J(c.j[d++],a,b))}}).map(function(e){if(!C(e.type,53))throw Error("XPTY0004: The sequences to union are not of type node()*");return e})}return Mc(this.j.map(function(e){return J(e,a,b)})).L(function(e){if(e.some(function(f){return!C(f.type,53)}))throw Error("XPTY0004: The sequences to union are not of type node()*");e=Ud(b.h,e);return E.create(e)})};function Ni(a){return a.every(function(b){return null===b||C(b.type,5)||C(b.type,4)})||null!==a.map(function(b){return b?Wc(b.type):null}).reduce(function(b,c){return null===c?b:c===b?b:null})?a:a.every(function(b){return null===b||C(b.type,1)||C(b.type,20)})?a.map(function(b){return b?Kd(b,1):null}):a.every(function(b){return null===b||C(b.type,4)||C(b.type,6)})?a.map(function(b){return b?Kd(b,6):b}):a.every(function(b){return null===b||C(b.type,4)||C(b.type,6)||C(b.type,3)})?a.map(function(b){return b?
Kd(b,3):b}):null};function Oi(a){return(a=a.find(function(b){return!!b}))?Wc(a.type):null}function Pi(a,b){var c=new yf({});Vh.call(this,c,[b].concat(w(a.map(function(d){return d.da}))),{C:!1,Y:!1,S:"unsorted",subtree:!1},b);this.B=a}x(Pi,Vh);
Pi.prototype.J=function(a,b,c,d){if(this.B[1])throw Error("More than one order spec is not supported for the order by clause.");var e=[],f=!1,g,k,l=null,n=this.B[0];return E.create({next:function(){if(!f){for(var q=b.next(0);!q.done;)e.push(q.value),q=b.next(0);q=e.map(function(ea){return n.da.h(ea,c)}).map(function(ea){return Vc(ea,c)});if(q.find(function(ea){return!ea.G()&&!ea.ya()}))throw mg("Order by only accepts empty or singleton sequences");g=q.map(function(ea){return ea.first()});g=g.map(function(ea){return null===
ea?ea:C(19,ea.type)?Kd(ea,1):ea});if(Oi(g)&&(g=Ni(g),!g))throw mg("Could not cast values");q=g.length;k=g.map(function(ea,Ea){return Ea});for(var u=0;u<q;u++)if(u+1!==q)for(var v=u;0<=v;v--){var A=v,G=v+1;if(G!==q){var H=g[k[A]],L=g[k[G]];if(null!==L||null!==H){if(n.zc){if(null===H)continue;if(null===L&&null!==H){H=t([k[G],k[A]]);k[A]=H.next().value;k[G]=H.next().value;continue}if(isNaN(L.value)&&null!==H&&!isNaN(H.value)){H=t([k[G],k[A]]);k[A]=H.next().value;k[G]=H.next().value;continue}}else{if(null===
L)continue;if(null===H&&null!==L){H=t([k[G],k[A]]);k[A]=H.next().value;k[G]=H.next().value;continue}if(isNaN(H.value)&&null!==L&&!isNaN(L.value)){H=t([k[G],k[A]]);k[A]=H.next().value;k[G]=H.next().value;continue}}si("gtOp",H.type,L.type)(H,L,a)&&(H=t([k[G],k[A]]),k[A]=H.next().value,k[G]=H.next().value)}}}var fa=n.Gb?0:g.length-1;l=d({next:function(){return n.Gb?fa>=g.length?z:B(e[k[fa++]]):0>fa?z:B(e[k[fa--]])}}).value;f=!0}return l.next(0)}})};function Qi(a){I.call(this,a?a.s:new yf({}),a?[a]:[],{S:"sorted",subtree:!1,Y:!1,C:!1});this.j=a}x(Qi,I);Qi.prototype.h=function(a,b){if(null===a.N)throw Error("XPDY0002: context is absent, it needs to be present to use paths.");for(var c=b.h,d=a.N.value;9!==d.node.nodeType;)if(d=Ub(c,d),null===d)throw Error("XPDY0050: the root node of the context node is not a document node.");c=E.o(Zb(d));return this.j?J(this.j,Hc(a,0,c.first(),c),b):c};function Ri(a){I.call(this,new yf({}),[],{S:"sorted"},!1,a)}x(Ri,I);Ri.prototype.h=function(a){if(null===a.N)throw Error('XPDY0002: context is absent, it needs to be present to use the "." operator');return E.o(a.N)};function Si(a,b){var c=!1,d=!1;b.forEach(function(e){C(e.type,53)?c=!0:d=!0});if(d&&c)throw Error("XPTY0018: The path operator should either return nodes or non-nodes. Mixed sequences are not allowed.");return c?Ud(a,b):b}function Ti(a,b){var c=a.every(function(e){return e.Y}),d=a.every(function(e){return e.subtree});I.call(this,a.reduce(function(e,f){return e.add(f.s)},new yf({})),a,{C:!1,Y:c,S:b?"sorted":"unsorted",subtree:d});this.j=a;this.u=b}x(Ti,I);
Ti.prototype.h=function(a,b){var c=this,d=!0;return this.j.reduce(function(e,f,g){var k=null===e?Ld(a):Gc(a,e);e={next:function(q){q=k.next(q);if(q.done)return z;if(null!==q.value.N&&!C(q.value.N.type,53)&&0<g)throw Error("XPTY0019: The result of E1 in a path expression E1/E2 should not evaluate to a sequence of nodes.");return B(J(f,q.value,b))}};if(c.u)switch(f.O){case "reverse-sorted":var l=e;e={next:function(q){q=l.next(q);return q.done?q:B(q.value.L(function(u){return E.create(u.reverse())}))}};
case "sorted":if(f.subtree&&d){var n=Ki(e);break}n=Li(b.h,e);break;case "unsorted":return Ki(e).L(function(q){return E.create(Si(b.h,q))})}else n=Ki(e);d=d&&f.Y;return n},null)};Ti.prototype.A=function(){return this.j[0].A()};function Ui(a,b){I.call(this,a.s.add(b.s),[a,b],{C:a.C&&b.C,Y:a.Y,S:a.O,subtree:a.subtree});this.u=a;this.j=b}x(Ui,I);
Ui.prototype.h=function(a,b){var c=this,d=J(this.u,a,b);if(this.j.C){var e=J(this.j,a,b);if(e.G())return e;var f=e.first();if(C(f.type,2)){var g=f.value;if(!Number.isInteger(g))return E.empty();var k=d.value,l=!1;return E.create({next:function(){if(!l){for(var A=k.next(0);!A.done;A=k.next(0))if(1===g--)return l=!0,A;l=!0}return z}})}return e.getEffectiveBooleanValue()?d:E.empty()}var n=d.value,q=null,u=0,v=null;return E.create({next:function(A){for(var G=!1;!q||!q.done;){q||(q=n.next(G?0:A),G=!0);
if(q.done)break;v||(v=J(c.j,Hc(a,u,q.value,d),b));var H=v.first();H=null===H?!1:C(H.type,2)?H.value===u+1:v.getEffectiveBooleanValue();v=null;var L=q.value;q=null;u++;if(H)return B(L)}return q}})};Ui.prototype.A=function(){return this.u.A()};function Vi(a,b,c){c=[c];if(C(a.type,62))if("*"===b)c.push.apply(c,w(a.R.map(function(e){return e()})));else if(C(b.type,5)){var d=b.value;if(a.R.length<d||0>=d)throw Error("FOAY0001: Array index out of bounds");c.push(a.R[d-1]())}else throw mg("The key specifier is not an integer.");else if(C(a.type,61))"*"===b?c.push.apply(c,w(a.h.map(function(e){return e.value()}))):(a=a.h.find(function(e){return ac(e.key,b)}))&&c.push(a.value());else throw mg("The provided context item is not a map or an array.");
return Mc(c)}function Wi(a,b,c,d,e){if("*"===b)return Vi(a,b,c);b=J(b,d,e);b=rb(b)().L(function(f){return f.reduce(function(g,k){return Vi(a,k,g)},new kb)});return Mc([c,b])};function Xi(a,b){I.call(this,a.s,[a].concat("*"===b?[]:[b]),{C:a.C,S:a.O,subtree:a.subtree});this.j=a;this.u=b}x(Xi,I);Xi.prototype.h=function(a,b){var c=this;return J(this.j,a,b).L(function(d){return d.reduce(function(e,f){return Wi(f,c.u,e,a,b)},new kb)})};Xi.prototype.A=function(){return this.j.A()};function Yi(a,b){var c={};I.call(this,new yf((c.external=1,c)),"*"===a?[]:[a],{C:!1},!1,b);this.j=a}x(Yi,I);Yi.prototype.h=function(a,b){return Wi(a.N,this.j,new kb,a,b)};function Zi(a,b,c,d){var e=b.map(function(g){return g.eb});b=b.map(function(g){return g.name});var f=e.reduce(function(g,k){return g.add(k.s)},c.s);I.call(this,f,e.concat(c),{C:!1},!1,d);this.u=a;this.B=b;this.J=e;this.T=c;this.j=null}x(Zi,I);
Zi.prototype.h=function(a,b){var c=this,d=a,e=this.j.map(function(q,u){var v=J(c.J[u],d,b).M();u={};d=Kc(a,(u[q]=function(){return E.create(v)},u));return v});if(e.some(function(q){return 0===q.length}))return"every"===this.u?E.ca():E.X();var f=Array(e.length).fill(0);f[0]=-1;for(var g=!0;g;){g=!1;for(var k=0,l=f.length;k<l;++k){var n=e[k];if(++f[k]>n.length-1)f[k]=0;else{g=Object.create(null);k={};for(l=0;l<f.length;k={ub:k.ub},l++)k.ub=e[l][f[l]],g[this.j[l]]=function(q){return function(){return E.o(q.ub)}}(k);
g=Kc(a,g);g=J(this.T,g,b);if(g.getEffectiveBooleanValue()&&"some"===this.u)return E.ca();if(!g.getEffectiveBooleanValue()&&"every"===this.u)return E.X();g=!0;break}}}return"every"===this.u?E.ca():E.X()};Zi.prototype.P=function(a){this.j=[];for(var b=0,c=this.B.length;b<c;++b){this.J[b].P(a);yg(a);var d=this.B[b],e=d.prefix?a.ba(d.prefix):null;d=Cg(a,e,d.localName);this.j[b]=d}this.T.P(a);b=0;for(c=this.B.length;b<c;++b)Eg(a)};function $i(a){I.call(this,a,[],{C:!1})}x($i,I);$i.prototype.h=function(a){return this.j(a.N)?E.ca():E.X()};function aj(a){var b={};$i.call(this,new yf((b.nodeType=1,b)));this.u=a}x(aj,$i);aj.prototype.j=function(a){if(!C(a.type,53))return!1;a=a.value.node.nodeType;return 3===this.u&&4===a?!0:this.u===a};aj.prototype.A=function(){return"type-"+this.u};function bj(a,b){b=void 0===b?{kind:null}:b;var c=a.prefix,d=a.namespaceURI;a=a.localName;var e={};"*"!==a&&(e.nodeName=1);e.nodeType=1;$i.call(this,new yf(e));this.u=a;this.J=d;this.B=c;this.T=b.kind}x(bj,$i);
bj.prototype.j=function(a){var b=C(a.type,54),c=C(a.type,47);if(!b&&!c)return!1;a=a.value;return null!==this.T&&(1===this.T&&!b||2===this.T&&!c)?!1:null===this.B&&""!==this.J&&"*"===this.u?!0:"*"===this.B?"*"===this.u?!0:this.u===a.node.localName:"*"!==this.u&&this.u!==a.node.localName?!1:(a.node.namespaceURI||null)===((""===this.B?b?this.J:null:this.J)||null)};bj.prototype.A=function(){return"*"===this.u?null===this.T?"type-1-or-type-2":"type-"+this.T:"name-"+this.u};
bj.prototype.P=function(a){if(null===this.J&&"*"!==this.B&&(this.J=a.ba(this.B||"")||null,!this.J&&this.B))throw Error("XPST0081: The prefix "+this.B+" could not be resolved.");};function cj(a){var b={};$i.call(this,new yf((b.nodeName=1,b)));this.u=a}x(cj,$i);cj.prototype.j=function(a){return C(a.type,57)&&a.value.node.target===this.u};cj.prototype.A=function(){return"type-7"};function dj(a){$i.call(this,new yf({}));this.u=a}x(dj,$i);dj.prototype.j=function(a){return C(a.type,wb(this.u.prefix?this.u.prefix+":"+this.u.localName:this.u.localName))};function ej(a,b,c){I.call(this,new yf({}),[],{C:!1,S:"unsorted"});this.B=c;this.u=b;this.J=a;this.j=null}x(ej,I);ej.prototype.h=function(a,b){if(!a.Ea[this.j]){if(this.T)return this.T(a,b);throw Error("XQDY0054: The variable "+this.B+" is declared but not in scope.");}return a.Ea[this.j]()};ej.prototype.P=function(a){null===this.u&&this.J&&(this.u=a.ba(this.J));this.j=a.qb(this.u||"",this.B);if(!this.j)throw Error("XPST0008, The variable "+this.B+" is not in scope.");if(a=a.Da[this.j])this.T=a};function fj(a,b){var c=new yf({});Vh.call(this,c,[a,b],{C:!1,Y:!1,S:"unsorted",subtree:!1},b);this.B=a}x(fj,Vh);fj.prototype.J=function(a,b,c,d){var e=this,f=null,g=null;return d({next:function(){for(;;){if(!g){var k=b.next(0);if(k.done)return z;f=k.value;g=J(e.B,f,c)}k=g.getEffectiveBooleanValue();var l=f;g=f=null;if(k)return B(l)}}})};function gj(a,b){var c=b.h,d=b.s,e=b.A;switch(a.node.nodeType){case 1:var f=d.createElementNS(a.node.namespaceURI,a.node.nodeName);c.getAllAttributes(a.node).forEach(function(g){return e.setAttributeNS(f,g.namespaceURI,g.nodeName,g.value)});d=t(Pb(c,a));for(a=d.next();!a.done;a=d.next())a=gj(a.value,b),e.insertBefore(f,a.node,null);return{node:f,F:null};case 2:return b=d.createAttributeNS(a.node.namespaceURI,a.node.nodeName),b.value=Qb(c,a),{node:b,F:null};case 4:return{node:d.createCDATASection(Qb(c,
a)),F:null};case 8:return{node:d.createComment(Qb(c,a)),F:null};case 9:d=d.createDocument();c=t(Pb(c,a));for(a=c.next();!a.done;a=c.next())a=gj(a.value,b),e.insertBefore(d,a.node,null);return{node:d,F:null};case 7:return{node:d.createProcessingInstruction(a.node.target,Qb(c,a)),F:null};case 3:return{node:d.createTextNode(Qb(c,a)),F:null}}};function hj(a,b){var c=b.A,d=b.s,e=b.h;if(Kb(a.node))switch(a.node.nodeType){case 2:return d=d.createAttributeNS(a.node.namespaceURI,a.node.nodeName),d.value=Qb(e,a),d;case 8:return d.createComment(Qb(e,a));case 1:var f=a.node.prefix,g=a.node.localName,k=d.createElementNS(a.node.namespaceURI,f?f+":"+g:g);Pb(e,a).forEach(function(l){l=hj(l,b);c.insertBefore(k,l,null)});Nb(e,a).forEach(function(l){c.setAttributeNS(k,l.node.namespaceURI,l.node.nodeName,Qb(e,l))});k.normalize();return k;case 7:return d.createProcessingInstruction(a.node.target,
Qb(e,a));case 3:return d.createTextNode(Qb(e,a))}else return gj(a,b).node}function ij(a,b,c){var d=a;for(a=Ub(c,d);null!==a;){if(2===d.node.nodeType)b.push(d.node.nodeName);else{var e=Pb(c,a);b.push(e.findIndex(function(f){return Nd(f,d)}))}d=a;a=Ub(c,d)}return d}function jj(a,b,c){for(var d={};0<b.length;)d.Xa=b.pop(),"string"===typeof d.Xa?a=Nb(c,a).find(function(e){return function(f){return f.node.nodeName===e.Xa}}(d)):a=Pb(c,a)[d.Xa],d={Xa:d.Xa};return a.node}
function kj(a,b,c){var d=a.node;if(!(Kb(d)||c||a.F))return d;d=b.ha;var e=[];if(c)return hj(a,b);a=ij(a,e,b.h);c=d.get(a.node);c||(c={node:hj(a,b),F:null},d.set(a.node,c));return jj(c,e,b.h)};function lj(a){this.type=a};function mj(a){this.type="delete";this.target=a}x(mj,lj);mj.prototype.h=function(a){var b={};return b.type=this.type,b.target=kj(this.target,a,!1),b};function nj(a,b,c){this.type=c;this.target=a;this.content=b}x(nj,lj);nj.prototype.h=function(a){var b={};return b.type=this.type,b.target=kj(this.target,a,!1),b.content=this.content.map(function(c){return kj(c,a,!0)}),b};function oj(a,b){nj.call(this,a,b,"insertAfter")}x(oj,nj);function pj(a,b){this.type="insertAttributes";this.target=a;this.content=b}x(pj,lj);pj.prototype.h=function(a){var b={};return b.type=this.type,b.target=kj(this.target,a,!1),b.content=this.content.map(function(c){return kj(c,a,!0)}),b};function qj(a,b){nj.call(this,a,b,"insertBefore")}x(qj,nj);function rj(a,b){nj.call(this,a,b,"insertIntoAsFirst")}x(rj,nj);function sj(a,b){nj.call(this,a,b,"insertIntoAsLast")}x(sj,nj);function tj(a,b){nj.call(this,a,b,"insertInto")}x(tj,nj);function uj(a,b){this.type="rename";this.target=a;this.s=b.va?b:new Ab(b.prefix,b.namespaceURI,b.localName)}x(uj,lj);uj.prototype.h=function(a){var b={},c={};return c.type=this.type,c.target=kj(this.target,a,!1),c.newName=(b.prefix=this.s.prefix,b.namespaceURI=this.s.namespaceURI,b.localName=this.s.localName,b),c};function vj(a,b){this.type="replaceElementContent";this.target=a;this.text=b}x(vj,lj);vj.prototype.h=function(a){var b={};return b.type=this.type,b.target=kj(this.target,a,!1),b.text=this.text?kj(this.text,a,!0):null,b};function wj(a,b){this.type="replaceNode";this.target=a;this.s=b}x(wj,lj);wj.prototype.h=function(a){var b={};return b.type=this.type,b.target=kj(this.target,a,!1),b.replacement=this.s.map(function(c){return kj(c,a,!0)}),b};function xj(a,b){this.type="replaceValue";this.target=a;this.s=b}x(xj,lj);xj.prototype.h=function(a){var b={};return b.type=this.type,b.target=kj(this.target,a,!1),b["string-value"]=this.s,b};function yj(a,b){return new wj(a,b)};function zj(a){rf.call(this,new yf({}),[a],{C:!1,S:"unsorted"});this.j=a}x(zj,rf);zj.prototype.u=function(a,b){var c=sf(this.j)(a,b),d=b.h,e,f;return{next:function(){if(!e){var g=c.next(0);if(g.value.H.some(function(k){return!C(k.type,53)}))throw Error("XUTY0007: The target of a delete expression must be a sequence of zero or more nodes.");e=g.value.H;f=g.value.fa}e=e.filter(function(k){return Ub(d,k.value)});return B({fa:qf(e.map(function(k){return new mj(k.value)}),f),H:[]})}}};function Aj(a,b,c,d,e,f){var g=b.h;a.reduce(function q(l,n){if(C(n.type,62))return n.R.forEach(function(u){return u().M().forEach(function(v){return q(l,v)})}),l;l.push(n);return l},[]).forEach(function(l,n,q){if(C(l.type,47)){if(e)throw f(l.value,g);c.push(l.value.node)}else if(C(l.type,46)||C(l.type,53)&&3===l.value.node.nodeType){var u=C(l.type,46)?Kd(Uc(l,b).first(),1).value:Qb(g,l.value);0!==n&&C(q[n-1].type,46)&&C(l.type,46)?(d.push({data:" "+u,Qa:!0,nodeType:3}),e=!0):u&&(d.push({data:""+u,
Qa:!0,nodeType:3}),e=!0)}else if(C(l.type,55)){var v=[];Pb(g,l.value).forEach(function(A){return v.push(Zb(A))});e=Aj(v,b,c,d,e,f)}else if(C(l.type,53))d.push(l.value.node),e=!0;else{if(C(l.type,60))throw Pc(l.type);throw Error("Atomizing "+l.type+" is not implemented.");}});return e}function Bj(a,b,c){var d=[],e=[],f=!1;a.forEach(function(g){f=Aj(g,b,d,e,f,c)});return{attributes:d,Ta:e}};function Cj(a,b,c,d,e){var f=[];switch(a){case 4:d.length&&f.push(new pj(b,d));e.length&&f.push(new rj(b,e));break;case 5:d.length&&f.push(new pj(b,d));e.length&&f.push(new sj(b,e));break;case 3:d.length&&f.push(new pj(b,d));e.length&&f.push(new tj(b,e));break;case 2:d.length&&f.push(new pj(c,d));e.length&&f.push(new qj(b,e));break;case 1:d.length&&f.push(new pj(c,d)),e.length&&f.push(new oj(b,e))}return f}
function Dj(a,b,c){rf.call(this,new yf({}),[a,c],{C:!1,S:"unsorted"});this.J=a;this.j=b;this.B=c}x(Dj,rf);
Dj.prototype.u=function(a,b){var c=this,d=sf(this.J)(a,b),e=sf(this.B)(a,b),f=b.h,g,k,l,n,q,u;return{next:function(){if(!g){var v=d.next(0),A=Bj([v.value.H],b,Ue);g=A.attributes.map(function(G){return{node:G,F:null}});k=A.Ta.map(function(G){return{node:G,F:null}});l=v.value.fa}if(!n){v=e.next(0);if(0===v.value.H.length)throw cf();if(3<=c.j){if(1!==v.value.H.length)throw Ve();if(!C(v.value.H[0].type,54)&&!C(v.value.H[0].type,55))throw Ve();}else{if(1!==v.value.H.length)throw We();if(!(C(v.value.H[0].type,
54)||C(v.value.H[0].type,56)||C(v.value.H[0].type,58)||C(v.value.H[0].type,57)))throw We();u=Ub(f,v.value.H[0].value,null);if(null===u)throw Error("XUDY0029: The target "+v.value.H[0].value.outerHTML+" for inserting a node before or after must have a parent.");}n=v.value.H[0];q=v.value.fa}if(g.length){if(3<=c.j){if(!C(n.type,54))throw Error("XUTY0022: An insert expression specifies the insertion of an attribute node into a document node.");}else if(1!==u.node.nodeType)throw Error("XUDY0030: An insert expression specifies the insertion of an attribute node before or after a child of a document node.");
g.reduce(function(G,H){var L=H.node.prefix||"",fa=H.node.prefix||"",ea=H.node.namespaceURI,Ea=fa?n.value.node.lookupNamespaceURI(fa):null;if(Ea&&Ea!==ea)throw af(ea);if((fa=G[fa])&&ea!==fa)throw bf(ea);G[L]=H.node.namespaceURI;return G},{})}return B({H:[],fa:qf(Cj(c.j,n.value,u?u:null,g,k),l,q)})}}};function Ej(){return Oc("Casting not supported from given type to a single xs:string or xs:untypedAtomic or any of its derived types.")}var Fj=/([A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])/,Gj=new RegExp(Fj.source+(new RegExp("("+Fj.source+"|[-.0-9\u00b7\u0300-\u036f\u203f\u2040])")).source+"*","g");function Hj(a){return(a=a.match(Gj))?1===a.length:!1}
function Ij(a,b){return Vc(b,a).$({o:function(c){c=c.first();if(C(c.type,1)||C(c.type,19)){if(!Hj(c.value))throw Error('XQDY0041: The value "'+c.value+'" of a name expressions cannot be converted to a NCName.');return E.o(c)}throw Ej();},default:function(){throw Ej();}}).value}
function Jj(a,b,c){return Vc(c,b).$({o:function(d){d=d.first();if(C(d.type,23))return E.o(d);if(C(d.type,1)||C(d.type,19)){d=d.value.split(":");if(1===d.length)d=d[0];else{var e=d[0];var f=a.ba(e);d=d[1]}if(!Hj(d)||e&&!Hj(e))throw tg(e?e+":"+d:d);if(e&&!f)throw tg(e+":"+d);return E.o({type:23,value:new Ab(e,f,d)})}throw Ej();},default:function(){throw Ej();}}).value};function Kj(a,b){rf.call(this,new yf({}),[a,b],{C:!1,S:"unsorted"});this.B=a;this.J=b;this.j=void 0}x(Kj,rf);
Kj.prototype.u=function(a,b){var c=this,d=sf(this.B)(a,b),e=sf(this.J)(a,b);return{next:function(){var f=d.next(0);var g=f.value.H;if(0===g.length)throw cf();if(1!==g.length)throw Ye();if(!C(g[0].type,54)&&!C(g[0].type,47)&&!C(g[0].type,57))throw Ye();g=g[0];var k=e.next(0);a:{var l=c.j;var n=E.create(k.value.H);switch(g.type){case 54:l=Jj(l,b,n).next(0).value.value;if((n=g.value.node.lookupNamespaceURI(l.prefix))&&n!==l.namespaceURI)throw af(l.namespaceURI);break a;case 47:l=Jj(l,b,n).next(0).value.value;
if(l.namespaceURI&&(n=g.value.node.lookupNamespaceURI(l.prefix))&&n!==l.namespaceURI)throw af(l.namespaceURI);break a;case 57:l=Ij(b,n).next(0).value.value;l=new Ab("",null,l);break a}l=void 0}return B({H:[],fa:qf([new uj(g.value,l)],f.value.fa,k.value.fa)})}}};Kj.prototype.P=function(a){this.j=Ff(a);rf.prototype.P.call(this,a)};function Lj(a,b,c){var d,e,f;return{next:function(){if(!d){var g=c.next(0),k=Bj([g.value.H],a,bf);d={attributes:k.attributes.map(function(l){return{node:l,F:null}}),Ta:k.Ta.map(function(l){return{node:l,F:null}})};e=g.value.fa}k=b.next(0);if(0===k.value.H.length)throw cf();if(1!==k.value.H.length)throw Xe();if(!(C(k.value.H[0].type,54)||C(k.value.H[0].type,47)||C(k.value.H[0].type,56)||C(k.value.H[0].type,58)||C(k.value.H[0].type,57)))throw Xe();f=Ub(a.h,k.value.H[0].value,null);if(null===f)throw Error("XUDY0009: The target "+
k.value.H[0].value.outerHTML+" for replacing a node must have a parent.");g=k.value.H[0];k=k.value.fa;if(C(g.type,47)){if(d.Ta.length)throw Error("XUTY0011: When replacing an attribute the new value must be zero or more attribute nodes.");d.attributes.reduce(function(l,n){var q=n.node.prefix||"";n=n.node.namespaceURI;var u=f.node.lookupNamespaceURI(q);if(u&&u!==n)throw af(n);if((u=l[q])&&n!==u)throw bf(n);l[q]=n;return l},{})}else if(d.attributes.length)throw Error("XUTY0010: When replacing an an element, text, comment, or processing instruction node the new value must be a single node.");
return B({H:[],fa:qf([yj(g.value,[].concat(d.attributes,d.Ta))],e,k)})}}}
function Mj(a,b,c){var d,e,f,g,k=!1;return{next:function(){if(k)return z;if(!f){var l=c.next(0),n=Vc(E.create(l.value.H),a).map(function(q){return Kd(q,1)}).M().map(function(q){return q.value}).join(" ");f=0===n.length?null:{node:a.s.createTextNode(n),F:null};g=l.value.fa}if(!d){l=b.next(0);if(0===l.value.H.length)throw cf();if(1!==l.value.H.length)throw Xe();if(!(C(l.value.H[0].type,54)||C(l.value.H[0].type,47)||C(l.value.H[0].type,56)||C(l.value.H[0].type,58)||C(l.value.H[0].type,57)))throw Xe();
d=l.value.H[0];e=l.value.fa}if(C(d.type,54))return k=!0,B({H:[],fa:qf([new vj(d.value,f)],g,e)});if(C(d.type,47)||C(d.type,56)||C(d.type,58)||C(d.type,57)){l=f?Qb(a.h,f):"";if(C(d.type,58)&&(l.includes("--")||l.endsWith("-")))throw Error('XQDY0072: The content "'+l+'" for a comment node contains two adjacent hyphens or ends with a hyphen.');if(C(d.type,57)&&l.includes("?>"))throw Error('XQDY0026: The content "'+l+'" for a processing instruction node contains "?>".');k=!0;return B({H:[],fa:qf([new xj(d.value,
l)],g,e)})}}}}function Nj(a,b,c){rf.call(this,new yf({}),[b,c],{C:!1,S:"unsorted"});this.J=a;this.j=b;this.B=c}x(Nj,rf);Nj.prototype.u=function(a,b){var c=sf(this.j)(a,b);a=sf(this.B)(a,b);return this.J?Mj(b,c,a):Lj(b,c,a)};function Oj(a){switch(a.type){case "delete":return new mj({node:a.target,F:null});case "insertAfter":return new oj({node:a.target,F:null},a.content.map(function(b){return{node:b,F:null}}));case "insertBefore":return new qj({node:a.target,F:null},a.content.map(function(b){return{node:b,F:null}}));case "insertInto":return new tj({node:a.target,F:null},a.content.map(function(b){return{node:b,F:null}}));case "insertIntoAsFirst":return new rj({node:a.target,F:null},a.content.map(function(b){return{node:b,
F:null}}));case "insertIntoAsLast":return new sj({node:a.target,F:null},a.content.map(function(b){return{node:b,F:null}}));case "insertAttributes":return new pj({node:a.target,F:null},a.content.map(function(b){return{node:b,F:null}}));case "rename":return new uj({node:a.target,F:null},a.newName);case "replaceNode":return new wj({node:a.target,F:null},a.replacement.map(function(b){return{node:b,F:null}}));case "replaceValue":return new xj({node:a.target,F:null},a["string-value"]);case "replaceElementContent":return new vj({node:a.target,
F:null},a.text?{node:a.text,F:null}:null);default:throw Error('Unexpected type "'+a.type+'" when parsing a transferable pending update.');}};function Pj(a,b,c){if(b.find(function(e){return Nd(e,a)}))return!0;var d=Ub(c,a);return d?Pj(d,b,c):!1}function Qj(a,b,c){rf.call(this,new yf({}),a.reduce(function(d,e){d.push(e.eb);return d},[b,c]),{C:!1,S:"unsorted"});this.j=a;this.J=b;this.B=c;this.I=null}x(Qj,rf);Qj.prototype.h=function(a,b){a=this.u(a,b);return tf(a,function(){})};
Qj.prototype.u=function(a,b){var c=this,d=b.h,e=b.s,f=b.A,g=[],k,l,n,q=[],u=[];return{next:function(){if(q.length!==c.j.length)for(var v={},A=q.length;A<c.j.length;v={gb:v.gb},A++){var G=c.j[A],H=g[A];H||(g[A]=H=sf(G.eb)(a,b));H=H.next(0);if(1!==H.value.H.length||!C(H.value.H[0].type,53))throw Error("XUTY0013: The source expression of a copy modify expression must return a single node.");v.gb=Zb(gj(H.value.H[0].value,b));q.push(v.gb.value);u.push(H.value.fa);H={};a=Kc(a,(H[G.Ec]=function(L){return function(){return E.o(L.gb)}}(v),
H))}n||(k||(k=sf(c.J)(a,b)),n=k.next(0).value.fa);n.forEach(function(L){if(L.target&&!Pj(L.target,q,d))throw Error("XUDY0014: The target "+L.target.node.outerHTML+" must be a node created by the copy clause.");if("put"===L.type)throw Error("XUDY0037: The modify expression of a copy modify expression can not contain a fn:put.");});v=n.map(function(L){L=L.h(b);return Oj(L)});of(v,d,e,f);l||(l=sf(c.B)(a,b));v=l.next(0);return B({H:v.value.H,fa:qf.apply(null,[v.value.fa].concat(w(u)))})}}};
Qj.prototype.P=function(a){yg(a);this.j.forEach(function(b){return b.Ec=Cg(a,b.Nb.namespaceURI,b.Nb.localName)});rf.prototype.P.call(this,a);Eg(a);this.I=this.j.some(function(b){return b.eb.I})||this.B.I};function Rj(a,b){return{node:{nodeType:2,Qa:!0,nodeName:a.va(),namespaceURI:a.namespaceURI,prefix:a.prefix,localName:a.localName,name:a.va(),value:b},F:null}}function Sj(a,b){var c=b.tb||[];c=c.concat(a.Ka||[]);I.call(this,new yf({}),c,{C:!1,S:"unsorted"});a.Ka?this.u=a.Ka:this.name=new Ab(a.prefix,a.namespaceURI,a.localName);this.j=b;this.B=void 0}x(Sj,I);
Sj.prototype.h=function(a,b){var c=this,d,e,f,g=!1;return E.create({next:function(){if(g)return z;if(!e){if(c.u){if(!d){var k=c.u.h(a,b);d=Jj(c.B,b,k)}e=d.next(0).value.value}else e=c.name;if(e){if("xmlns"===e.prefix)throw og(e);if(""===e.prefix&&"xmlns"===e.localName)throw og(e);if("http://www.w3.org/2000/xmlns/"===e.namespaceURI)throw og(e);if("xml"===e.prefix&&"http://www.w3.org/XML/1998/namespace"!==e.namespaceURI)throw og(e);if(""!==e.prefix&&"xml"!==e.prefix&&"http://www.w3.org/XML/1998/namespace"===
e.namespaceURI)throw og(e);}}if(c.j.tb)return k=c.j.tb,f||(f=Mc(k.map(function(l){return Vc(l.h(a,b),b).L(function(n){return E.o(y(n.map(function(q){return q.value}).join(" "),1))})})).L(function(l){return E.o(Zb(Rj(e,l.map(function(n){return n.value}).join(""))))}).value),f.next(0);g=!0;return B(Zb(Rj(e,c.j.value)))}})};
Sj.prototype.P=function(a){this.B=Ff(a);if(this.name&&this.name.prefix&&!this.name.namespaceURI){var b=a.ba(this.name.prefix);if(void 0===b&&this.name.prefix)throw Qc(this.name.prefix);this.name.namespaceURI=b||null}I.prototype.P.call(this,a)};function Tj(a){I.call(this,a?a.s:new yf({}),a?[a]:[],{C:!1,S:"unsorted"});this.j=a}x(Tj,I);Tj.prototype.h=function(a,b){var c={data:"",Qa:!0,nodeType:8},d={node:c,F:null};if(!this.j)return E.o(Zb(d));a=J(this.j,a,b);return Vc(a,b).L(function(e){e=e.map(function(f){return Kd(f,1).value}).join(" ");if(-1!==e.indexOf("--\x3e"))throw Error('XQDY0072: The contents of the data of a comment may not include "--\x3e"');c.data=e;return E.o(Zb(d))})};function Uj(a,b,c,d){I.call(this,new yf({}),d.concat(b).concat(a.Ka||[]),{C:!1,S:"unsorted"});a.Ka?this.u=a.Ka:this.j=new Ab(a.prefix,a.namespaceURI,a.localName);this.T=c.reduce(function(e,f){if(f.prefix in e)throw Error("XQST0071: The namespace declaration with the prefix "+f.prefix+" has already been declared on the constructed element.");e[f.prefix||""]=f.uri;return e},{});this.J=b;this.ka=d;this.B=void 0}x(Uj,I);
Uj.prototype.h=function(a,b){var c=this,d=!1,e,f,g=!1,k,l,n,q=!1;return E.create({next:function(){if(q)return z;d||(e||(e=Mc(c.J.map(function(L){return J(L,a,b)}))),f=e.M(),d=!0);if(!g){k||(k=c.ka.map(function(L){return J(L,a,b)}));for(var u=[],v=0;v<k.length;v++){var A=k[v].M();u.push(A)}l=u;g=!0}c.u&&(n||(u=c.u.h(a,b),n=Jj(c.B,b,u)),u=n.next(0),c.j=u.value.value);if("xmlns"===c.j.prefix||"http://www.w3.org/2000/xmlns/"===c.j.namespaceURI||"xml"===c.j.prefix&&"http://www.w3.org/XML/1998/namespace"!==
c.j.namespaceURI||c.j.prefix&&"xml"!==c.j.prefix&&"http://www.w3.org/XML/1998/namespace"===c.j.namespaceURI)throw Error('XQDY0096: The node name "'+c.j.va()+'" is invalid for a computed element constructor.');var G={nodeType:1,Qa:!0,attributes:[],childNodes:[],nodeName:c.j.va(),namespaceURI:c.j.namespaceURI,prefix:c.j.prefix,localName:c.j.localName};u={node:G,F:null};f.forEach(function(L){G.attributes.push(L.value.node)});v=Bj(l,b,ng);v.attributes.forEach(function(L){if(G.attributes.find(function(fa){return fa.namespaceURI===
L.namespaceURI&&fa.localName===L.localName}))throw Error("XQDY0025: The attribute "+L.name+" does not have an unique name in the constructed element.");G.attributes.push(L)});v.Ta.forEach(function(L){G.childNodes.push(L)});for(v=0;v<G.childNodes.length;v++)if(A=G.childNodes[v],Kb(A)&&3===A.nodeType){var H=G.childNodes[v-1];H&&Kb(H)&&3===H.nodeType&&(H.data+=A.data,G.childNodes.splice(v,1),v--)}q=!0;return B(Zb(u))}})};
Uj.prototype.P=function(a){var b=this;yg(a);Object.keys(this.T).forEach(function(d){return Bg(a,d,b.T[d])});this.ha.forEach(function(d){return d.P(a)});this.J.reduce(function(d,e){if(e.name){e="Q{"+(null===e.name.namespaceURI?a.ba(e.name.prefix):e.name.namespaceURI)+"}"+e.name.localName;if(d.includes(e))throw Error("XQST0040: The attribute "+e+" does not have an unique name in the constructed element.");d.push(e)}return d},[]);if(this.j&&null===this.j.namespaceURI){var c=a.ba(this.j.prefix);if(void 0===
c&&this.j.prefix)throw Qc(this.j.prefix);this.j.namespaceURI=c}this.B=Ff(a);Eg(a)};function Vj(a){if(/^xml$/i.test(a))throw Error('XQDY0064: The target of a created PI may not be "'+a+'"');}function Wj(a,b){return{node:{data:b,Qa:!0,nodeName:a,nodeType:7,target:a},F:null}}function Xj(a,b){var c=a.Cb?[a.Cb].concat(b):[b];I.call(this,c.reduce(function(d,e){return d.add(e.s)},new yf({})),c,{C:!1,S:"unsorted"});this.j=a;this.u=b}x(Xj,I);
Xj.prototype.h=function(a,b){var c=this,d=J(this.u,a,b);return Vc(d,b).L(function(e){var f=e.map(function(k){return Kd(k,1).value}).join(" ");if(-1!==f.indexOf("?>"))throw Error('XQDY0026: The contents of the data of a processing instruction may not include "?>"');if(null!==c.j.Jb)return e=c.j.Jb,Vj(e),E.o(Zb(Wj(e,f)));e=J(c.j.Cb,a,b);var g=Ij(b,e);return E.create({next:function(){var k=g.next(0);if(k.done)return k;k=k.value.value;Vj(k);return B(Zb(Wj(k,f)))}})})};function Yj(a){I.call(this,a?a.s:new yf({}),a?[a]:[],{C:!1,S:"unsorted"});this.j=a}x(Yj,I);Yj.prototype.h=function(a,b){if(!this.j)return E.empty();a=J(this.j,a,b);return Vc(a,b).L(function(c){if(0===c.length)return E.empty();c={node:{data:c.map(function(d){return Kd(d,1).value}).join(" "),Qa:!0,nodeType:3},F:null};return E.o(Zb(c))})};function Zj(a,b,c,d){var e=new yf({}),f;uf.call(this,e,(f=[a].concat(w(b.map(function(g){return g.xc})),[c])).concat.apply(f,w(b.map(function(g){return g.Lb.map(function(k){return k.Kb})}))),{C:!1,Y:!1,S:"unsorted",subtree:!1},d);this.J=a;this.j=b.length;this.T=b.map(function(g){return g.Lb})}x(Zj,uf);
Zj.prototype.B=function(a,b,c){var d=this;return c[0](a).L(function(e){for(var f=0;f<d.j;f++)if(d.T[f].some(function(g){switch(g.Cc){case "?":if(1<e.length)return!1;break;case "*":break;case "+":if(1>e.length)return!1;break;default:if(1!==e.length)return!1}var k=E.create(e);return e.every(function(l,n){l=Hc(a,n,l,k);return J(g.Kb,l,b).getEffectiveBooleanValue()})}))return c[f+1](a);return c[d.j+1](a)})};Zj.prototype.P=function(a){uf.prototype.P.call(this,a);if(this.J.I)throw Te();};var ak={aa:!1,qa:!1},bk={aa:!0,qa:!1},ck={aa:!0,qa:!0};function dk(a){return a.aa?a.qa?ck:bk:ak}
function U(a,b){switch(a[0]){case "andOp":var c=O(a,"type");return new gi(ek("andOp",a,dk(b)),c);case "orOp":return c=O(a,"type"),new hi(ek("orOp",a,dk(b)),c);case "unaryPlusOp":return c=M(M(a,"operand"),"*"),a=O(a,"type"),new fi("+",U(c,b),a);case "unaryMinusOp":return c=M(M(a,"operand"),"*"),a=O(a,"type"),new fi("-",U(c,b),a);case "addOp":case "subtractOp":case "multiplyOp":case "divOp":case "idivOp":case "modOp":var d=a[0],e=U(P(a,["firstOperand","*"]),dk(b));b=U(P(a,["secondOperand","*"]),dk(b));
var f=O(a,"type"),g=O(P(a,["firstOperand","*"]),"type"),k=O(P(a,["secondOperand","*"]),"type");g&&k&&O(a,"type")&&(c=Pg(d,g.type,k.type));return new Yg(d,e,b,f,c);case "sequenceExpr":return fk(a,b);case "unionOp":return c=O(a,"type"),new Mi([U(P(a,["firstOperand","*"]),dk(b)),U(P(a,["secondOperand","*"]),dk(b))],c);case "exceptOp":case "intersectOp":return c=O(a,"type"),new Ci(a[0],U(P(a,["firstOperand","*"]),dk(b)),U(P(a,["secondOperand","*"]),dk(b)),c);case "stringConcatenateOp":return gk(a,b);
case "rangeSequenceExpr":return hk(a,b);case "equalOp":case "notEqualOp":case "lessThanOrEqualOp":case "lessThanOp":case "greaterThanOrEqualOp":case "greaterThanOp":return ik("generalCompare",a,b);case "eqOp":case "neOp":case "ltOp":case "leOp":case "gtOp":case "geOp":return ik("valueCompare",a,b);case "isOp":case "nodeBeforeOp":case "nodeAfterOp":return ik("nodeCompare",a,b);case "pathExpr":return jk(a,b);case "contextItemExpr":return new Ri(O(a,"type"));case "functionCallExpr":return kk(a,b);case "inlineFunctionExpr":return lk(a,
b);case "arrowExpr":return mk(a,b);case "dynamicFunctionInvocationExpr":return nk(a,b);case "namedFunctionRef":return b=M(a,"functionName"),c=O(a,"type"),a=N(P(a,["integerConstantExpr","value"])),new ci(Fg(b),parseInt(a,10),c);case "integerConstantExpr":return new ai(N(M(a,"value")),{type:5,g:3});case "stringConstantExpr":return new ai(N(M(a,"value")),{type:1,g:3});case "decimalConstantExpr":return new ai(N(M(a,"value")),{type:4,g:3});case "doubleConstantExpr":return new ai(N(M(a,"value")),{type:3,
g:3});case "varRef":return a=Fg(M(a,"name")),new ej(a.prefix,a.namespaceURI,a.localName);case "flworExpr":return ok(a,b);case "quantifiedExpr":return pk(a,b);case "ifThenElseExpr":return c=O(a,"type"),new Sh(U(M(M(a,"ifClause"),"*"),dk(b)),U(M(M(a,"thenClause"),"*"),b),U(M(M(a,"elseClause"),"*"),b),c);case "instanceOfExpr":return c=U(P(a,["argExpr","*"]),b),d=P(a,["sequenceType","*"]),e=P(a,["sequenceType","occurrenceIndicator"]),a=O(a,"type"),new Ii(c,U(d,dk(b)),e?N(e):"",a);case "castExpr":return b=
U(M(M(a,"argExpr"),"*"),dk(b)),c=M(a,"singleType"),a=Fg(M(c,"atomicType")),c=null!==M(c,"optional"),new Gi(b,a,c);case "castableExpr":return b=U(M(M(a,"argExpr"),"*"),dk(b)),c=M(a,"singleType"),a=Fg(M(c,"atomicType")),c=null!==M(c,"optional"),new Fi(b,a,c);case "simpleMapExpr":return qk(a,b);case "mapConstructor":return rk(a,b);case "arrayConstructor":return sk(a,b);case "unaryLookup":return c=O(a,"type"),new Yi(tk(a,b),c);case "typeswitchExpr":return uk(a,b);case "elementConstructor":return vk(a,
b);case "attributeConstructor":return wk(a,b);case "computedAttributeConstructor":return(c=M(a,"tagName"))?c=Fg(c):(c=M(a,"tagNameExpr"),c={Ka:U(M(c,"*"),dk(b))}),a=U(M(M(a,"valueExpr"),"*"),dk(b)),new Sj(c,{tb:[a]});case "computedCommentConstructor":if(!b.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");a=(a=M(a,"argExpr"))?U(M(a,"*"),dk(b)):null;return new Tj(a);case "computedTextConstructor":if(!b.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");
a=(a=M(a,"argExpr"))?U(M(a,"*"),dk(b)):null;return new Yj(a);case "computedElementConstructor":return xk(a,b);case "computedPIConstructor":if(!b.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");c=M(a,"piTargetExpr");d=M(a,"piTarget");e=M(a,"piValueExpr");a=O(a,"type");return new Xj({Cb:c?U(M(c,"*"),dk(b)):null,Jb:d?N(d):null},e?U(M(e,"*"),dk(b)):new Di([],a));case "CDataSection":return new ai(N(a),{type:1,g:3});case "deleteExpr":return a=U(P(a,["targetExpr",
"*"]),b),new zj(a);case "insertExpr":c=U(P(a,["sourceExpr","*"]),b);e=Q(a,"*")[1];switch(e[0]){case "insertAfter":d=1;break;case "insertBefore":d=2;break;case "insertInto":d=(d=M(e,"*"))?"insertAsFirst"===d[0]?4:5:3}a=U(P(a,["targetExpr","*"]),b);return new Dj(c,d,a);case "renameExpr":return c=U(P(a,["targetExpr","*"]),b),a=U(P(a,["newNameExpr","*"]),b),new Kj(c,a);case "replaceExpr":return c=!!M(a,"replaceValue"),d=U(P(a,["targetExpr","*"]),b),a=U(P(a,["replacementExpr","*"]),b),new Nj(c,d,a);case "transformExpr":return yk(a,
b);case "x:stackTrace":c=a[1];for(a=a[2];"x:stackTrace"===a[0];)a=a[2];return new Uh(c,a[0],U(a,b));default:return zk(a)}}
function zk(a){switch(a[0]){case "nameTest":return new bj(Fg(a));case "piTest":return(a=M(a,"piTarget"))?new cj(N(a)):new aj(7);case "commentTest":return new aj(8);case "textTest":return new aj(3);case "documentTest":return new aj(9);case "attributeTest":var b=(a=M(a,"attributeName"))&&M(a,"star");return!a||b?new aj(2):new bj(Fg(M(a,"QName")),{kind:2});case "elementTest":return b=(a=M(a,"elementName"))&&M(a,"star"),!a||b?new aj(1):new bj(Fg(M(a,"QName")),{kind:1});case "anyKindTest":return new dj({prefix:"",
namespaceURI:null,localName:"node()"});case "anyMapTest":return new dj({prefix:"",namespaceURI:null,localName:"map(*)"});case "anyArrayTest":return new dj({prefix:"",namespaceURI:null,localName:"array(*)"});case "Wildcard":return M(a,"star")?(b=M(a,"uri"))?a=new bj({localName:"*",namespaceURI:N(b),prefix:""}):(b=M(a,"NCName"),a="star"===M(a,"*")[0]?new bj({localName:N(b),namespaceURI:null,prefix:"*"}):new bj({localName:"*",namespaceURI:null,prefix:N(b)})):a=new bj({localName:"*",namespaceURI:null,
prefix:"*"}),a;case "atomicType":return new dj(Fg(a));case "anyItemType":return new dj({prefix:"",namespaceURI:null,localName:"item()"});default:throw Error("No selector counterpart for: "+a[0]+".");}}function sk(a,b){var c=O(a,"type");a=M(a,"*");var d=Q(a,"arrayElem").map(function(e){return U(M(e,"*"),dk(b))});switch(a[0]){case "curlyArray":return new uh(d,c);case "squareArray":return new vh(d,c);default:throw Error("Unrecognized arrayType: "+a[0]);}}
function rk(a,b){var c=O(a,"type");return new bi(Q(a,"mapConstructorEntry").map(function(d){return{key:U(P(d,["mapKeyExpr","*"]),dk(b)),value:U(P(d,["mapValueExpr","*"]),dk(b))}}),c)}function ek(a,b,c){function d(f){var g=M(M(f,"firstOperand"),"*");f=M(M(f,"secondOperand"),"*");g[0]===a?d(g):e.push(U(g,c));f[0]===a?d(f):e.push(U(f,c))}var e=[];d(b);return e}function tk(a,b){a=M(a,"*");switch(a[0]){case "NCName":return new ai(N(a),{type:1,g:3});case "star":return"*";default:return U(a,dk(b))}}
function ik(a,b,c){var d=P(b,["firstOperand","*"]),e=P(b,["secondOperand","*"]);d=U(d,dk(c));c=U(e,dk(c));switch(a){case "valueCompare":return new ti(b[0],d,c);case "nodeCompare":return new Ai(b[0],d,c);case "generalCompare":return new xi(b[0],d,c)}}
function Ak(a,b,c){a=Q(a,"*");return new Pi(a.filter(function(d){return"stable"!==d[0]}).map(function(d){var e=M(d,"orderModifier"),f=e?M(e,"orderingKind"):null;e=e?M(e,"emptyOrderingMode"):null;f=f?"ascending"===N(f):!0;e=e?"empty least"===N(e):!0;return{da:U(P(d,["orderByExpr","*"]),b),Gb:f,zc:e}}),c)}
function ok(a,b){var c=Q(a,"*");a=M(c[c.length-1],"*");c=c.slice(0,-1);if(1<c.length&&!b.aa)throw Error("XPST0003: Use of XQuery FLWOR expressions in XPath is no allowed");return c.reduceRight(function(d,e){switch(e[0]){case "forClause":e=Q(e,"*");for(var f=e.length-1;0<=f;--f){var g=e[f],k=P(g,["forExpr","*"]),l=M(g,"positionalVariableBinding");d=new Yh(Fg(P(g,["typedVariableBinding","varName"])),U(k,dk(b)),l?Fg(l):null,d)}return d;case "letClause":e=Q(e,"*");for(f=e.length-1;0<=f;--f)g=e[f],k=P(g,
["letExpr","*"]),d=new $h(Fg(P(g,["typedVariableBinding","varName"])),U(k,dk(b)),d);return d;case "whereClause":e=Q(e,"*");for(f=e.length-1;0<=f;--f)d=new fj(U(e[f],b),d);return d;case "windowClause":throw Error("Not implemented: "+e[0]+" is not implemented yet.");case "groupByClause":throw Error("Not implemented: "+e[0]+" is not implemented yet.");case "orderByClause":return Ak(e,b,d);case "countClause":throw Error("Not implemented: "+e[0]+" is not implemented yet.");default:throw Error("Not implemented: "+
e[0]+" is not supported in a flwor expression");}},U(a,b))}function kk(a,b){var c=M(a,"functionName"),d=Q(M(a,"arguments"),"*");a=O(a,"type");return new Ef(new ci(Fg(c),d.length,a),d.map(function(e){return"argumentPlaceholder"===e[0]?null:U(e,b)}),a)}
function mk(a,b){var c=O(a,"type"),d=P(a,["argExpr","*"]);a=Q(a,"*").slice(1);d=[U(d,b)];for(var e=0;e<a.length;e++)if("arguments"!==a[e][0]){if("arguments"===a[e+1][0]){var f=Q(a[e+1],"*");d=d.concat(f.map(function(g){return"argumentPlaceholder"===g[0]?null:U(g,b)}))}f="EQName"===a[e][0]?new ci(Fg(a[e]),d.length,c):U(a[e],dk(b));d=[new Ef(f,d,c)]}return d[0]}
function nk(a,b){var c=P(a,["functionItem","*"]),d=O(a,"type");a=M(a,"arguments");var e=[];a&&(e=Q(a,"*").map(function(f){return"argumentPlaceholder"===f[0]?null:U(f,b)}));return new Ef(U(c,b),e,d)}function lk(a,b){var c=Q(M(a,"paramList"),"*"),d=P(a,["functionBody","*"]),e=O(a,"type");return new Zh(c.map(function(f){return{name:Fg(M(f,"varName")),type:Gg(f)}}),Gg(a),d?U(d,b):new Di([],e))}
function jk(a,b){var c=O(a,"type"),d=Q(a,"stepExpr"),e=!1,f=d.map(function(g){var k=M(g,"xpathAxis"),l=Q(g,"*"),n=[],q=null;l=t(l);for(var u=l.next();!u.done;u=l.next())switch(u=u.value,u[0]){case "lookup":n.push(["lookup",tk(u,b)]);break;case "predicate":case "predicates":u=t(Q(u,"*"));for(var v=u.next();!v.done;v=u.next())v=U(v.value,dk(b)),q=Ah(q,v.A()),n.push(["predicate",v])}if(k)switch(e=!0,g=M(g,"attributeTest anyElementTest piTest documentTest elementTest commentTest namespaceTest anyKindTest textTest anyFunctionTest typedFunctionTest schemaAttributeTest atomicType anyItemType parenthesizedItemType typedMapTest typedArrayTest nameTest Wildcard".split(" ")),
g=zk(g),N(k)){case "ancestor":var A=new yh(g,{Oa:!1});break;case "ancestor-or-self":A=new yh(g,{Oa:!0});break;case "attribute":A=new Bh(g,q);break;case "child":A=new Ch(g,q);break;case "descendant":A=new Fh(g,{Oa:!1});break;case "descendant-or-self":A=new Fh(g,{Oa:!0});break;case "parent":A=new Mh(g,q);break;case "following-sibling":A=new Lh(g,q);break;case "preceding-sibling":A=new Qh(g,q);break;case "following":A=new Jh(g);break;case "preceding":A=new Oh(g);break;case "self":A=new Rh(g,q)}else A=
P(g,["filterExpr","*"]),A=U(A,dk(b));n=t(n);for(k=n.next();!k.done;k=n.next())switch(k=k.value,k[0]){case "lookup":A=new Xi(A,k[1]);break;case "predicate":A=new Ui(A,k[1])}A.type=c;return A});a=M(a,"rootExpr");d=e||null!==a||1<d.length;if(!d&&1===f.length||!a&&1===f.length&&"sorted"===f[0].O)return f[0];if(a&&0===f.length)return new Qi(null);f=new Ti(f,d);return a?new Qi(f):f}
function pk(a,b){var c=O(a,"type"),d=N(M(a,"quantifier")),e=P(a,["predicateExpr","*"]);a=Q(a,"quantifiedExprInClause").map(function(f){var g=Fg(P(f,["typedVariableBinding","varName"]));f=P(f,["sourceExpr","*"]);return{name:g,eb:U(f,dk(b))}});return new Zi(d,a,U(e,dk(b)),c)}function fk(a,b){var c=Q(a,"*").map(function(d){return U(d,b)});if(1===c.length)return c[0];c=O(a,"type");return new Di(Q(a,"*").map(function(d){return U(d,b)}),c)}
function qk(a,b){var c=O(a,"type");return Q(a,"*").reduce(function(d,e){return null===d?U(e,dk(b)):new Ei(d,U(e,dk(b)),c)},null)}function gk(a,b){var c=O(a,"type");a=[P(a,["firstOperand","*"]),P(a,["secondOperand","*"])];return new Ef(new ci({localName:"concat",namespaceURI:"http://www.w3.org/2005/xpath-functions",prefix:""},a.length,c),a.map(function(d){return U(d,dk(b))}),c)}
function hk(a,b){var c=O(a,"type");a=[M(M(a,"startExpr"),"*"),M(M(a,"endExpr"),"*")];var d=new ci({localName:"to",namespaceURI:"http://fontoxpath/operators",prefix:""},a.length,c);return new Ef(d,a.map(function(e){return U(e,dk(b))}),c)}
function vk(a,b){if(!b.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var c=Fg(M(a,"tagName")),d=M(a,"attributeList"),e=d?Q(d,"attributeConstructor").map(function(f){return U(f,dk(b))}):[];d=d?Q(d,"namespaceDeclaration").map(function(f){var g=M(f,"prefix");return{prefix:g?N(g):"",uri:N(M(f,"uri"))}}):[];a=(a=M(a,"elementContent"))?Q(a,"*").map(function(f){return U(f,dk(b))}):[];return new Uj(c,e,d,a)}
function wk(a,b){if(!b.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var c=Fg(M(a,"attributeName")),d=M(a,"attributeValue");d=d?N(d):null;a=(a=M(a,"attributeValueExpr"))?Q(a,"*").map(function(e){return U(e,dk(b))}):null;return new Sj(c,{value:d,tb:a})}function xk(a,b){var c=M(a,"tagName");c?c=Fg(c):(c=M(a,"tagNameExpr"),c={Ka:U(M(c,"*"),dk(b))});a=(a=M(a,"contentExpr"))?Q(a,"*").map(function(d){return U(d,dk(b))}):[];return new Uj(c,[],[],a)}
function yk(a,b){var c=Q(M(a,"transformCopies"),"transformCopy").map(function(e){var f=Fg(M(M(e,"varRef"),"name"));return{eb:U(M(M(e,"copySource"),"*"),b),Nb:new Ab(f.prefix,f.namespaceURI,f.localName)}}),d=U(M(M(a,"modifyExpr"),"*"),b);a=U(M(M(a,"returnExpr"),"*"),b);return new Qj(c,d,a)}
function uk(a,b){if(!b.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var c=O(a,"type"),d=U(M(M(a,"argExpr"),"*"),b),e=Q(a,"typeswitchExprCaseClause").map(function(f){var g=0===Q(f,"sequenceTypeUnion").length?[M(f,"sequenceType")]:Q(M(f,"sequenceTypeUnion"),"sequenceType");return{xc:U(P(f,["resultExpr","*"]),b),Lb:g.map(function(k){var l=M(k,"occurrenceIndicator");return{Cc:l?N(l):"",Kb:U(M(k,"*"),b)}})}});a=U(P(a,["typeswitchExprDefaultClause","resultExpr",
"*"]),b);return new Zj(d,e,a,c)}function Bk(a,b){return U(a,b)};var Ck=new Map;function Pk(a,b,c,d,e,f){this.j=a;this.u=b;this.h=c;this.A=d;this.s=e;this.O=f}
function Qk(a,b,c,d,e,f,g,k){a=Ck.get(a);if(!a)return null;b=a[b+(f?"_DEBUG":"")];return b?(b=b.find(function(l){return l.s===g&&l.j.every(function(n){return c(n.prefix)===n.namespaceURI})&&l.u.every(function(n){return void 0!==d[n.name]})&&l.A.every(function(n){return e[n.prefix]===n.namespaceURI})&&l.O.every(function(n){var q=k(n.Bc,n.arity);return q&&q.namespaceURI===n.Hb.namespaceURI&&q.localName===n.Hb.localName})}))?{da:b.h,Fc:!1}:null:null}
function Rk(a,b,c,d,e,f,g){var k=Ck.get(a);k||(k=Object.create(null),Ck.set(a,k));a=b+(f?"_DEBUG":"");(b=k[a])||(b=k[a]=[]);b.push(new Pk(Object.values(c.h),Object.values(c.s),e,Object.keys(d).map(function(l){return{namespaceURI:d[l],prefix:l}}),g,c.j))};function Sk(a){var b=new Gb;if("http://www.w3.org/2005/XQueryX"!==a.namespaceURI&&"http://www.w3.org/2005/XQueryX"!==a.namespaceURI&&"http://fontoxml.com/fontoxpath"!==a.namespaceURI&&"http://www.w3.org/2007/xquery-update-10"!==a.namespaceURI)throw Oc("The XML structure passed as an XQueryX program was not valid XQueryX");var c=["stackTrace"===a.localName?"x:stackTrace":a.localName],d=b.getAllAttributes(a);d&&0<d.length&&c.push(Array.from(d).reduce(function(e,f){e[f.localName]="type"===f.localName?
xb(f.value):f.value;return e},{}));a=b.getChildNodes(a);a=t(a);for(b=a.next();!b.done;b=a.next())switch(b=b.value,b.nodeType){case 1:c.push(Sk(b));break;case 3:c.push(b.data)}return c};var Tk=Object.create(null);function Uk(a,b){var c=Tk[a];c||(c=Tk[a]={Ma:[],Ua:[]});c.Ma=c.Ma.concat(b.Ma);c.Ua=c.Ua.concat(b.Ua)}function Vk(a,b){var c=Tk[b];if(!c)throw Error("XQST0051: No modules found with the namespace uri "+b);c.Ma.forEach(function(d){return Ag(a,b,d.localName,d.arity,d.Eb)});c.Ua.forEach(function(d){Cg(a,b,d.localName);Dg(a,b,d.localName,function(e,f){return J(d.da,e,f)})})};function Wk(a){return a.replace(/(\x0D\x0A)|(\x0D(?!\x0A))/g,String.fromCharCode(10))};var V=prsc;function Xk(a,b){return function(c,d){if(b.has(d))return b.get(d);c=a(c,d);b.set(d,c);return c}}function W(a,b){return V.delimited(b,a,b)}function X(a,b){return a.reverse().reduce(function(c,d){return V.preceded(d,c)},b)}function Yk(a,b,c,d){return V.then(V.then(a,b,function(e,f){return[e,f]}),c,function(e,f){var g=t(e);e=g.next().value;g=g.next().value;return d(e,g,f)})}
function Zk(a,b,c,d,e){return V.then(V.then(V.then(a,b,function(f,g){return[f,g]}),c,function(f,g){var k=t(f);f=k.next().value;k=k.next().value;return[f,k,g]}),d,function(f,g){var k=t(f);f=k.next().value;var l=k.next().value;k=k.next().value;return e(f,l,k,g)})}
function $k(a,b,c,d,e,f){return V.then(V.then(V.then(V.then(a,b,function(g,k){return[g,k]}),c,function(g,k){var l=t(g);g=l.next().value;l=l.next().value;return[g,l,k]}),d,function(g,k){var l=t(g);g=l.next().value;var n=l.next().value;l=l.next().value;return[g,n,l,k]}),e,function(g,k){var l=t(g);g=l.next().value;var n=l.next().value,q=l.next().value;l=l.next().value;return f(g,n,q,l,k)})}function al(a){return V.map(a,function(b){return[b]})}
function bl(a,b){return V.map(V.or(a),function(){return b})}function cl(a){return function(b,c){return(b=a.exec(b.substring(c)))&&0===b.index?V.okWithValue(c+b[0].length,b[0]):V.error(c,[a.source],!1)}};var dl=V.or([V.token(" "),V.token("\t"),V.token("\r"),V.token("\n")]),el=V.token("(:"),fl=V.token(":)"),gl=V.token("(#"),hl=V.token("#)"),il=V.token("("),jl=V.token(")"),kl=V.token("["),ll=V.token("]"),ml=V.token("{"),nl=V.token("}"),ol=V.token("{{"),pl=V.token("}}"),ql=V.token("'"),rl=V.token("''"),sl=V.token('"'),tl=V.token('""'),ul=V.token("<![CDATA["),vl=V.token("]]\x3e"),wl=V.token("/>"),xl=V.token("</"),yl=V.token("\x3c!--"),zl=V.token("--\x3e"),Al=V.token("<?"),Bl=V.token("?>"),Cl=V.token("&#x"),
Dl=V.token("&#"),El=V.token(":*"),Fl=V.token("*:"),Gl=V.token(":="),Hl=V.token("&"),Il=V.token(":"),Jl=V.token(";"),Kl=V.token("*"),Ll=V.token("@"),Ml=V.token("$"),Nl=V.token("#"),Ol=V.token("%"),Pl=V.token("?"),Ql=V.token("!"),Rl=V.token("|"),Sl=V.token("||"),Tl=V.token("="),Ul=V.token("!="),Vl=V.token("<"),Wl=V.token("<<"),Xl=V.token("<="),Yl=V.token(">"),Zl=V.token(">>"),$l=V.token(">="),am=V.token(","),bm=V.token("."),cm=V.token(".."),dm=V.token("+"),em=V.token("-"),fm=V.token("/"),gm=V.token("//"),
hm=V.token("=>"),im=V.token("e"),jm=V.token("E"),km=V.token("l"),lm=V.token("L"),mm=V.token("m"),nm=V.token("M"),om=V.token("Q"),pm=V.token("x"),qm=V.token("X"),rm=V.token("as"),sm=V.token("cast"),tm=V.token("castable"),um=V.token("treat"),vm=V.token("instance"),wm=V.token("of"),xm=V.token("node"),ym=V.token("nodes"),zm=V.token("delete"),Am=V.token("value"),Bm=V.token("function"),Cm=V.token("map"),Dm=V.token("element"),Em=V.token("attribute"),Fm=V.token("schema-element"),Gm=V.token("intersect"),Hm=
V.token("except"),Im=V.token("union"),Jm=V.token("to"),Km=V.token("is"),Lm=V.token("or"),Mm=V.token("and"),Nm=V.token("div"),Om=V.token("idiv"),Pm=V.token("mod"),Qm=V.token("eq"),Rm=V.token("ne"),Sm=V.token("lt"),Tm=V.token("le"),Um=V.token("gt"),Vm=V.token("ge"),Wm=V.token("amp"),Xm=V.token("quot"),Ym=V.token("apos"),Zm=V.token("if"),$m=V.token("then"),an=V.token("else"),bn=V.token("allowing"),cn=V.token("empty"),dn=V.token("at"),en=V.token("in"),fn=V.token("for"),gn=V.token("let"),hn=V.token("where"),
jn=V.token("collation"),kn=V.token("group"),ln=V.token("by"),mn=V.token("order"),nn=V.token("stable"),on=V.token("return"),pn=V.token("array"),qn=V.token("document"),rn=V.token("namespace"),sn=V.token("text"),tn=V.token("comment"),un=V.token("processing-instruction"),vn=V.token("lax"),wn=V.token("strict"),xn=V.token("validate"),yn=V.token("type"),zn=V.token("declare"),An=V.token("default"),Bn=V.token("boundary-space"),Cn=V.token("strip"),Dn=V.token("preserve"),En=V.token("no-preserve"),Fn=V.token("inherit"),
Gn=V.token("no-inherit"),Hn=V.token("greatest"),In=V.token("least"),Jn=V.token("copy-namespaces"),Kn=V.token("decimal-format"),Ln=V.token("case"),Mn=V.token("typeswitch"),Nn=V.token("some"),On=V.token("every"),Pn=V.token("satisfies"),Qn=V.token("replace"),Rn=V.token("with"),Sn=V.token("copy"),Tn=V.token("modify"),Un=V.token("first"),Vn=V.token("last"),Wn=V.token("before"),Xn=V.token("after"),Yn=V.token("into"),Zn=V.token("insert"),$n=V.token("rename"),ao=V.token("switch"),bo=V.token("variable"),co=
V.token("external"),eo=V.token("updating"),fo=V.token("import"),go=V.token("schema"),ho=V.token("module"),io=V.token("base-uri"),jo=V.token("construction"),ko=V.token("ordering"),lo=V.token("ordered"),mo=V.token("unordered"),no=V.token("option"),oo=V.token("context"),po=V.token("item"),qo=V.token("xquery"),ro=V.token("version"),so=V.token("encoding"),to=V.token("document-node"),uo=V.token("namespace-node"),vo=V.token("schema-attribute"),wo=V.token("ascending"),xo=V.token("descending"),yo=V.token("empty-sequence"),
zo=V.token("child::"),Ao=V.token("descendant::"),Bo=V.token("attribute::"),Co=V.token("self::"),Do=V.token("descendant-or-self::"),Eo=V.token("following-sibling::"),Fo=V.token("following::"),Go=V.token("parent::"),Ho=V.token("ancestor::"),Io=V.token("preceding-sibling::"),Jo=V.token("preceding::"),Ko=V.token("ancestor-or-self::"),Lo=V.token("decimal-separator"),Mo=V.token("grouping-separator"),No=V.token("infinity"),Oo=V.token("minus-sign"),Po=V.token("NaN"),Qo=V.token("per-mille"),Ro=V.token("zero-digit"),
So=V.token("digit"),To=V.token("pattern-separator"),Uo=V.token("exponent-separator"),Vo=V.token("schema-attribute("),Wo=V.token("document-node("),Xo=V.token("processing-instruction("),Yo=V.token("processing-instruction()"),Zo=V.token("comment()"),$o=V.token("text()"),ap=V.token("namespace-node()"),bp=V.token("node()"),cp=V.token("item()"),dp=V.token("empty-sequence()");var ep=new Map,fp=new Map,gp=V.or([cl(/[\t\n\r -\uD7FF\uE000\uFFFD]/),cl(/[\uD800-\uDBFF][\uDC00-\uDFFF]/)]),hp=V.preceded(V.peek(V.not(V.or([el,fl]),['comment contents cannot contain "(:" or ":)"'])),gp),ip=V.map(V.delimited(el,V.star(V.or([hp,function(a,b){return ip(a,b)}])),fl),function(a){return a.join("")}),jp=V.or([dl,ip]),kp=V.map(V.plus(dl),function(a){return a.join("")}),Y=Xk(V.map(V.star(jp),function(a){return a.join("")}),ep),Z=Xk(V.map(V.plus(jp),function(a){return a.join("")}),fp);var lp=V.or([cl(/[A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),V.then(cl(/[\uD800-\uDB7F]/),cl(/[\uDC00-\uDFFF]/),function(a,b){return a+b})]),mp=V.or([lp,cl(/[\-\.0-9\xB7\u0300-\u036F\u203F\u2040]/)]),np=V.then(lp,V.star(mp),function(a,b){return a+b.join("")}),op=V.map(np,function(a){return["prefix",a]}),pp=V.or([lp,Il]),qp=V.or([mp,Il]),rp=V.then(pp,V.star(qp),function(a,b){return a+b.join("")}),sp=
V.map(np,function(a){var b={};return[(b.prefix="",b.URI=null,b),a]}),tp=V.then(np,V.preceded(Il,np),function(a,b){var c={};return[(c.prefix=a,c.URI=null,c),b]}),up=V.or([tp,sp]),vp=V.followed(X([om,Y,ml],V.map(V.star(cl(/[^{}]/)),function(a){return a.join("").replace(/\s+/g," ").trim()})),nl),wp=V.then(vp,np,function(a,b){return[a,b]}),xp=V.or([V.map(wp,function(a){var b={};return[(b.prefix=null,b.URI=a[0],b),a[1]]}),up]),yp=V.or([V.map(xp,function(a){return["QName"].concat(w(a))}),V.map(Kl,function(){return["star"]})]),
zp=V.map(V.preceded(Ml,xp),function(a){return["varRef",["name"].concat(w(a))]});var Ap=V.peek(V.or([il,sl,ql,jp])),Bp=V.map(V.or([zo,Ao,Bo,Co,Do,Eo,Fo]),function(a){return a.substring(0,a.length-2)}),Cp=V.map(V.or([Go,Ho,Io,Jo,Ko]),function(a){return a.substring(0,a.length-2)}),Dp=Yk(Hl,V.or([Sm,Um,Wm,Xm,Ym]),Jl,function(a,b,c){return a+b+c}),Ep=V.or([Yk(Cl,cl(/[0-9a-fA-F]+/),Jl,function(a,b,c){return a+b+c}),Yk(Dl,cl(/[0-9]+/),Jl,function(a,b,c){return a+b+c})]),Fp=bl([tl],'"'),Gp=bl([rl],"'"),Hp=al(bl([Zo],"commentTest")),Ip=al(bl([$o],"textTest")),Jp=al(bl([ap],"namespaceTest")),
Kp=al(bl([bp],"anyKindTest")),Lp=cl(/[0-9]+/),Mp=V.then(V.or([V.then(bm,Lp,function(a,b){return a+b}),V.then(Lp,V.optional(V.preceded(bm,cl(/[0-9]*/))),function(a,b){return a+(null!==b?"."+b:"")})]),Yk(V.or([im,jm]),V.optional(V.or([dm,em])),Lp,function(a,b,c){return a+(b?b:"")+c}),function(a,b){return["doubleConstantExpr",["value",a+b]]}),Np=V.or([V.map(V.preceded(bm,Lp),function(a){return["decimalConstantExpr",["value","."+a]]}),V.then(V.followed(Lp,bm),V.optional(Lp),function(a,b){return["decimalConstantExpr",
["value",a+"."+(null!==b?b:"")]]})]),Op=V.map(Lp,function(a){return["integerConstantExpr",["value",a]]}),Pp=V.followed(V.or([Mp,Np,Op]),V.peek(V.not(cl(/[a-zA-Z]/),["no alphabetical characters after numeric literal"]))),Qp=V.map(V.followed(bm,V.peek(V.not(bm,["context item should not be followed by another ."]))),function(){return["contextItemExpr"]}),Rp=V.or([pn,Em,tn,to,Dm,yo,Bm,Zm,po,Cm,uo,xm,un,vo,Fm,ao,sn,Mn]),Sp=al(bl([Pl],"argumentPlaceholder")),Tp=V.or([Pl,Kl,dm]),Up=V.preceded(V.peek(V.not(cl(/[{}<&]/),
["elementContentChar cannot be {, }, <, or &"])),gp),Vp=V.map(V.delimited(ul,V.star(V.preceded(V.peek(V.not(vl,['CDataSection content may not contain "]]\x3e"'])),gp)),vl),function(a){return["CDataSection",a.join("")]}),Wp=V.preceded(V.peek(V.not(cl(/["{}<&]/),['quotAttrValueContentChar cannot be ", {, }, <, or &'])),gp),Xp=V.preceded(V.peek(V.not(cl(/['{}<&]/),["aposAttrValueContentChar cannot be ', {, }, <, or &"])),gp),Yp=V.map(V.star(V.or([V.preceded(V.peek(V.not(em,[])),gp),V.map(X([em,V.peek(V.not(em,
[]))],gp),function(a){return"-"+a})])),function(a){return a.join("")}),Zp=V.map(V.delimited(yl,Yp,zl),function(a){return["computedCommentConstructor",["argExpr",["stringConstantExpr",["value",a]]]]}),$p=V.preceded(V.peek(V.not(Yk(V.or([qm,pm]),V.or([nm,mm]),V.or([lm,km]),function(){return[]}),[])),rp),aq=V.map(V.star(V.preceded(V.peek(V.not(Bl,[])),gp)),function(a){return a.join("")}),bq=V.then(V.preceded(Al,$p),V.followed(V.optional(V.preceded(kp,aq)),Bl),function(a,b){return["computedPIConstructor",
["piTarget",a],["piValueExpr",["stringConstantExpr",["value",b]]]]}),cq=V.map(gm,function(){return["stepExpr",["xpathAxis","descendant-or-self"],["anyKindTest"]]}),dq=V.or([vn,wn]),eq=V.map(V.star(V.followed(gp,V.peek(V.not(hl,["Pragma contents should not contain '#)'"])))),function(a){return a.join("")}),fq=V.map(V.followed(V.or([Qm,Rm,Sm,Tm,Um,Vm]),Ap),function(a){return a+"Op"}),gq=V.or([V.followed(bl([Km],"isOp"),Ap),bl([Wl],"nodeBeforeOp"),bl([Zl],"nodeAfterOp")]),hq=V.or([bl([Tl],"equalOp"),
bl([Ul],"notEqualOp"),bl([Xl],"lessThanOrEqualOp"),bl([Vl],"lessThanOp"),bl([$l],"greaterThanOrEqualOp"),bl([Yl],"greaterThanOp")]),iq=V.map(eo,function(){return["annotation",["annotationName","updating"]]}),jq=V.or([Dn,En]),kq=V.or([Fn,Gn]),lq=V.or([Lo,Mo,No,Oo,Po,Ol,Qo,Ro,So,To,Uo]),mq=V.map(X([zn,Z,Bn,Z],V.or([Dn,Cn])),function(a){return["boundarySpaceDecl",a]}),nq=V.map(X([zn,Z,jo,Z],V.or([Dn,Cn])),function(a){return["constructionDecl",a]}),oq=V.map(X([zn,Z,ko,Z],V.or([lo,mo])),function(a){return["orderingModeDecl",
a]}),pq=V.map(X([zn,Z,An,Z,mn,Z,cn,Z],V.or([Hn,In])),function(a){return["emptyOrderDecl",a]}),qq=V.then(X([zn,Z,Jn,Z],jq),X([Y,am,Y],kq),function(a,b){return["copyNamespacesDecl",["preserveMode",a],["inheritMode",b]]});function rq(a){switch(a[0]){case "constantExpr":case "varRef":case "contextItemExpr":case "functionCallExpr":case "sequenceExpr":case "elementConstructor":case "computedElementConstructor":case "computedAttributeConstructor":case "computedDocumentConstructor":case "computedTextConstructor":case "computedCommentConstructor":case "computedNamespaceConstructor":case "computedPIConstructor":case "orderedExpr":case "unorderedExpr":case "namedFunctionRef":case "inlineFunctionExpr":case "dynamicFunctionInvocationExpr":case "mapConstructor":case "arrayConstructor":case "stringConstructor":case "unaryLookup":return a}return["sequenceExpr",
a]}function sq(a){if(!(1<=a&&55295>=a||57344<=a&&65533>=a||65536<=a&&1114111>=a))throw Error("XQST0090: The character reference "+a+" ("+a.toString(16)+") does not reference a valid codePoint.");}
function tq(a){return a.replace(/(&[^;]+);/g,function(b){if(/^&#x/.test(b))return b=parseInt(b.slice(3,-1),16),sq(b),String.fromCodePoint(b);if(/^&#/.test(b))return b=parseInt(b.slice(2,-1),10),sq(b),String.fromCodePoint(b);switch(b){case "&lt;":return"<";case "&gt;":return">";case "&amp;":return"&";case "&quot;":return String.fromCharCode(34);case "&apos;":return String.fromCharCode(39)}throw Error('XPST0003: Unknown character reference: "'+b+'"');})}
function uq(a,b,c){if(!a.length)return[];for(var d=[a[0]],e=1;e<a.length;++e){var f=d[d.length-1];"string"===typeof f&&"string"===typeof a[e]?d[d.length-1]=f+a[e]:d.push(a[e])}if("string"===typeof d[0]&&0===d.length)return[];d=d.reduce(function(g,k,l){if("string"!==typeof k)g.push(k);else if(c&&/^\s*$/.test(k)){var n=d[l+1];n&&"CDataSection"===n[0]?g.push(tq(k)):(l=d[l-1])&&"CDataSection"===l[0]&&g.push(tq(k))}else g.push(tq(k));return g},[]);if(!d.length)return d;if(1<d.length||b)for(a=0;a<d.length;a++)"string"===
typeof d[a]&&(d[a]=["stringConstantExpr",["value",d[a]]]);return d}function vq(a){return a[0].prefix?a[0].prefix+":"+a[1]:a[1]};var wq=V.then(xp,V.optional(Pl),function(a,b){return null!==b?["singleType",["atomicType"].concat(w(a)),["optional"]]:["singleType",["atomicType"].concat(w(a))]}),xq=V.map(xp,function(a){return["atomicType"].concat(w(a))});var yq=new Map;
function zq(a){function b(m,r){return r.reduce(function(D,ba){return[ba[0],["firstOperand",D],["secondOperand",ba[1]]]},m)}function c(m,r,D){return V.then(m,V.star(V.then(W(r,Y),m,function(ba,ia){return[ba,ia]})),D)}function d(m,r,D,ba){D=void 0===D?"firstOperand":D;ba=void 0===ba?"secondOperand":ba;return V.then(m,V.optional(V.then(W(r,Y),m,function(ia,Ka){return[ia,Ka]})),function(ia,Ka){return null===Ka?ia:[Ka[0],[D,ia],[ba,Ka[1]]]})}function e(m){return a.sb?function(r,D){r=m(r,D);if(!r.success)return r;
var ba=n.has(D)?n.get(D):{offset:D,line:-1,la:-1},ia=n.has(r.offset)?n.get(r.offset):{offset:r.offset,line:-1,la:-1};n.set(D,ba);n.set(r.offset,ia);return V.okWithValue(r.offset,["x:stackTrace",{start:ba,end:ia},r.value])}:m}function f(m,r){return Dk(m,r)}function g(m,r){return Tg(m,r)}function k(m,r){return e(V.or([Er,Fr,Gr,Hr,Ir,Jr,Kr,Lr,Mr,Nr,Or]))(m,r)}function l(m,r){return c(k,am,function(D,ba){return 0===ba.length?D:["sequenceExpr",D].concat(w(ba.map(function(ia){return ia[1]})))})(m,r)}var n=
new Map,q=V.preceded(kl,V.followed(W(l,Y),ll)),u=V.map(a.Va?V.or([W(V.star(V.or([Dp,Ep,Fp,cl(/[^"&]/)])),sl),W(V.star(V.or([Dp,Ep,Gp,cl(/[^'&]/)])),ql)]):V.or([W(V.star(V.or([Fp,cl(/[^"]/)])),sl),W(V.star(V.or([Gp,cl(/[^']/)])),ql)]),function(m){return m.join("")}),v=V.or([V.map(X([Dm,Y],V.delimited(V.followed(il,Y),V.then(yp,X([Y,am,Y],xp),function(m,r){return[["elementName",m],["typeName"].concat(w(r))]}),V.preceded(Y,jl))),function(m){var r=t(m);m=r.next().value;r=r.next().value;return["elementTest",
m,r]}),V.map(X([Dm,Y],V.delimited(il,yp,jl)),function(m){return["elementTest",["elementName",m]]}),V.map(X([Dm,Y],V.delimited(il,Y,jl)),function(){return["elementTest"]})]),A=V.or([V.map(xp,function(m){return["QName"].concat(w(m))}),V.map(Kl,function(){return["star"]})]),G=V.or([V.map(X([Em,Y],V.delimited(V.followed(il,Y),V.then(A,X([Y,am,Y],xp),function(m,r){return[["attributeName",m],["typeName"].concat(w(r))]}),V.preceded(Y,jl))),function(m){var r=t(m);m=r.next().value;r=r.next().value;return["attributeTest",
m,r]}),V.map(X([Em,Y],V.delimited(il,A,jl)),function(m){return["attributeTest",["attributeName",m]]}),V.map(X([Em,Y],V.delimited(il,Y,jl)),function(){return["attributeTest"]})]),H=V.map(X([Fm,Y,il],V.followed(xp,jl)),function(m){return["schemaElementTest"].concat(w(m))}),L=V.map(V.delimited(Vo,W(xp,Y),jl),function(m){return["schemaAttributeTest"].concat(w(m))}),fa=V.map(V.preceded(Wo,V.followed(W(V.optional(V.or([v,H])),Y),jl)),function(m){return["documentTest"].concat(w(m?[m]:[]))}),ea=V.or([V.map(V.preceded(Xo,
V.followed(W(V.or([np,u]),Y),jl)),function(m){return["piTest",["piTarget",m]]}),al(bl([Yo],"piTest"))]),Ea=V.or([fa,v,G,H,L,ea,Hp,Ip,Jp,Kp]),ab=V.or([V.map(V.preceded(Fl,np),function(m){return["Wildcard",["star"],["NCName",m]]}),al(bl([Kl],"Wildcard")),V.map(V.followed(vp,Kl),function(m){return["Wildcard",["uri",m],["star"]]}),V.map(V.followed(np,El),function(m){return["Wildcard",["NCName",m],["star"]]})]),sa=V.or([ab,V.map(xp,function(m){return["nameTest"].concat(w(m))})]),ib=V.or([Ea,sa]),wc=V.then(V.optional(Ll),
ib,function(m,r){return null!==m||"attributeTest"===r[0]||"schemaAttributeTest"===r[0]?["stepExpr",["xpathAxis","attribute"],r]:["stepExpr",["xpathAxis","child"],r]}),sd=V.or([V.then(Bp,ib,function(m,r){return["stepExpr",["xpathAxis",m],r]}),wc]),Pr=V.map(cm,function(){return["stepExpr",["xpathAxis","parent"],["anyKindTest"]]}),Qr=V.or([V.then(Cp,ib,function(m,r){return["stepExpr",["xpathAxis",m],r]}),Pr]),Rr=V.map(V.star(V.preceded(Y,q)),function(m){return 0<m.length?["predicates"].concat(w(m)):
void 0}),Sr=V.then(V.or([Qr,sd]),Rr,function(m,r){return void 0===r?m:m.concat([r])}),Ug=V.or([Pp,V.map(u,function(m){return["stringConstantExpr",["value",a.Va?tq(m):m]]})]),Vg=V.or([V.delimited(il,W(l,Y),jl),V.map(V.delimited(il,Y,jl),function(){return["sequenceExpr"]})]),Ek=V.or([k,Sp]),Pe=V.map(V.delimited(il,W(V.optional(V.then(Ek,V.star(V.preceded(W(am,Y),Ek)),function(m,r){return[m].concat(w(r))})),Y),jl),function(m){return null!==m?m:[]}),Tr=V.preceded(V.not(Yk(Rp,Y,il,function(){}),["cannot use reseved keyword for function names"]),
V.then(xp,V.preceded(Y,Pe),function(m,r){return["functionCallExpr",["functionName"].concat(w(m)),null!==r?["arguments"].concat(w(r)):["arguments"]]})),Ur=V.then(xp,V.preceded(Nl,Op),function(m,r){return["namedFunctionRef",["functionName"].concat(w(m)),r]}),jb=V.delimited(ml,W(V.optional(l),Y),nl),Fk=V.map(jb,function(m){return m?m:["sequenceExpr"]}),zb=V.or([V.map(dp,function(){return[["voidSequenceType"]]}),V.then(f,V.optional(V.preceded(Y,Tp)),function(m,r){return[m].concat(w(null!==r?[["occurrenceIndicator",
r]]:[]))})]),Wg=V.then(X([Ol,Y],xp),V.optional(V.followed(V.then(X([il,Y],Ug),V.star(X([am,Y],Ug)),function(m,r){return m.concat(r)}),jl)),function(m,r){return["annotation",["annotationName"].concat(w(m))].concat(w(r?["arguments",r]:[]))}),Vr=V.map(X([Bm,Y,il,Y,Kl,Y],jl),function(){return["anyFunctionTest"]}),Wr=V.then(X([Bm,Y,il,Y],V.optional(c(zb,am,function(m,r){return m.concat.apply(m,r.map(function(D){return D[1]}))}))),X([Y,jl,Z,rm,Z],zb),function(m,r){return["typedFunctionTest",["paramTypeList",
["sequenceType"].concat(w(m?m:[]))],["sequenceType"].concat(w(r))]}),Xr=V.then(V.star(Wg),V.or([Vr,Wr]),function(m,r){return[r[0]].concat(w(m),w(r.slice(1)))}),Yr=V.map(X([Cm,Y,il,Y,Kl,Y],jl),function(){return["anyMapTest"]}),Zr=V.then(X([Cm,Y,il,Y],xq),X([Y,am],V.followed(W(zb,Y),jl)),function(m,r){return["typedMapTest",m,["sequenceType"].concat(w(r))]}),$r=V.or([Yr,Zr]),as=V.map(X([pn,Y,il,Y,Kl,Y],jl),function(){return["anyArrayTest"]}),bs=V.map(X([pn,Y,il],V.followed(W(zb,Y),jl)),function(m){return["typedArrayTest",
["sequenceType"].concat(w(m))]}),cs=V.or([as,bs]),ds=V.map(V.delimited(il,W(f,Y),jl),function(m){return["parenthesizedItemType",m]}),Dk=V.or([Ea,al(bl([cp],"anyItemType")),Xr,$r,cs,xq,ds]),Rc=V.map(X([rm,Z],zb),function(m){return["typeDeclaration"].concat(w(m))}),es=V.then(V.preceded(Ml,xp),V.optional(V.preceded(Z,Rc)),function(m,r){return["param",["varName"].concat(w(m))].concat(w(r?[r]:[]))}),Gk=c(es,am,function(m,r){return[m].concat(w(r.map(function(D){return D[1]})))}),fs=Zk(V.star(Wg),X([Y,Bm,
Y,il,Y],V.optional(Gk)),X([Y,jl,Y],V.optional(V.map(X([rm,Y],V.followed(zb,Y)),function(m){return["typeDeclaration"].concat(w(m))}))),Fk,function(m,r,D,ba){return["inlineFunctionExpr"].concat(w(m),[["paramList"].concat(w(r?r:[]))],w(D?[D]:[]),[["functionBody",ba]])}),gs=V.or([Ur,fs]),hs=V.map(k,function(m){return["mapKeyExpr",m]}),is=V.map(k,function(m){return["mapValueExpr",m]}),js=V.then(hs,V.preceded(W(Il,Y),is),function(m,r){return["mapConstructorEntry",m,r]}),ks=V.preceded(Cm,V.delimited(W(ml,
Y),V.map(V.optional(c(js,W(am,Y),function(m,r){return[m].concat(w(r.map(function(D){return D[1]})))})),function(m){return m?["mapConstructor"].concat(w(m)):["mapConstructor"]}),V.preceded(Y,nl))),ls=V.map(V.delimited(kl,W(V.optional(c(k,am,function(m,r){return[m].concat(w(r.map(function(D){return D[1]}))).map(function(D){return["arrayElem",D]})})),Y),ll),function(m){return["squareArray"].concat(w(null!==m?m:[]))}),ms=V.map(V.preceded(pn,V.preceded(Y,jb)),function(m){return["curlyArray"].concat(w(null!==
m?[["arrayElem",m]]:[]))}),ns=V.map(V.or([ls,ms]),function(m){return["arrayConstructor",m]}),Hk=V.or([np,Op,Vg,Kl]),os=V.map(V.preceded(Pl,V.preceded(Y,Hk)),function(m){return"*"===m?["unaryLookup",["star"]]:"string"===typeof m?["unaryLookup",["NCName",m]]:["unaryLookup",m]}),Xg=V.or([Dp,Ep,bl([ol],"{"),bl([pl],"}"),V.map(jb,function(m){return m||["sequenceExpr"]})]),ps=V.or([Vp,function(m,r){return Ik(m,r)},Xg,Up]),qs=V.or([V.map(Wp,function(m){return m.replace(/[\x20\x0D\x0A\x09]/g," ")}),Xg]),
rs=V.or([V.map(Xp,function(m){return m.replace(/[\x20\x0D\x0A\x09]/g," ")}),Xg]),ss=V.map(V.or([W(V.star(V.or([Fp,qs])),sl),W(V.star(V.or([Gp,rs])),ql)]),function(m){return uq(m,!1,!1)}),ts=V.then(up,V.preceded(W(Tl,V.optional(kp)),ss),function(m,r){if(""===m[0].prefix&&"xmlns"===m[1]){if(r.length&&"string"!==typeof r[0])throw Error("XQST0022: A namespace declaration may not contain enclosed expressions");return["namespaceDeclaration",r.length?["uri",r[0]]:["uri"]]}if("xmlns"===m[0].prefix){if(r.length&&
"string"!==typeof r[0])throw Error("XQST0022: The namespace declaration for 'xmlns:"+m[1]+"' may not contain enclosed expressions");return["namespaceDeclaration",["prefix",m[1]],r.length?["uri",r[0]]:["uri"]]}return["attributeConstructor",["attributeName"].concat(m),0===r.length?["attributeValue"]:1===r.length&&"string"===typeof r[0]?["attributeValue",r[0]]:["attributeValueExpr"].concat(r)]}),us=V.map(V.star(V.preceded(kp,V.optional(ts))),function(m){return m.filter(Boolean)}),vs=Yk(V.preceded(Vl,
up),us,V.or([V.map(wl,function(){return null}),V.then(V.preceded(Yl,V.star(ps)),X([Y,xl],V.followed(up,V.then(V.optional(kp),Yl,function(){return null}))),function(m,r){return[uq(m,!0,!0),r]})]),function(m,r,D){var ba=D;if(D&&D.length){ba=vq(m);var ia=vq(D[1]);if(ba!==ia)throw Error('XQST0118: The start and the end tag of an element constructor must be equal. "'+ba+'" does not match "'+ia+'"');ba=D[0]}return["elementConstructor",["tagName"].concat(w(m))].concat(w(r.length?[["attributeList"].concat(w(r))]:
[]),w(ba&&ba.length?[["elementContent"].concat(w(ba))]:[]))}),Ik=V.or([vs,Zp,bq]),ws=V.map(X([qn,Y],jb),function(m){return["computedDocumentConstructor"].concat(w(m?[["argExpr",m]]:[]))}),xs=V.map(jb,function(m){return m?[["contentExpr",m]]:[]}),ys=V.then(X([Dm,Y],V.or([V.map(xp,function(m){return["tagName"].concat(w(m))}),V.map(V.delimited(ml,W(l,Y),nl),function(m){return["tagNameExpr",m]})])),V.preceded(Y,xs),function(m,r){return["computedElementConstructor",m].concat(w(r))}),zs=V.then(V.preceded(Em,
V.or([V.map(X([Ap,Y],xp),function(m){return["tagName"].concat(w(m))}),V.map(V.preceded(Y,V.delimited(ml,W(l,Y),nl)),function(m){return["tagNameExpr",m]})])),V.preceded(Y,jb),function(m,r){return["computedAttributeConstructor",m,["valueExpr",r?r:["sequenceExpr"]]]}),As=V.map(jb,function(m){return m?[["prefixExpr",m]]:[]}),Bs=V.map(jb,function(m){return m?[["URIExpr",m]]:[]}),Cs=V.then(X([rn,Y],V.or([op,As])),V.preceded(Y,Bs),function(m,r){return["computedNamespaceConstructor"].concat(w(m),w(r))}),
Ds=V.map(X([sn,Y],jb),function(m){return["computedTextConstructor"].concat(w(m?[["argExpr",m]]:[]))}),Es=V.map(X([tn,Y],jb),function(m){return["computedCommentConstructor"].concat(w(m?[["argExpr",m]]:[]))}),Fs=X([un,Y],V.then(V.or([V.map(np,function(m){return["piTarget",m]}),V.map(V.delimited(ml,W(l,Y),nl),function(m){return["piTargetExpr",m]})]),V.preceded(Y,jb),function(m,r){return["computedPIConstructor",m].concat(w(r?[["piValueExpr",r]]:[]))})),Gs=V.or([ws,ys,zs,Cs,Ds,Es,Fs]),Hs=V.or([Ik,Gs]),
Jk=V.or([Ug,zp,Vg,Qp,Tr,Hs,gs,ks,ns,os]),Kk=V.map(X([Pl,Y],Hk),function(m){return"*"===m?["lookup",["star"]]:"string"===typeof m?["lookup",["NCName",m]]:["lookup",m]}),Js=V.then(V.map(Jk,function(m){return rq(m)}),V.star(V.or([V.map(V.preceded(Y,q),function(m){return["predicate",m]}),V.map(V.preceded(Y,Pe),function(m){return["argumentList",m]}),V.preceded(Y,Kk)])),function(m,r){function D(){Lk&&1===Ka.length?Sc.push(["predicate",Ka[0]]):0!==Ka.length&&Sc.push(["predicates"].concat(w(Ka)));Ka.length=
0}function ba(Is){D();0!==Sc.length?("sequenceExpr"===ia[0]&&2<ia.length&&(ia=["sequenceExpr",ia]),ia=[["filterExpr",ia]].concat(w(Sc)),Sc.length=0):ia=Is?[["filterExpr",ia]]:[ia]}var ia=m,Ka=[],Sc=[],Lk=!1;m=t(r);for(r=m.next();!r.done;r=m.next())switch(r=r.value,r[0]){case "predicate":Ka.push(r[1]);break;case "lookup":Lk=!0;D();Sc.push(r);break;case "argumentList":ba(!1);1<ia.length&&(ia=[["sequenceExpr",["pathExpr",["stepExpr"].concat(w(ia))]]]);ia=["dynamicFunctionInvocationExpr",["functionItem"].concat(w(ia))].concat(w(r[1].length?
[["arguments"].concat(w(r[1]))]:[]));break;default:throw Error("unreachable");}ba(!0);return ia}),Tc=V.or([V.map(Js,function(m){return["stepExpr"].concat(w(m))}),Sr]),Ks=V.followed(Jk,V.peek(V.not(V.preceded(Y,V.or([q,Pe,Kk])),["primary expression not followed by predicate, argumentList, or lookup"]))),Ls=V.or([Yk(Tc,V.preceded(Y,cq),V.preceded(Y,g),function(m,r,D){return["pathExpr",m,r].concat(w(D))}),V.then(Tc,V.preceded(W(fm,Y),g),function(m,r){return["pathExpr",m].concat(w(r))}),Ks,V.map(Tc,function(m){return["pathExpr",
m]})]),Tg=V.or([Yk(Tc,V.preceded(Y,cq),V.preceded(Y,g),function(m,r,D){return[m,r].concat(w(D))}),V.then(Tc,V.preceded(W(fm,Y),g),function(m,r){return[m].concat(w(r))}),V.map(Tc,function(m){return[m]})]),Ms=V.or([V.map(X([fm,Y],Tg),function(m){return["pathExpr",["rootExpr"]].concat(w(m))}),V.then(cq,V.preceded(Y,Tg),function(m,r){return["pathExpr",["rootExpr"],m].concat(w(r))}),V.map(V.followed(fm,V.not(V.preceded(Y,a.Va?cl(/[*<a-zA-Z]/):cl(/[*a-zA-Z]/)),["Single rootExpr cannot be by followed by something that can be interpreted as a relative path"])),
function(){return["pathExpr",["rootExpr"]]})]),Ns=Xk(V.or([Ls,Ms]),yq),Os=V.preceded(xn,V.then(V.optional(V.or([V.map(V.preceded(Y,dq),function(m){return["validationMode",m]}),V.map(X([Y,yn,Y],xp),function(m){return["type"].concat(w(m))})])),V.delimited(V.preceded(Y,ml),W(l,Y),nl),function(m,r){return["validateExpr"].concat(w(m?[m]:[]),[["argExpr",r]])})),Ps=V.delimited(gl,V.then(V.preceded(Y,xp),V.optional(V.preceded(Z,eq)),function(m,r){return r?["pragma",["pragmaName",m],["pragmaContents",r]]:
["pragma",["pragmaName",m]]}),V.preceded(Y,hl)),Qs=V.map(V.followed(V.plus(Ps),V.preceded(Y,V.delimited(ml,W(V.optional(l),Y),nl))),function(m){return["extensionExpr"].concat(w(m))}),Rs=e(c(Ns,Ql,function(m,r){return 0===r.length?m:["simpleMapExpr","pathExpr"===m[0]?m:["pathExpr",["stepExpr",["filterExpr",rq(m)]]]].concat(r.map(function(D){D=D[1];return"pathExpr"===D[0]?D:["pathExpr",["stepExpr",["filterExpr",rq(D)]]]}))})),Ss=V.or([Os,Qs,Rs]),Mk=V.or([V.then(V.or([bl([em],"unaryMinusOp"),bl([dm],
"unaryPlusOp")]),V.preceded(Y,function(m,r){return Mk(m,r)}),function(m,r){return[m,["operand",r]]}),Ss]),Ts=V.or([V.map(xp,function(m){return["EQName"].concat(w(m))}),zp,Vg]),Us=V.then(Mk,V.star(X([Y,hm,Y],V.then(Ts,V.preceded(Y,Pe),function(m,r){return[m,r]}))),function(m,r){return r.reduce(function(D,ba){return["arrowExpr",["argExpr",D],ba[0],["arguments"].concat(w(ba[1]))]},m)}),Vs=V.then(Us,V.optional(X([Y,sm,Z,rm,Ap,Y],wq)),function(m,r){return null!==r?["castExpr",["argExpr",m],r]:m}),Ws=V.then(Vs,
V.optional(X([Y,tm,Z,rm,Ap,Y],wq)),function(m,r){return null!==r?["castableExpr",["argExpr",m],r]:m}),Xs=V.then(Ws,V.optional(X([Y,um,Z,rm,Ap,Y],zb)),function(m,r){return null!==r?["treatExpr",["argExpr",m],["sequenceType"].concat(w(r))]:m}),Ys=V.then(Xs,V.optional(X([Y,vm,Z,wm,Ap,Y],zb)),function(m,r){return null!==r?["instanceOfExpr",["argExpr",m],["sequenceType"].concat(w(r))]:m}),Zs=c(Ys,V.followed(V.or([bl([Gm],"intersectOp"),bl([Hm],"exceptOp")]),Ap),b),$s=c(Zs,V.or([bl([Rl],"unionOp"),V.followed(bl([Im],
"unionOp"),Ap)]),b),at=c($s,V.or([bl([Kl],"multiplyOp"),V.followed(bl([Nm],"divOp"),Ap),V.followed(bl([Om],"idivOp"),Ap),V.followed(bl([Pm],"modOp"),Ap)]),b),bt=c(at,V.or([bl([em],"subtractOp"),bl([dm],"addOp")]),b),ct=d(bt,V.followed(bl([Jm],"rangeSequenceExpr"),Ap),"startExpr","endExpr"),dt=c(ct,bl([Sl],"stringConcatenateOp"),b),et=d(dt,V.or([fq,gq,hq])),ft=c(et,V.followed(bl([Mm],"andOp"),Ap),b),Or=c(ft,V.followed(bl([Lm],"orOp"),Ap),b),Ir=V.then(V.then(X([Zm,Y,il,Y],l),X([Y,jl,Y,$m,Ap,Y],k),function(m,
r){return[m,r]}),X([Y,an,Ap,Y],k),function(m,r){return["ifThenElseExpr",["ifClause",m[0]],["thenClause",m[1]],["elseClause",r]]}),gt=V.delimited(bn,Z,cn),ht=V.map(X([dn,Z,Ml],xp),function(m){return["positionalVariableBinding"].concat(w(m))}),it=$k(V.preceded(Ml,xp),V.preceded(Y,V.optional(Rc)),V.preceded(Y,V.optional(gt)),V.preceded(Y,V.optional(ht)),V.preceded(W(en,Y),k),function(m,r,D,ba,ia){return["forClauseItem",["typedVariableBinding",["varName"].concat(w(m),w(r?[r]:[]))]].concat(w(D?[["allowingEmpty"]]:
[]),w(ba?[ba]:[]),[["forExpr",ia]])}),jt=X([fn,Z],c(it,am,function(m,r){return["forClause",m].concat(w(r.map(function(D){return D[1]})))})),kt=Yk(V.preceded(Ml,xp),V.preceded(Y,V.optional(Rc)),V.preceded(W(Gl,Y),k),function(m,r,D){return["letClauseItem",["typedVariableBinding",["varName"].concat(w(m))].concat(w(r?[r]:[])),["letExpr",D]]}),lt=V.map(X([gn,Y],c(kt,am,function(m,r){return[m].concat(w(r.map(function(D){return D[1]})))})),function(m){return["letClause"].concat(w(m))}),Nk=V.or([jt,lt]),
mt=V.map(X([hn,Ap,Y],k),function(m){return["whereClause",m]}),nt=V.map(V.preceded(Ml,xp),function(m){return["varName"].concat(w(m))}),ot=V.then(V.preceded(Y,V.optional(Rc)),V.preceded(W(Gl,Y),k),function(m,r){return["groupVarInitialize"].concat(w(m?[["typeDeclaration"].concat(w(m))]:[]),[["varValue",r]])}),pt=Yk(nt,V.optional(ot),V.optional(V.map(V.preceded(W(jn,Y),u),function(m){return["collation",m]})),function(m,r,D){return["groupingSpec",m].concat(w(r?[r]:[]),w(D?[D]:[]))}),qt=c(pt,am,function(m,
r){return[m].concat(w(r.map(function(D){return D[1]})))}),rt=V.map(X([kn,Z,ln,Y],qt),function(m){return["groupByClause"].concat(w(m))}),st=Yk(V.optional(V.or([wo,xo])),V.optional(X([Y,cn,Y],V.or([Hn,In].map(function(m){return V.map(m,function(r){return"empty "+r})})))),V.preceded(Y,V.optional(X([jn,Y],u))),function(m,r,D){return m||r||D?["orderModifier"].concat(w(m?[["orderingKind",m]]:[]),w(r?[["emptyOrderingMode",r]]:[]),w(D?[["collation",D]]:[])):null}),tt=V.then(k,V.preceded(Y,st),function(m,
r){return["orderBySpec",["orderByExpr",m]].concat(w(r?[r]:[]))}),ut=c(tt,am,function(m,r){return[m].concat(w(r.map(function(D){return D[1]})))}),vt=V.then(V.or([V.map(X([mn,Z],ln),function(){return!1}),V.map(X([nn,Z,mn,Z],ln),function(){return!0})]),V.preceded(Y,ut),function(m,r){return["orderByClause"].concat(w(m?[["stable"]]:[]),w(r))}),wt=V.or([Nk,mt,rt,vt]),xt=V.map(X([on,Y],k),function(m){return["returnClause",m]}),Er=Yk(Nk,V.star(V.preceded(Y,wt)),V.preceded(Y,xt),function(m,r,D){return["flworExpr",
m].concat(w(r),[D])}),yt=c(zb,Rl,function(m,r){return 0===r.length?["sequenceType"].concat(w(m)):["sequenceTypeUnion",["sequenceType"].concat(w(m))].concat(w(r.map(function(D){return["sequenceType"].concat(w(D[1]))})))}),zt=Yk(X([Ln,Y],V.optional(V.preceded(Ml,V.followed(V.followed(xp,Z),rm)))),V.preceded(Y,yt),X([Z,on,Z],k),function(m,r,D){return["typeswitchExprCaseClause"].concat(m?[["variableBinding"].concat(w(m))]:[],[r],[["resultExpr",D]])}),Hr=Zk(V.preceded(Mn,W(V.delimited(il,W(l,Y),jl),Y)),
V.plus(V.followed(zt,Y)),X([An,Z],V.optional(V.preceded(Ml,V.followed(xp,Z)))),X([on,Z],k),function(m,r,D,ba){return["typeswitchExpr",["argExpr",m]].concat(w(r),[["typeswitchExprDefaultClause"].concat(w(D||[]),[["resultExpr",ba]])])}),At=Yk(V.preceded(Ml,xp),V.optional(V.preceded(Z,Rc)),V.preceded(W(en,Z),k),function(m,r,D){return["quantifiedExprInClause",["typedVariableBinding",["varName"].concat(w(m))].concat(w(r?[r]:[])),["sourceExpr",D]]}),Bt=c(At,am,function(m,r){return[m].concat(w(r.map(function(D){return D[1]})))}),
Fr=Yk(V.or([Nn,On]),V.preceded(Z,Bt),V.preceded(W(Pn,Y),k),function(m,r,D){return["quantifiedExpr",["quantifier",m]].concat(w(r),[["predicateExpr",D]])}),Kr=V.map(X([zm,Z,V.or([ym,xm]),Z],k),function(m){return["deleteExpr",["targetExpr",m]]}),Mr=Yk(X([Qn,Z],V.optional(X([Am,Z,wm],Z))),X([xm,Z],k),V.preceded(W(Rn,Z),k),function(m,r,D){return m?["replaceExpr",["replaceValue"],["targetExpr",r],["replacementExpr",D]]:["replaceExpr",["targetExpr",r],["replacementExpr",D]]}),Ct=V.then(zp,V.preceded(W(Gl,
Y),k),function(m,r){return["transformCopy",m,["copySource",r]]}),Nr=Yk(X([Sn,Z],c(Ct,am,function(m,r){return[m].concat(w(r.map(function(D){return D[1]})))})),X([Y,Tn,Z],k),V.preceded(W(on,Z),k),function(m,r,D){return["transformExpr",["transformCopies"].concat(w(m)),["modifyExpr",r],["returnExpr",D]]}),Dt=V.or([V.followed(V.map(V.optional(V.followed(X([rm,Z],V.or([V.map(Un,function(){return["insertAsFirst"]}),V.map(Vn,function(){return["insertAsLast"]})])),Z)),function(m){return m?["insertInto",m]:
["insertInto"]}),Yn),V.map(Xn,function(){return["insertAfter"]}),V.map(Wn,function(){return["insertBefore"]})]),Jr=Yk(X([Zn,Z,V.or([ym,xm]),Z],k),V.preceded(Z,Dt),V.preceded(Z,k),function(m,r,D){return["insertExpr",["sourceExpr",m],r,["targetExpr",D]]}),Lr=V.then(X([$n,Z,xm,Y],k),X([Z,rm,Z],k),function(m,r){return["renameExpr",["targetExpr",m],["newNameExpr",r]]}),Et=V.then(V.plus(V.map(X([Ln,Z],k),function(m){return["switchCaseExpr",m]})),X([Z,on,Z],k),function(m,r){return["switchExprCaseClause"].concat(w(m),
[["resultExpr",r]])}),Gr=Yk(X([ao,Y,il],l),X([Y,jl,Y],V.plus(V.followed(Et,Y))),X([An,Z,on,Z],k),function(m,r,D){return["switchExpr",["argExpr",m]].concat(w(r),[["switchExprDefaultClause",["resultExpr",D]]])}),Ft=V.map(l,function(m){return["queryBody",m]}),Gt=X([zn,Z,rn,Z],V.then(np,V.preceded(W(Tl,Y),u),function(m,r){return["namespaceDecl",["prefix",m],["uri",r]]})),Ht=V.then(X([bo,Z,Ml,Y],V.then(xp,V.optional(V.preceded(Y,Rc)),function(m,r){return[m,r]})),V.or([V.map(X([Y,Gl,Y],k),function(m){return["varValue",
m]}),V.map(X([Z,co],V.optional(X([Y,Gl,Y],k))),function(m){return["external"].concat(w(m?[["varValue",m]]:[]))})]),function(m,r){var D=t(m);m=D.next().value;D=D.next().value;return["varDecl",["varName"].concat(w(m))].concat(w(null!==D?[D]:[]),[r])}),It=Zk(X([Bm,Z,V.peek(V.not(Rp,["Cannot use reserved function name"]))],xp),X([Y,il,Y],V.optional(Gk)),X([Y,jl],V.optional(X([Z,rm,Z],zb))),V.preceded(Y,V.or([V.map(Fk,function(m){return["functionBody",m]}),V.map(co,function(){return["externalDefinition"]})])),
function(m,r,D,ba){return["functionDecl",["functionName"].concat(w(m)),["paramList"].concat(w(r||[]))].concat(w(D?[["typeDeclaration"].concat(w(D))]:[]),[ba])}),Jt=X([zn,Z],V.then(V.star(V.followed(V.or([Wg,iq]),Z)),V.or([Ht,It]),function(m,r){return[r[0]].concat(w(m),w(r.slice(1)))})),Kt=V.then(X([zn,Z,An,Z],V.or([Dm,Bm])),X([Z,rn,Z],u),function(m,r){return["defaultNamespaceDecl",["defaultNamespaceCategory",m],["uri",r]]}),Lt=V.or([V.map(V.followed(X([rn,Z],np),V.preceded(Y,Tl)),function(m){return["namespacePrefix",
m]}),V.map(X([An,Z,Dm,Z],rn),function(){return["defaultElementNamespace"]})]),Mt=X([fo,Z,go],Yk(V.optional(V.preceded(Z,Lt)),V.preceded(Y,u),V.optional(V.then(X([Z,dn,Z],u),V.star(X([Y,am,Y],u)),function(m,r){return[m].concat(w(r))})),function(m,r,D){return["schemaImport"].concat(w(m?[m]:[]),[["targetNamespace",r]],w(D?[D]:[]))})),Nt=X([fo,Z,ho],Yk(V.optional(V.followed(X([Z,rn,Z],np),V.preceded(Y,Tl))),V.preceded(Y,u),V.optional(V.then(X([Z,dn,Z],u),V.star(X([Y,am,Y],u)),function(m,r){return[m].concat(w(r))})),
function(m,r){return["moduleImport",["namespacePrefix",m],["targetNamespace",r]]})),Ot=V.or([Mt,Nt]),Pt=V.map(X([zn,Z,An,Z,jn,Z],u),function(m){return["defaultCollationDecl",m]}),Qt=V.map(X([zn,Z,io,Z],u),function(m){return["baseUriDecl",m]}),Rt=V.then(X([zn,Z],V.or([V.map(X([Kn,Z],xp),function(m){return["decimalFormatName"].concat(w(m))}),V.map(X([An,Z],Kn),function(){return null})])),V.star(V.then(V.preceded(Z,lq),V.preceded(W(Tl,Z),u),function(m,r){return["decimalFormatParam",["decimalFormatParamName",
m],["decimalFormatParamValue",r]]})),function(m,r){return["decimalFormatDecl"].concat(w(m?[m]:[]),w(r))}),St=V.or([mq,Pt,Qt,nq,oq,pq,qq,Rt]),Tt=V.then(X([zn,Z,no,Z],xp),V.preceded(Z,u),function(m,r){return["optionDecl",["optionName",m],["optionContents",r]]}),Ut=V.then(X([zn,Z,oo,Z,po],V.optional(X([Z,rm],Dk))),V.or([V.map(V.preceded(W(Gl,Y),k),function(m){return["varValue",m]}),V.map(X([Z,co],V.optional(V.preceded(W(Gl,Y),k))),function(){return["external"]})]),function(m,r){return["contextItemDecl"].concat(w(m?
[["contextItemType",m]]:[]),[r])}),Ok=V.then(V.star(V.followed(V.or([Kt,St,Gt,Ot]),W(Jl,Y))),V.star(V.followed(V.or([Ut,Jt,Tt]),W(Jl,Y))),function(m,r){return 0===m.length&&0===r.length?null:["prolog"].concat(w(m),w(r))}),Vt=X([ho,Z,rn,Z],V.then(V.followed(np,W(Tl,Y)),V.followed(u,W(Jl,Y)),function(m,r){return["moduleDecl",["prefix",m],["uri",r]]})),Wt=V.then(Vt,V.preceded(Y,Ok),function(m,r){return["libraryModule",m].concat(w(r?[r]:[]))}),Xt=V.then(Ok,V.preceded(Y,Ft),function(m,r){return["mainModule"].concat(w(m?
[m]:[]),[r])}),Yt=V.map(X([qo,Y],V.followed(V.or([V.then(V.preceded(so,Z),u,function(m){return["encoding",m]}),V.then(X([ro,Z],u),V.optional(X([Z,so,Z],u)),function(m,r){return[["version",m]].concat(w(r?[["encoding",r]]:[]))})]),V.preceded(Y,Jl))),function(m){return["versionDecl"].concat(w(m))}),Zt=V.then(V.optional(W(Yt,Y)),V.or([Wt,Xt]),function(m,r){return["module"].concat(w(m?[m]:[]),[r])}),$t=V.complete(W(Zt,Y));return function(m,r){n.clear();r=$t(m,r);for(var D=1,ba=1,ia=0;ia<m.length+1;ia++){if(n.has(ia)){var Ka=
n.get(ia);Ka.line=ba;Ka.la=D}Ka=m[ia];"\r"===Ka||"\n"===Ka?(ba++,D=1):D++}return r}}var Aq=zq({sb:!1,Va:!1}),Bq=zq({sb:!0,Va:!1}),Cq=zq({sb:!1,Va:!0}),Dq=zq({sb:!0,Va:!0});function Eq(a,b){var c=!!b.aa;b=!!b.debug;ep.clear();fp.clear();yq.clear();c=c?b?Dq(a,0):Cq(a,0):b?Bq(a,0):Aq(a,0);if(!0===c.success)return c.value;throw Error("XPST0003: Failed to parse '"+a+"' expected: "+c.expected+"\n"+(a.slice(0,c.offset)+"[Error is around here]"+a.slice(c.offset)));};var Fq="http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/XMLSchema http://www.w3.org/2001/XMLSchema-instance http://www.w3.org/2005/xpath-functions http://www.w3.org/2005/xpath-functions/math http://www.w3.org/2012/xquery http://www.w3.org/2005/xpath-functions/array http://www.w3.org/2005/xpath-functions/map".split(" ");
function Gq(a,b,c,d,e){var f=M(a,"functionName"),g=O(f,"prefix")||"",k=O(f,"URI"),l=N(f);if(null===k&&(k=""===g?null===b.A?"http://www.w3.org/2005/xpath-functions":b.A:b.ba(g),!k&&g))throw ug(g);if(Fq.includes(k))throw pg();g=Q(a,"annotation").map(function(L){return M(L,"annotationName")});f=g.every(function(L){return!O(L,"URI")&&"private"!==N(L)});g=g.some(function(L){return!O(L,"URI")&&"updating"===N(L)});if(!k)throw qg();var n=Gg(a),q=Q(M(a,"paramList"),"param"),u=q.map(function(L){return M(L,
"varName")}),v=q.map(function(L){return Gg(L)});if(a=M(a,"functionBody")){if(b.za(k,l,v.length))throw Error("XQST0049: The function Q{"+k+"}"+l+"#"+v.length+" has already been declared.");if(!e)return;var A=Bk(a[1],{qa:!1,aa:!0}),G=new xg(b),H=u.map(function(L){var fa=O(L,"URI"),ea=O(L,"prefix");L=N(L);ea&&null===fa&&(fa=b.ba(ea||""));return Cg(G,fa,L)});e=g?{l:v,arity:u.length,m:function(L,fa,ea,Ea){for(var ab=[],sa=3;sa<arguments.length;++sa)ab[sa-3]=arguments[sa];sa=Kc(Hc(L,-1,null,E.empty()),
H.reduce(function(ib,wc,sd){ib[wc]=rb(ab[sd]);return ib},Object.create(null)));return A.u(sa,fa)},Bb:!1,I:!0,localName:l,namespaceURI:k,i:n}:{l:v,arity:u.length,m:function(L,fa,ea,Ea){for(var ab=[],sa=3;sa<arguments.length;++sa)ab[sa-3]=arguments[sa];sa=Kc(Hc(L,-1,null,E.empty()),H.reduce(function(ib,wc,sd){ib[wc]=rb(ab[sd]);return ib},Object.create(null)));return J(A,sa,fa)},Bb:!1,I:!1,localName:l,namespaceURI:k,i:n};c.push({da:A,Ib:G});f&&d.push({arity:u.length,da:A,Eb:e,localName:l,namespaceURI:k})}else{if(g)throw Error("Updating external function declarations are not supported");
e={l:v,arity:u.length,m:function(L,fa,ea,Ea){for(var ab=[],sa=3;sa<arguments.length;++sa)ab[sa-3]=arguments[sa];sa=ea.za(k,l,u.length,!0);if(!sa)throw Error("XPST0017: Function Q{"+k+"}"+l+" with arity of "+u.length+" not registered. "+gg(l));if(sa.i.type!==n.type||sa.l.some(function(ib,wc){return ib.type!==v[wc].type}))throw Error("External function declaration types do not match actual function");return sa.m.apply(sa,[L,fa,ea].concat(w(ab)))},Bb:!0,I:!1,localName:l,namespaceURI:k,i:n}}Ag(b,k,l,
u.length,e)}
function Hq(a,b,c){c=void 0===c?!0:c;var d=[],e=[];Q(a,"*").forEach(function(v){switch(v[0]){case "moduleImport":case "namespaceDecl":case "defaultNamespaceDecl":case "functionDecl":case "varDecl":break;default:throw Error("Not implemented: only module imports, namespace declarations, and function declarations are implemented in XQuery modules");}});var f=new Set;Q(a,"moduleImport").forEach(function(v){var A=N(M(v,"namespacePrefix"));v=N(M(v,"targetNamespace"));if(f.has(v))throw Error('XQST0047: The namespace "'+v+
'" is imported more than once.');f.add(v);Bg(b,A,v);Vk(b,v)});Q(a,"namespaceDecl").forEach(function(v){var A=N(M(v,"prefix"));v=N(M(v,"uri"));if("xml"===A||"xmlns"===A)throw sg();if("http://www.w3.org/XML/1998/namespace"===v||"http://www.w3.org/2000/xmlns/"===v)throw sg();Bg(b,A,v)});for(var g=null,k=null,l=t(Q(a,"defaultNamespaceDecl")),n=l.next();!n.done;n=l.next()){var q=n.value;n=N(M(q,"defaultNamespaceCategory"));q=N(M(q,"uri"));if(!q)throw qg();if("http://www.w3.org/XML/1998/namespace"===q||
"http://www.w3.org/2000/xmlns/"===q)throw sg();if("function"===n){if(g)throw rg();g=q}else if("element"===n){if(k)throw rg();k=q}}g&&(b.A=g);k&&Bg(b,"",k);Q(a,"functionDecl").forEach(function(v){Gq(v,b,d,e,c)});var u=[];Q(a,"varDecl").forEach(function(v){var A=Fg(M(v,"varName")),G=A.namespaceURI;if(null===G&&(G=b.ba(A.prefix),!G&&A.prefix))throw ug(A.prefix);if(Fq.includes(G))throw pg();var H=M(v,"external");v=M(v,"varValue");var L,fa;null!==H?(H=M(H,"varValue"),null!==H&&(L=M(H,"*"))):null!==v&&
(L=M(v,"*"));if(u.some(function(Ea){return Ea.namespaceURI===G&&Ea.localName===A.localName}))throw Error("XQST0049: The variable "+(G?"Q{"+G+"}":"")+A.localName+" has already been declared.");Cg(b,G||"",A.localName);if(c&&(L&&(fa=Bk(L,{qa:!1,aa:!0})),L&&!zg(b,G||"",A.localName))){var ea=null;Dg(b,G,A.localName,function(Ea,ab){if(ea)return ea();ea=rb(J(fa,Ea,ab));return ea()});d.push({da:fa,Ib:b});u.push({da:fa,localName:A.localName,namespaceURI:G})}});d.forEach(function(v){v.da.P(v.Ib)});e.forEach(function(v){if(!v.Eb.I&&
v.da.I)throw Te("The function Q{"+v.namespaceURI+"}"+v.localName+" is updating but the %updating annotation is missing.");});return{Ma:e,Ua:u}};function Iq(a,b,c,d,e,f,g){var k=b.aa?"XQuery":"XPath";c=b.Ha?null:Qk(a,k,c,d,e,b.debug,f,g);return null!==c?{state:c.Fc?1:2,da:c.da}:{state:0,wc:"string"===typeof a?Eq(a,b):Sk(a)}}function Jq(a,b,c){var d=M(a,"mainModule");if(!d)throw Error("Can not execute a library module.");var e=M(d,"prolog");if(e){if(!b.aa)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");Hq(e,c)}T(a,new th(c));a=P(d,["queryBody","*"]);return U(a,b)}
function Kq(a,b,c,d,e,f,g){var k=new lg(c,d,f,g),l=new xg(k);Object.keys(e).forEach(function(n){var q=e[n];Vk(l,q);Bg(l,n,q)});"string"===typeof a&&(a=Wk(a));c=Iq(a,b,c,d,e,f,g);switch(c.state){case 2:return{ia:l,da:c.da};case 1:return c.da.P(l),Rk(a,b.aa?"XQuery":"XPath",k,e,c.da,b.debug,f),{ia:l,da:c.da};case 0:return c=Jq(c.wc,b,l),c.P(l),b.Ha||Rk(a,b.aa?"XQuery":"XPath",k,e,c,b.debug,f),{ia:l,da:c}}};function Lq(a,b,c,d){a=a.first();var e=b.first().h.reduce(function(u,v){u[v.key.value]=rb(v.value());return u},Object.create(null));b=e["."]?e["."]():E.empty();delete e["."];try{if(C(a.type,1))var f=a.value;else if(C(a.type,54))f=a.value.node;else throw Oc("Unable to convert selector argument of type "+tb[a.type]+" to either an "+tb[1]+" or an "+tb[54]+" representing an XQueryX program while calling 'fontoxpath:evaluate'");var g=Kq(f,{qa:!1,aa:!0,debug:d.debug,Ha:d.Ha},function(u){return c.ba(u)},
Object.keys(e).reduce(function(u,v){u[v]=v;return u},{}),{},"http://www.w3.org/2005/xpath-functions",function(u,v){return c.Ra(u,v)}),k=g.da,l=g.ia,n=!b.G(),q=new Fc({N:n?b.first():null,Ja:n?0:-1,Ga:b,Ea:Object.keys(e).reduce(function(u,v){u[l.qb(null,v)]=e[v];return u},Object.create(null))});return{Gc:k.h(q,d).value,Dc:a}}catch(u){bg(a.value,u)}};function Mq(a,b,c){if(1!==b.node.nodeType&&9!==b.node.nodeType)return[];var d=Pb(a,b).reduce(function(e,f){f=t(Mq(a,f,c));for(var g=f.next();!g.done;g=f.next())e.push(g.value);return e},[]);c(b)&&d.unshift(b);return d}
function Nq(a,b,c,d,e){a=e.first();if(!a)throw Error("XPDY0002: The context is absent, it needs to be present to use id function.");if(!C(a.type,53))throw Oc("The context item is not a node, it needs to be node to use id function.");var f=b.h,g=d.M().reduce(function(k,l){l.value.split(/\s+/).forEach(function(n){k[n]=!0});return k},Object.create(null));for(b=a.value;9!==b.node.nodeType;)if(b=Ub(f,b),null===b)throw Error("FODC0001: the root node of the target node is not a document node.");b=Mq(f,b,
function(k){if(1!==k.node.nodeType)return!1;k=Ob(f,k,"id");if(!k||!g[k])return!1;g[k]=!1;return!0});return E.create(b.map(function(k){return Zb(k)}))}
function Oq(a,b,c,d,e){a=e.first();if(!a)throw Error("XPDY0002: The context is absent, it needs to be present to use idref function.");if(!C(a.type,53))throw Oc("The context item is not a node, it needs to be node to use idref function.");var f=b.h,g=d.M().reduce(function(k,l){k[l.value]=!0;return k},Object.create(null));for(b=a.value;9!==b.node.nodeType;)if(b=Ub(f,b),null===b)throw Error("FODC0001: the root node of the context node is not a document node.");b=Mq(f,b,function(k){return 1!==k.node.nodeType?
!1:(k=Ob(f,k,"idref"))?k.split(/\s+/).some(function(l){return g[l]}):!1});return E.create(b.map(function(k){return Zb(k)}))};function Pq(a){switch(typeof a){case "object":return Array.isArray(a)?E.o(new Xb(a.map(function(b){return rb(Pq(b))}))):null===a?E.empty():E.o(new cc(Object.keys(a).map(function(b){return{key:y(b,1),value:rb(Pq(a[b]))}})));case "number":return E.o(y(a,3));case "string":return E.o(y(a,1));case "boolean":return a?E.ca():E.X();default:throw Error("Unexpected type in JSON parse");}};function Qq(a,b,c,d,e){var f=E.o(y("duplicates",1));a=bc(a,b,c,e,f);var g=a.G()?"use-first":a.first().value;return d.L(function(k){return E.o(new cc(k.reduce(function(l,n){n.h.forEach(function(q){var u=l.findIndex(function(v){return ac(v.key,q.key)});if(0<=u)switch(g){case "reject":throw Error("FOJS0003: Duplicate encountered when merging maps.");case "use-last":l.splice(u,1,q);return;case "combine":l.splice(u,1,{key:q.key,value:rb(E.create(l[u].value().M().concat(q.value().M())))});return;default:return}l.push(q)});
return l},[])))})};function Rq(a,b,c){var d=1,e=a.value;a=a.Na(!0);var f=null,g=Math.max(b-1,0);-1!==a&&(f=Math.max(0,(null===c?a:Math.max(0,Math.min(a,c+(b-1))))-g));return E.create({next:function(k){for(;d<b;)e.next(k),d++;if(null!==c&&d>=b+c)return z;k=e.next(k);d++;return k}},f)}function Sq(a){return a.map(function(b){return C(b.type,19)?Kd(b,3):b})}
function Tq(a){a=Sq(a);if(a.some(function(b){return Number.isNaN(b.value)}))return[y(NaN,3)];a=Ni(a);if(!a)throw Error("FORG0006: Incompatible types to be converted to a common type");return a}
function Uq(a,b,c,d,e,f){return $b([e,f],function(g){var k=t(g);g=k.next().value;k=k.next().value;if(Infinity===g.value)return E.empty();if(-Infinity===g.value)return k&&Infinity===k.value?E.empty():d;if(k){if(isNaN(k.value))return E.empty();Infinity===k.value&&(k=null)}return isNaN(g.value)?E.empty():Rq(d,Math.round(g.value),k?Math.round(k.value):null)})}
function Vq(a,b,c,d,e){if(d.G())return e;a=Sq(d.M());a=Ni(a);if(!a)throw Error("FORG0006: Incompatible types to be converted to a common type");if(!a.every(function(f){return C(f.type,2)}))throw Error("FORG0006: items passed to fn:sum are not all numeric.");b=a.reduce(function(f,g){return f+g.value},0);return a.every(function(f){return C(f.type,5)})?E.o(y(b,5)):a.every(function(f){return C(f.type,3)})?E.o(y(b,3)):a.every(function(f){return C(f.type,4)})?E.o(y(b,4)):E.o(y(b,6))};var Wq=[].concat(Mf,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"boolean",l:[{type:59,g:2}],i:{type:0,g:3},m:function(a,b,c,d){return d.getEffectiveBooleanValue()?E.ca():E.X()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"true",l:[],i:{type:0,g:3},m:function(){return E.ca()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"not",l:[{type:59,g:2}],i:{type:0,g:3},m:function(a,b,c,d){return!1===d.getEffectiveBooleanValue()?E.ca():E.X()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",
localName:"false",l:[],i:{type:0,g:3},m:function(){return E.X()}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"last",l:[],i:{type:5,g:3},m:function(a){if(null===a.N)throw Error("XPDY0002: The fn:last() function depends on dynamic context, which is absent.");var b=!1;return E.create({next:function(){if(b)return z;var c=a.Ga.Na();b=!0;return B(y(c,5))}},1)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"position",l:[],i:{type:5,g:3},m:function(a){if(null===
a.N)throw Error("XPDY0002: The fn:position() function depends on dynamic context, which is absent.");return E.o(y(a.Ja+1,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-dateTime",l:[],i:{type:10,g:3},m:function(a){return E.o(y(Ic(a),10))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-date",l:[],i:{type:7,g:3},m:function(a){return E.o(y(rc(Ic(a),7),7))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-time",l:[],
i:{type:8,g:3},m:function(a){return E.o(y(rc(Ic(a),8),8))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"implicit-timezone",l:[],i:{type:17,g:3},m:function(a){return E.o(y(Jc(a),17))}}],Nf,Vf,Xf,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"years-from-duration",l:[{type:18,g:0}],i:{type:5,g:0},m:function(a,b,c,d){return d.G()?d:E.o(y(d.first().value.cb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"months-from-duration",l:[{type:18,
g:0}],i:{type:5,g:0},m:function(a,b,c,d){return d.G()?d:E.o(y(d.first().value.$a(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"days-from-duration",l:[{type:18,g:0}],i:{type:5,g:0},m:function(a,b,c,d){return d.G()?d:E.o(y(d.first().value.Za(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-duration",l:[{type:18,g:0}],i:{type:5,g:0},m:function(a,b,c,d){return d.G()?d:E.o(y(d.first().value.getHours(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",
localName:"minutes-from-duration",l:[{type:18,g:0}],i:{type:5,g:0},m:function(a,b,c,d){return d.G()?d:E.o(y(d.first().value.getMinutes(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-duration",l:[{type:18,g:0}],i:{type:4,g:0},m:function(a,b,c,d){return d.G()?d:E.o(y(d.first().value.getSeconds(),4))}}],Zf,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",l:[{type:1,g:2},{type:53,g:3}],i:{type:54,g:2},m:Nq},{namespaceURI:"http://www.w3.org/2005/xpath-functions",
localName:"id",l:[{type:1,g:2}],i:{type:54,g:2},m:function(a,b,c,d){return Nq(a,b,c,d,E.o(a.N))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",l:[{type:1,g:2},{type:53,g:3}],i:{type:53,g:2},m:Oq},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",l:[{type:1,g:2}],i:{type:53,g:2},m:function(a,b,c,d){return Oq(a,b,c,d,E.o(a.N))}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"parse-json",l:[{type:1,g:3}],i:{type:59,g:0},m:function(a,
b,c,d){try{var e=JSON.parse(d.first().value)}catch(f){throw Error("FOJS0001: parsed JSON string contains illegal JSON.");}return Pq(e)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"contains",l:[{type:61,g:3},{type:46,g:3}],i:{type:0,g:3},m:function(a,b,c,d,e){return $b([d,e],function(f){f=t(f);var g=f.next().value,k=f.next().value;return g.h.some(function(l){return ac(l.key,k)})?E.ca():E.X()})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"entry",
l:[{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},m:function(a,b,c,d,e){return d.map(function(f){return new cc([{key:f,value:rb(e)}])})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"for-each",l:[{type:61,g:3},{type:59,g:2}],i:{type:59,g:2},m:function(a,b,c,d,e){return $b([d,e],function(f){f=t(f);var g=f.next().value,k=f.next().value;return Mc(g.h.map(function(l){return k.value.call(void 0,a,b,c,E.o(l.key),l.value())}))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",
localName:"get",l:[{type:61,g:3},{type:46,g:3}],i:{type:59,g:2},m:bc},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"keys",l:[{type:61,g:3}],i:{type:46,g:2},m:function(a,b,c,d){return $b([d],function(e){e=t(e).next().value;return E.create(e.h.map(function(f){return f.key}))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",l:[{type:61,g:2},{type:61,g:3}],i:{type:61,g:3},m:Qq},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",
l:[{type:61,g:2}],i:{type:61,g:3},m:function(a,b,c,d){return Qq(a,b,c,d,E.o(new cc([{key:y("duplicates",1),value:function(){return E.o(y("use-first",1))}}])))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"put",l:[{type:61,g:3},{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},m:function(a,b,c,d,e,f){return $b([d,e],function(g){g=t(g);var k=g.next().value,l=g.next().value;g=k.h.concat();k=g.findIndex(function(n){return ac(n.key,l)});0<=k?g.splice(k,1,{key:l,value:rb(f)}):g.push({key:l,
value:rb(f)});return E.o(new cc(g))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"remove",l:[{type:61,g:3},{type:46,g:2}],i:{type:61,g:3},m:function(a,b,c,d,e){return $b([d],function(f){var g=t(f).next().value.h.concat();return e.L(function(k){k.forEach(function(l){var n=g.findIndex(function(q){return ac(q.key,l)});0<=n&&g.splice(n,1)});return E.o(new cc(g))})})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"size",l:[{type:61,g:3}],i:{type:5,g:3},
m:function(a,b,c,d){return d.map(function(e){return y(e.h.length,5)})}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pi",l:[],i:{type:3,g:3},m:function(){return E.o(y(Math.PI,3))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp",l:[{type:3,g:0}],i:{type:3,g:0},m:function(a,b,c,d){return d.map(function(e){return y(Math.pow(Math.E,e.value),3)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp10",l:[{type:3,g:0}],i:{type:3,
g:0},m:function(a,b,c,d){return d.map(function(e){return y(Math.pow(10,e.value),3)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log",l:[{type:3,g:0}],i:{type:3,g:0},m:function(a,b,c,d){return d.map(function(e){return y(Math.log(e.value),3)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log10",l:[{type:3,g:0}],i:{type:3,g:0},m:function(a,b,c,d){return d.map(function(e){return y(Math.log10(e.value),3)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",
localName:"pow",l:[{type:3,g:0},{type:2,g:3}],i:{type:3,g:0},m:function(a,b,c,d,e){return e.L(function(f){var g=t(f).next().value;return d.map(function(k){return 1!==Math.abs(k.value)||Number.isFinite(g.value)?y(Math.pow(k.value,g.value),3):y(1,3)})})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sqrt",l:[{type:3,g:0}],i:{type:3,g:0},m:function(a,b,c,d){return d.map(function(e){return y(Math.sqrt(e.value),3)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",
localName:"sin",l:[{type:3,g:0}],i:{type:3,g:0},m:function(a,b,c,d){return d.map(function(e){return y(Math.sin(e.value),3)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"cos",l:[{type:3,g:0}],i:{type:3,g:0},m:function(a,b,c,d){return d.map(function(e){return y(Math.cos(e.value),3)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"tan",l:[{type:3,g:0}],i:{type:3,g:0},m:function(a,b,c,d){return d.map(function(e){return y(Math.tan(e.value),3)})}},
{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"asin",l:[{type:3,g:0}],i:{type:3,g:0},m:function(a,b,c,d){return d.map(function(e){return y(Math.asin(e.value),3)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"acos",l:[{type:3,g:0}],i:{type:3,g:0},m:function(a,b,c,d){return d.map(function(e){return y(Math.acos(e.value),3)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan",l:[{type:3,g:0}],i:{type:3,g:0},m:function(a,b,
c,d){return d.map(function(e){return y(Math.atan(e.value),3)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan2",l:[{type:3,g:0},{type:3,g:3}],i:{type:3,g:0},m:function(a,b,c,d,e){return e.L(function(f){var g=t(f).next().value;return d.map(function(k){return y(Math.atan2(k.value,g.value),3)})})}}],Fe,ie,[{namespaceURI:"http://fontoxpath/operators",localName:"to",l:[{type:5,g:0},{type:5,g:0}],i:{type:5,g:2},m:function(a,b,c,d,e){a=d.first();e=e.first();if(null===a||null===
e)return E.empty();var f=a.value;e=e.value;return f>e?E.empty():E.create({next:function(){return B(y(f++,5))}},e-f+1)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"QName",l:[{type:1,g:0},{type:1,g:3}],i:{type:23,g:3},m:function(a,b,c,d,e){return $b([d,e],function(f){var g=t(f);f=g.next().value;g=g.next().value.value;if(!Yc(g,23))throw Error("FOCA0002: The provided QName is invalid.");f=f?f.value||null:null;if(null===f&&g.includes(":"))throw Error("FOCA0002: The URI of a QName may not be empty if a prefix is provided.");
if(d.G())return E.o(y(new Ab("",null,g),23));if(!g.includes(":"))return E.o(y(new Ab("",f,g),23));var k=t(g.split(":"));g=k.next().value;k=k.next().value;return E.o(y(new Ab(g,f,k),23))})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"prefix-from-QName",l:[{type:23,g:0}],i:{type:24,g:0},m:function(a,b,c,d){return $b([d],function(e){e=t(e).next().value;if(null===e)return E.empty();e=e.value;return e.prefix?E.o(y(e.prefix,24)):E.empty()})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",
localName:"local-name-from-QName",l:[{type:23,g:0}],i:{type:24,g:0},m:function(a,b,c,d){return d.map(function(e){return y(e.value.localName,24)})}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"namespace-uri-from-QName",l:[{type:23,g:0}],i:{type:20,g:0},m:function(a,b,c,d){return d.map(function(e){return y(e.value.namespaceURI||"",20)})}}],[{l:[{type:59,g:2}],m:function(a,b,c,d){return d.$({empty:function(){return E.ca()},multiple:function(){return E.X()},o:function(){return E.X()}})},
localName:"empty",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:59,g:2}],m:function(a,b,c,d){return d.$({empty:function(){return E.X()},multiple:function(){return E.ca()},o:function(){return E.ca()}})},localName:"exists",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:59,g:2}],m:function(a,b,c,d){return Rq(d,1,1)},localName:"head",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{l:[{type:59,g:2}],m:function(a,
b,c,d){return Rq(d,2,null)},localName:"tail",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:5,g:3},{type:59,g:2}],m:function(a,b,c,d,e,f){if(d.G())return f;if(f.G())return d;a=d.M();e=e.first().value-1;0>e?e=0:e>a.length&&(e=a.length);b=a.slice(e);return E.create(a.slice(0,e).concat(f.M(),b))},localName:"insert-before",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:5,g:3}],m:function(a,b,c,d,e){a=e.first().value;
d=d.M();if(!d.length||1>a||a>d.length)return E.create(d);d.splice(a-1,1);return E.create(d)},localName:"remove",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2}],m:function(a,b,c,d){return d.L(function(e){return E.create(e.reverse())})},localName:"reverse",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:3,g:3}],m:function(a,b,c,d,e){return Uq(a,b,c,d,e,E.empty())},localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",
i:{type:59,g:2}},{l:[{type:59,g:2},{type:3,g:3},{type:3,g:3}],m:Uq,localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2}],m:function(a,b,c,d){return d},localName:"unordered",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:46,g:2}],m:function(a,b,c,d){var e=Vc(d,b).M();return E.create(e).filter(function(f,g){return e.slice(0,g).every(function(k){return!Ie(f,k)})})},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",
i:{type:46,g:2}},{l:[{type:46,g:2},{type:1,g:3}],m:function(){throw Error("FOCH0002: No collations are supported");},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{l:[{type:46,g:2},{type:46,g:3}],m:function(a,b,c,d,e){return e.L(function(f){var g=t(f).next().value;return Vc(d,b).map(function(k,l){return si("eqOp",k.type,g.type)(k,g,a)?y(l+1,5):y(-1,5)}).filter(function(k){return-1!==k.value})})},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",
i:{type:5,g:2}},{l:[{type:46,g:2},{type:46,g:3},{type:1,g:3}],m:function(){throw Error("FOCH0002: No collations are supported");},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{l:[{type:59,g:2},{type:59,g:2}],m:function(a,b,c,d,e){var f=!1,g=Le(a,b,c,d,e);return E.create({next:function(){if(f)return z;var k=g.next(0);if(k.done)return k;f=!0;return B(y(k.value,0))}})},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,
g:3}},{l:[{type:59,g:2},{type:59,g:2},{type:1,g:3}],m:function(){throw Error("FOCH0002: No collations are supported");},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{l:[{type:59,g:2}],m:function(a,b,c,d){var e=!1;return E.create({next:function(){if(e)return z;var f=d.Na();e=!0;return B(y(f,5))}})},localName:"count",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}},{l:[{type:46,g:2}],m:function(a,b,c,d){if(d.G())return d;a=Sq(d.M());
a=Ni(a);if(!a)throw Error("FORG0006: Incompatible types to be converted to a common type");if(!a.every(function(e){return C(e.type,2)}))throw Error("FORG0006: items passed to fn:avg are not all numeric.");b=a.reduce(function(e,f){return e+f.value},0)/a.length;return a.every(function(e){return C(e.type,5)||C(e.type,3)})?E.o(y(b,3)):a.every(function(e){return C(e.type,4)})?E.o(y(b,4)):E.o(y(b,6))},localName:"avg",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:46,g:2}],
m:function(a,b,c,d){if(d.G())return d;a=Tq(d.M());return E.o(a.reduce(function(e,f){return e.value<f.value?f:e}))},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:46,g:2},{type:1,g:3}],m:function(){throw Error("FOCH0002: No collations are supported");},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:46,g:2}],m:function(a,b,c,d){if(d.G())return d;a=Tq(d.M());return E.o(a.reduce(function(e,f){return e.value>
f.value?f:e}))},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:46,g:2},{type:1,g:3}],m:function(){throw Error("FOCH0002: No collations are supported");},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:46,g:2}],m:function(a,b,c,d){return Vq(a,b,c,d,E.o(y(0,5)))},localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:3}},{l:[{type:46,g:2},{type:46,g:0}],m:Vq,localName:"sum",
namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{l:[{type:59,g:2}],m:function(a,b,c,d){if(!d.G()&&!d.ya())throw Error("FORG0003: The argument passed to fn:zero-or-one contained more than one item.");return d},localName:"zero-or-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{l:[{type:59,g:2}],m:function(a,b,c,d){if(d.G())throw Error("FORG0004: The argument passed to fn:one-or-more was empty.");return d},localName:"one-or-more",namespaceURI:"http://www.w3.org/2005/xpath-functions",
i:{type:59,g:1}},{l:[{type:59,g:2}],m:function(a,b,c,d){if(!d.ya())throw Error("FORG0005: The argument passed to fn:exactly-one is empty or contained more than one item.");return d},localName:"exactly-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:3}},{l:[{type:59,g:2},{type:60,g:3}],m:function(a,b,c,d,e){if(d.G())return d;var f=e.first(),g=f.s;if(1!==g.length)throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return d.filter(function(k){k=
ae(g[0],E.o(k),b,"fn:filter",!1);k=f.value.call(void 0,a,b,c,k);if(!k.ya()||!C(k.first().type,0))throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return k.first().value})},localName:"filter",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:60,g:3}],m:function(a,b,c,d,e){if(d.G())return d;var f=e.first(),g=f.s;if(1!==g.length)throw Error("XPTY0004: signature of function passed to fn:for-each is incompatible.");var k=d.value,
l;return E.create({next:function(n){for(;;){if(!l){var q=k.next(0);if(q.done)return q;q=ae(g[0],E.o(q.value),b,"fn:for-each",!1);l=f.value.call(void 0,a,b,c,q).value}q=l.next(n);if(!q.done)return q;l=null}}})},localName:"for-each",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],m:function(a,b,c,d,e,f){if(d.G())return d;var g=f.first(),k=g.s;if(2!==k.length)throw Error("XPTY0004: signature of function passed to fn:fold-left is incompatible.");
return d.L(function(l){return l.reduce(function(n,q){n=ae(k[0],n,b,"fn:fold-left",!1);q=ae(k[1],E.o(q),b,"fn:fold-left",!1);return g.value.call(void 0,a,b,c,n,q)},e)})},localName:"fold-left",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],m:function(a,b,c,d,e,f){if(d.G())return d;var g=f.first(),k=g.s;if(2!==k.length)throw Error("XPTY0004: signature of function passed to fn:fold-right is incompatible.");return d.L(function(l){return l.reduceRight(function(n,
q){n=ae(k[0],n,b,"fn:fold-right",!1);q=ae(k[1],E.o(q),b,"fn:fold-right",!1);return g.value.call(void 0,a,b,c,q,n)},e)})},localName:"fold-right",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{l:[{type:59,g:2}],m:function(a,b,c,d){if(!b.j)throw Error("serialize() called but no xmlSerializer set in execution parameters.");a=d.M();if(!a.every(function(e){return C(e.type,53)}))throw Error("Expected argument to fn:serialize to resolve to a sequence of Nodes.");return E.o(y(a.map(function(e){return b.j.serializeToString(kj(e.value,
b,!1))}),1))},localName:"serialize",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}}],ue,[{l:[{type:59,g:3},{type:61,g:3}],m:function(a,b,c,d,e){var f,g;return E.create({next:function(){if(!f){var k=Lq(d,e,c,b);f=k.Gc;g=k.Dc}try{return f.next(0)}catch(l){bg(g.value,l)}}})},localName:"evaluate",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:59,g:2}},{l:[],m:function(){return E.o(y("undefined"===typeof VERSION?"devbuild":VERSION,1))},localName:"version",namespaceURI:"http://fontoxml.com/fontoxpath",
i:{type:1,g:3}}],[{l:[{type:23,g:3},{type:5,g:3}],m:function(a,b,c,d,e){return $b([d,e],function(f){var g=t(f);f=g.next().value;g=g.next().value;var k=c.za(f.value.namespaceURI,f.value.localName,g.value);if(null===k)return E.empty();f=new Bb({l:k.l,arity:g.value,localName:f.value.localName,namespaceURI:f.value.namespaceURI,i:k.i,value:k.m});return E.o(f)})},localName:"function-lookup",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{g:0,type:60}},{l:[{type:60,g:3}],m:function(a,b,c,d){return $b([d],
function(e){e=t(e).next().value;return e.Pa()?E.empty():E.o(y(new Ab("",e.u,e.j),23))})},localName:"function-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{l:[{type:60,g:3}],m:function(a,b,c,d){return $b([d],function(e){e=t(e).next().value;return E.o(y(e.A,5))})},localName:"function-arity",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}}]);function Xq(a){this.h=a}h=Xq.prototype;h.createAttributeNS=function(a,b){return this.h.createAttributeNS(a,b)};h.createCDATASection=function(a){return this.h.createCDATASection(a)};h.createComment=function(a){return this.h.createComment(a)};h.createDocument=function(){return this.h.createDocument()};h.createElementNS=function(a,b){return this.h.createElementNS(a,b)};h.createProcessingInstruction=function(a,b){return this.h.createProcessingInstruction(a,b)};h.createTextNode=function(a){return this.h.createTextNode(a)};var Yq=Symbol("IS_XPATH_VALUE_SYMBOL");function Zq(a){return function(b,c){b=Dc(new Mb(null===c?new Gb:c),b,xb(a));c={};return c[Yq]=!0,c.Db=b,c}};Wq.forEach(function(a){ig(a.namespaceURI,a.localName,a.l,a.i,a.m)});function $q(a){return a&&"object"===typeof a&&"lookupNamespaceURI"in a?function(b){return a.lookupNamespaceURI(b||null)}:function(){return null}}function ar(a){return function(b){var c=b.localName;return b.prefix?null:{namespaceURI:a,localName:c}}}
function br(a,b,c,d,e,f){var g,k,l,n,q,u,v;if(null===d||void 0===d)d=d||{};e?(g=e.logger||{trace:console.log.bind(console)},k=e.documentWriter,l=e.moduleImports,n=e.namespaceResolver,q=e.functionNameResolver,u=e.nodesFactory,v=e.xmlSerializer):(g={trace:console.log.bind(console)},l={},n=null,u=null,k=null,v=null,q=void 0);var A=new Mb(null===c?new Gb:c);c=l||Object.create(null);l=void 0===e.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":e.defaultFunctionNamespaceURI;var G=Kq(a,
f,n||$q(b),d,c,l,q||ar(l));a=b?Ec(A,b):E.empty();b=!u&&f.aa?new ef(b):new Xq(u);k=k?new Jb(k):Ib;u=Object.keys(d).reduce(function(fa,ea){var Ea=d[ea];fa["Q{}"+ea+"[0]"]=Ea&&"object"===typeof Ea&&Yq in Ea?function(){return E.create(Ea.Db)}:function(){return Ec(A,d[ea])};return fa},Object.create(null));n={};q=t(Object.keys(G.ia.Da));for(c=q.next();!c.done;n={Wa:n.Wa},c=q.next())n.Wa=c.value,u[n.Wa]||(u[n.Wa]=function(fa){return function(){return(0,G.ia.Da[fa.Wa])(H,L)}}(n));var H=new Fc({N:a.first(),
Ja:0,Ga:a,Ea:u});var L=new Lc(f.debug,f.Ha,A,b,k,e.currentContext,g,v);return{xb:H,zb:L,da:G.da}};function cr(a,b){var c={},d=0,e=!1,f=null;return{next:function(){if(e)return z;for(var g={};d<a.h.length;){a:{var k=a.h[d].key.value;if(!f){g.kb=a.h[d];var l=g.kb.value().$({default:function(n){return n},multiple:function(n){return function(){throw Error("Serialization error: The value of an entry in a map is expected to be a single item or an empty sequence. Use arrays when putting multiple values in a map. The value of the key "+n.kb.key.value+" holds multiple items");}}(g)}).first();if(null===
l){c[k]=null;d++;break a}f=dr(l,b)}l=f.next(0);f=null;c[k]=l.value;d++}g={kb:g.kb}}e=!0;return B(c)}}}
function er(a,b){var c=[],d=0,e=!1,f=null;return{next:function(){if(e)return z;for(;d<a.R.length;){if(!f){var g=a.R[d]().$({default:function(k){return k},multiple:function(){throw Error("Serialization error: The value of an entry in an array is expected to be a single item or an empty sequence. Use nested arrays when putting multiple values in an array.");}}).first();if(null===g){c[d++]=null;continue}f=dr(g,b)}g=f.next(0);f=null;c[d++]=g.value}e=!0;return B(c)}}}
function dr(a,b){if(C(a.type,61))return cr(a,b);if(C(a.type,62))return er(a,b);if(C(a.type,23)){var c=a.value;return{next:function(){return B("Q{"+(c.namespaceURI||"")+"}"+c.localName)}}}switch(a.type){case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:var d=a.value;return{next:function(){return B(sc(d))}};case 47:case 53:case 54:case 55:case 56:case 57:case 58:var e=a.value;return{next:function(){return B(kj(e,b,!1))}};default:return{next:function(){return B(a.value)}}}};var fr={ANY:0,NUMBER:1,STRING:2,BOOLEAN:3,NODES:7,FIRST_NODE:9,STRINGS:10,MAP:11,ARRAY:12,NUMBERS:13,ALL_RESULTS:14,ASYNC_ITERATOR:99};fr[fr.ANY]="ANY";fr[fr.NUMBER]="NUMBER";fr[fr.STRING]="STRING";fr[fr.BOOLEAN]="BOOLEAN";fr[fr.NODES]="NODES";fr[fr.FIRST_NODE]="FIRST_NODE";fr[fr.STRINGS]="STRINGS";fr[fr.MAP]="MAP";fr[fr.ARRAY]="ARRAY";fr[fr.NUMBERS]="NUMBERS";fr[fr.ALL_RESULTS]="ALL_RESULTS";fr[fr.ASYNC_ITERATOR]="ASYNC_ITERATOR";
function gr(a,b,c,d){switch(c){case 3:return b.getEffectiveBooleanValue();case 2:return b=Vc(b,d).M(),b.length?b.map(function(l){return Kd(l,1).value}).join(" "):"";case 10:return b=Vc(b,d).M(),b.length?b.map(function(l){return l.value+""}):[];case 1:return b=b.first(),null!==b&&C(b.type,2)?b.value:NaN;case 9:b=b.first();if(null===b)return null;if(!C(b.type,53))throw Error("Expected XPath "+$f(a)+" to resolve to Node. Got "+tb[b.type]);return kj(b.value,d,!1);case 7:b=b.M();if(!b.every(function(l){return C(l.type,
53)}))throw Error("Expected XPath "+$f(a)+" to resolve to a sequence of Nodes.");return b.map(function(l){return kj(l.value,d,!1)});case 11:b=b.M();if(1!==b.length)throw Error("Expected XPath "+$f(a)+" to resolve to a single map.");b=b[0];if(!C(b.type,61))throw Error("Expected XPath "+$f(a)+" to resolve to a map");return cr(b,d).next(0).value;case 12:b=b.M();if(1!==b.length)throw Error("Expected XPath "+$f(a)+" to resolve to a single array.");b=b[0];if(!C(b.type,62))throw Error("Expected XPath "+
$f(a)+" to resolve to an array");return er(b,d).next(0).value;case 13:return b.M().map(function(l){if(!C(l.type,2))throw Error("Expected XPath "+$f(a)+" to resolve to numbers");return l.value});case 99:var e=b.value,f=null,g=!1,k=function(){for(;!g;){if(!f){var l=e.next(0);if(l.done){g=!0;break}f=dr(l.value,d)}l=f.next(0);f=null;return l}return Promise.resolve({done:!0,value:null})};"asyncIterator"in Symbol?(b={},b=(b[Symbol.asyncIterator]=function(){return this},b.next=function(){return(new Promise(function(l){return l(k())})).catch(function(l){bg(a,
l)})},b)):b={next:function(){return new Promise(function(l){return l(k())})}};return b;case 14:return b.M().map(function(l){return dr(l,d).next(0).value});default:return b=b.M(),b.every(function(l){return C(l.type,53)&&!C(l.type,47)})?(b=b.map(function(l){return kj(l.value,d,!1)}),1===b.length?b[0]:b):1===b.length?(b=b[0],C(b.type,62)?er(b,d).next(0).value:C(b.type,61)?cr(b,d).next(0).value:Uc(b,d).first().value):Vc(E.create(b),d).M().map(function(l){return l.value})}};var hr=!1,ir=null,jr={getPerformanceSummary:function(){var a=ir.getEntriesByType("measure").filter(function(b){return b.name.startsWith("XPath: ")});return Array.from(a.reduce(function(b,c){var d=c.name.substring(7);b.has(d)?(d=b.get(d),d.times+=1,d.totalDuration+=c.duration):b.set(d,{xpath:d,times:1,totalDuration:c.duration,average:0});return b},new Map).values()).map(function(b){b.average=b.totalDuration/b.times;return b}).sort(function(b,c){return c.totalDuration-b.totalDuration})},setPerformanceImplementation:function(a){ir=
a},startProfiling:function(){if(null===ir)throw Error("Performance API object must be set using `profiler.setPerformanceImplementation` before starting to profile");ir.clearMarks();ir.clearMeasures();hr=!0},stopProfiling:function(){hr=!1}},kr=0;var lr={XPATH_3_1_LANGUAGE:"XPath3.1",XQUERY_3_1_LANGUAGE:"XQuery3.1",XQUERY_UPDATE_3_1_LANGUAGE:"XQueryUpdate3.1"};function mr(a,b,c,d,e,f){e=e||0;if(!a||"string"!==typeof a&&!("nodeType"in a))throw new TypeError("Failed to execute 'evaluateXPath': xpathExpression must be a string or an element depicting an XQueryX DOM tree.");f=f||{};try{var g=br(a,b,c||null,d||{},f,{qa:"XQueryUpdate3.1"===f.language,aa:"XQuery3.1"===f.language||"XQueryUpdate3.1"===f.language,debug:!!f.debug,Ha:!!f.disableCache});var k=g.xb;var l=g.zb;var n=g.da}catch(v){bg(a,v)}if(n.I)throw Error("XUST0001: Updating expressions should be evaluated as updating expressions");
if(3===e&&b&&"object"===typeof b&&"nodeType"in b&&(c=n.A(),b=Fb(b),null!==c&&!b.includes(c)))return!1;try{b=a;hr&&("string"!==typeof b&&(b=$f(b)),ir.mark(b+(0===kr?"":"@"+kr)),kr++);var q=J(n,k,l),u=gr(a,q,e,l);e=a;hr&&("string"!==typeof e&&(e=$f(e)),kr--,k=e+(0===kr?"":"@"+kr),ir.measure("XPath: "+e,k),ir.clearMarks(k));return u}catch(v){bg(a,v)}}Object.assign(mr,{Hc:14,ANY_TYPE:0,Pb:12,Qb:99,BOOLEAN_TYPE:3,Ub:9,hc:11,kc:7,oc:13,NUMBER_TYPE:1,rc:10,STRING_TYPE:2,Ic:"XPath3.1",Jc:"XQuery3.1",vc:"XQueryUpdate3.1"});
var nr={};Object.assign(mr,(nr.ALL_RESULTS_TYPE=14,nr.ANY_TYPE=0,nr.ARRAY_TYPE=12,nr.ASYNC_ITERATOR_TYPE=99,nr.BOOLEAN_TYPE=3,nr.FIRST_NODE_TYPE=9,nr.MAP_TYPE=11,nr.NODES_TYPE=7,nr.NUMBERS_TYPE=13,nr.NUMBER_TYPE=1,nr.STRINGS_TYPE=10,nr.STRING_TYPE=2,nr.XPATH_3_1_LANGUAGE="XPath3.1",nr.XQUERY_3_1_LANGUAGE="XQuery3.1",nr.XQUERY_UPDATE_3_1_LANGUAGE="XQueryUpdate3.1",nr));function or(a,b,c,d,e){return mr(a,b,c,d,mr.Qb,e)};function pr(a,b,c,d){var e={};return e.pendingUpdateList=a.fa.map(function(f){return f.h(d)}),e.xdmValue=gr(b,E.create(a.H),c,d),e};function qr(a,b,c,d,e){var f,g,k,l,n,q,u,v,A,G;return Aa(new za(new va(function(H){switch(H.h){case 1:e=e||{};try{l=br(a,b,c||null,d||{},e||{},{qa:!0,aa:!0,debug:!!e.debug,Ha:!!e.disableCache}),f=l.xb,g=l.zb,k=l.da}catch(fa){bg(a,fa)}if(k.I){H.h=2;break}n=[];q=or(a,b,c,d,Object.assign(Object.assign({},e),{language:"XQueryUpdate3.1"}));var L=q.next();H.h=3;return{value:L};case 3:u=H.u;case 4:if(u.done){H.h=6;break}n.push(u.value);L=q.next();H.h=7;return{value:L};case 7:u=H.u;H.h=4;break;case 6:return v=
{},H.return(Promise.resolve((v.pendingUpdateList=[],v.xdmValue=n,v)));case 2:try{G=k.u(f,g),A=G.next(0)}catch(fa){bg(a,fa)}return H.return(pr(A.value,a,e.returnType,g))}})))};function rr(a,b,c,d,e){e=e||{};try{var f=br(a,b,c||null,d||{},e||{},{qa:!0,aa:!0,debug:!!e.debug,Ha:!!e.disableCache});var g=f.xb;var k=f.zb;var l=f.da}catch(q){bg(a,q)}if(!l.I)return g={},k={},k.pendingUpdateList=[],k.xdmValue=mr(a,b,c,d,e.i,Object.assign(Object.assign({},e),(g.language=mr.vc,g))),k;try{var n=l.u(g,k).next(0)}catch(q){bg(a,q)}return pr(n.value,a,e.returnType,k)};function sr(a,b,c,d,e){return mr(a,b,c,d,mr.Pb,e)};function tr(a,b,c,d,e){return mr(a,b,c,d,mr.BOOLEAN_TYPE,e)};function ur(a,b,c,d,e){return mr(a,b,c,d,mr.Ub,e)};function vr(a,b,c,d,e){return mr(a,b,c,d,mr.hc,e)};function wr(a,b,c,d,e){return mr(a,b,c,d,mr.kc,e)};function xr(a,b,c,d,e){return mr(a,b,c,d,mr.NUMBER_TYPE,e)};function yr(a,b,c,d,e){return mr(a,b,c,d,mr.oc,e)};function zr(a,b,c,d,e){return mr(a,b,c,d,mr.STRING_TYPE,e)};function Ar(a,b,c,d,e){return mr(a,b,c,d,mr.rc,e)};function Br(a,b,c,d){b=new Mb(b?b:new Gb);d=d?new Jb(d):Ib;c=c?c=new Xq(c):null;a=a.map(Oj);of(a,b,c,d)};function Cr(a,b,c){switch(b.type){case 0:return[a,{type:0}];case 1:return[a,{type:1}];case 3:return[""+Cr(a+"("+(c?c:"contextItem")+")",b.i,c)[0],b.i];case 4:return[a,{type:4}];case 5:throw Error("Trying to get value of generated code with type None");default:throw Error("Unreachable! Trying to get compiled value of unsupported GeneratedCodeType.");}}function Dr(a,b,c){return{code:a,xa:b,isAstAccepted:!0,ta:c}}function au(a){return{isAstAccepted:!1,reason:a}};function bu(a,b,c,d){d=void 0===d?"contextItem":d;switch(c.type){case 0:case 1:return Dr("!!"+a,{type:0},[b]);case 3:return a=bu(a+"("+d+")","",c.i,d),a.isAstAccepted?Dr("!!"+a.code,a.xa,[b]):a;case 4:return Dr("(() => {\n\t\t\t\t\tconst result = "+a+".next();\n\t\t\t\t\treturn result.done ? false : !!result.value;\n\t\t\t\t})()",{type:0});case 5:throw Error("Trying to get value of generated code with type None");default:throw Error("Unreachable! Trying to get compiled value of unsupported GeneratedCodeType.");
}}var cu={DONE_TOKEN:z,getEffectiveBooleanValue:lb,isSubtypeOf:C,ready:B};var du={qc:"pathExpr",Ob:"andOp",pc:"orOp",sc:"stringConstantExpr",Sb:"equalOp",nc:"notEqualOp",dc:"lessThanOrEqualOp",cc:"lessThanOp",Yb:"greaterThanOrEqualOp",Xb:"greaterThanOp",Tb:"eqOp",jc:"neOp",fc:"ltOp",ec:"leOp",Zb:"gtOp",Wb:"geOp",ac:"isOp",mc:"nodeBeforeOp",lc:"nodeAfterOp",Vb:"functionCallExpr"},eu=Object.values(du);
function fu(a,b,c,d,e){a=M(a,c);a=M(a,eu);if(!a)return[au("Unsupported: a base expression used with an operand."),null];b+=c;c=t(d.yb(a,b,d));d=c.next().value;c=c.next().value;return d.isAstAccepted?0===e?[bu(b,d.code,d.xa),null]:[Dr(b,d.xa,[d.code]),c]:[d,null]};function gu(a,b,c){4===b&&(a+=".next().value");47===c&&(a="(function () { const attr = "+a+"; return attr ? domFacade.getData(attr) : null})()");return a}
function hu(a,b,c,d,e){var f=O(M(a,"firstOperand")[1],"type");a=O(M(a,"secondOperand")[1],"type");if(!f||!a)return au("Left or right type of compare are not found, annotation failed.");var g=[47,1];if(!g.includes(f.type)||!g.includes(a.type))return au("Unsupported types in compare: ["+tb[f.type]+", "+tb[a.type]+"]");if(!c.isAstAccepted)return c;if(!d.isAstAccepted)return d;if(!f||!a)return au("Operands in compare weren't annotated");g=new Map([["eqOp","==="],["neOp","!=="]]);if(!g.has(b))return au(b+
" not yet implemented");b=g.get(b);g=Cr(c.code,c.xa);var k=Cr(d.code,d.xa);return Dr("function "+e+"(contextItem) {\n\t\t\t\t"+c.ta.join("\n")+"\n\t\t\t \t"+d.ta.join("\n")+"\n\t \t     \treturn "+gu(g[0],g[1].type,f.type)+" "+b+" "+gu(k[0],k[1].type,a.type)+";\n\t\t}",{type:3,i:{type:0}})}var iu={},ju=(iu.equalOp="eqOp",iu.notEqualOp="neOp",iu.lessThanOrEqualOp="leOp",iu.lessThanOp="ltOp",iu.greaterThanOrEqualOp="geOp",iu.greaterThanOp="gtOp",iu);var mu={"local-name":ku,name:lu};function nu(a){return"("+a+".localName || "+a+".target || '')"}function ou(a){return"((("+a+".prefix || '').length !== 0 ? "+a+".prefix + ':' : '')\n\t\t+ ("+a+".localName || "+a+".target || ''))"}
function pu(a,b,c,d,e){a=M(a,"arguments");if(1===a.length)b="function "+b+"(contextItem) {\n\t\t\tif (contextItem === undefined || contextItem === null) {\n\tthrow new Error('XPDY0002: The function which was called depends on dynamic context, which is absent.');\n}\n\t\t\treturn "+d("contextItem")+";\n\t\t}";else if(2===a.length)if(e=a[1],c=t(c.yb(e,"arg",c)),a=c.next().value,c.next(),c=a.isAstAccepted?Dr("arg",a.xa,[a.code]):a,"contextItemExpr"===e[0])b="function "+b+"(contextItem) {\n\t\t\t\tif (contextItem === undefined || contextItem === null) {\n\tthrow new Error('XPDY0002: The function which was called depends on dynamic context, which is absent.');\n}\n\t\t\t\treturn "+
d("contextItem")+";\n\t\t\t}";else{if(!c.isAstAccepted)return c;b="function "+b+"(contextItem) {\n\t\t\t\t"+c.ta+"\n\t\t\t\tconst value = "+Cr(c.code,c.xa)[0]+';\n\t\t\t\tconst childElement = value.next().value;\n\t\t\t\treturn (value.done ? "" : '+d("childElement")+");\n\t\t\t}"}else return au("Incorrect arg count for "+e+" function");return Dr(b,{type:3,i:{type:0}})}function lu(a,b,c){return pu(a,b,c,ou,"name()")}function ku(a,b,c){return pu(a,b,c,nu,"local-name()")};function qu(a){return JSON.stringify(a).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")};function ru(a,b,c,d){var e=t(fu(a,b,"firstOperand",c,0)),f=e.next().value;e=e.next().value;if(!f.isAstAccepted)return[f,null];c=t(fu(a,b,"secondOperand",c,0));a=c.next().value;c=c.next().value;return a.isAstAccepted?[Dr("\n\tfunction "+b+"(contextItem) {\n\t\t"+f.ta.join("\n")+"\n\t\t"+a.ta.join("\n")+"\n\t\treturn "+f.code+" "+d+" "+a.code+";\n\t}\n\t",{type:3,i:{type:0}}),"&&"===d?Ah(e,c):e||c]:[a,null]};function su(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return b.filter(function(d){return""!==d}).join(" && ")}function tu(a,b,c,d,e,f){var g=su(e+c,"i"+c+" < "+e+c+".length"),k=1!==c?"i"+c+" = 0;":"";a=su("contextItem"+c,a,b);return Dr("\n\t"+f+"\n\twhile ("+g+") {\n\t\tconst contextItem"+c+" = "+e+c+"[i"+c+"];\n\t\tif (!("+a+")) {\n\t\t\ti"+c+"++;\n\t\t\tcontinue;\n\t\t}\n\t\t"+d+"\n\t}\n\t"+k+"\n\t",{type:2},["let i"+c+" = 0;"])}
function uu(a,b,c,d,e){a=su("i"+c+" === 0","contextItem"+c,a,b);return Dr("\n\t\t"+e+"\n\t\tif ("+a+") {\n\t\t\t"+d+"\n\t\t}\n\t\t",{type:2},["let i"+c+" = 0;"])};var vu={tc:"textTest",Rb:"elementTest",ic:"nameTest",uc:"Wildcard"},wu=Object.values(vu);
function xu(a,b,c){if(null===b.namespaceURI&&"*"!==b.prefix){c=c.ba(b.prefix||"")||null;if(!c&&b.prefix)throw Error("XPST0081: The prefix "+b.prefix+" could not be resolved.");b.namespaceURI=c}c=b.prefix;var d=b.namespaceURI;b=b.localName;var e=a+".nodeType\n\t\t&& ("+a+".nodeType === /*ELEMENT_NODE*/ 1\n\t\t|| "+a+".nodeType === /*ATTRIBUTE_NODE*/ 2)";if("*"===c)return"*"===b?[Dr(e,{type:0}),null]:[Dr(e+" && "+a+".localName === "+qu(b),{type:0}),"name-"+b];e="*"!==b?e+" && "+a+".localName === "+
qu(b)+" && ":"";c=""===c?a+".nodeType\n&& "+a+".nodeType === /*ELEMENT_NODE*/ 1 ? "+qu(d)+" : null":qu(d);return[Dr(e+("("+a+".namespaceURI || null) === (("+c+") || null)"),{type:0}),"name-"+b]}
function yu(a,b,c){var d=a[0];switch(d){case vu.Rb:d=(a=M(a,"elementName"))&&M(a,"star");var e=b+".nodeType === /*ELEMENT_NODE*/ 1";null===a||d?b=[Dr(e,{type:0}),null]:(a=Fg(M(a,"QName")),b=xu(b,a,c));return b;case vu.tc:return[Dr(b+".nodeType === /*TEXT_NODE*/ 3",{type:0}),null];case vu.ic:return xu(b,Fg(a),c);case vu.uc:return M(a,"star")?(d=M(a,"uri"),null!==d?b=xu(b,{localName:"*",namespaceURI:N(d),prefix:""},c):(d=M(a,"NCName"),b="star"===M(a,"*")[0]?xu(b,{localName:N(d),namespaceURI:null,prefix:"*"},
c):xu(b,{localName:"*",namespaceURI:null,prefix:N(d)},c))):b=xu(b,{localName:"*",namespaceURI:null,prefix:"*"},c),b;default:return[au("Unsupported: the test '"+d+"'."),null]}};function zu(a,b){if(0===a.length)return[Dr("\n\t\t\tif (!hasReturned) {\n\t\t\t\thasReturned = true;\n\t\t\t\treturn ready(contextItem);\n\t\t\t}\n\t\t\t",{type:2},["let hasReturned = false;"]),null];for(var c="",d=[],e=null,f=a.length-1;0<=f;f--){var g=a[f],k=f+1,l=M(g,"predicates");a:{var n=b;var q="",u=[];if(l){l=Q(l,"*");for(var v=null,A=0;A<l.length;A++){var G="step"+k+"_predicate"+A,H=t(n.yb(l[A],G,n)),L=H.next().value;H=H.next().value;if(!L.isAstAccepted){n=[L,null];break a}v=Ah(v,H);G=bu(G,
"",L.xa,"contextItem"+k);if(!G.isAstAccepted){n=[G,null];break a}q=0===A?q+G.code:q+" && "+G.code;u.push(L.code)}n=[Dr(q,{type:0},u),v]}else n=[Dr("",{type:5},u),null]}q=t(n);n=q.next().value;u=q.next().value;if(!n.isAstAccepted)return[n,null];if(q=M(g,"xpathAxis")){l=M(g,wu);if(!l)return[au("Unsupported: the test in the '"+g+"' step."),null];c=f===a.length-1?"i"+k+"++;\n\t\t\t\t\t   return ready(contextItem"+k+");":c+"\n\t\t\t\t\t   i"+k+"++;";v=t(yu(l,"contextItem"+k,b));l=v.next().value;v=v.next().value;
if(!l.isAstAccepted)return[l,null];u=Ah(v,u);a:switch(l=l.code,v=n.code,q=N(q),q){case "attribute":k=[tu(l,v,k,c,"attributeNodes","\n\tlet attributeNodes"+k+";\n\tif (contextItem && contextItem"+(k-1)+".nodeType === /*ELEMENT_NODE*/ 1) {\n\t\tattributeNodes"+k+" =  domFacade.getAllAttributes(contextItem"+(k-1)+" "+(u?', "'+u+'"':"")+");\n\t}\n\t"),"type-1"];break a;case "child":k=[tu(l,v,k,c,"childNodes","const childNodes"+k+" = domFacade.getChildNodes(contextItem"+(k-1)+" "+(u?', "'+u+'"':"")+");"),
null];break a;case "parent":k=[uu(l,v,k,c,"\n\tconst contextItem"+k+" = domFacade.getParentNode(contextItem"+(k-1)+" "+(u?', "'+u+'"':"")+");\n\t"),null];break a;case "self":k=[uu(l,v,k,c,"const contextItem"+k+" = contextItem"+(k-1)+";"),u];break a;default:k=[au("Unsupported: the "+q+" axis"),null]}c=t(k);k=c.next().value;c=c.next().value;if(!k.isAstAccepted)return[k,null];0===f&&(e=c);d.push.apply(d,[].concat(w(k.ta),w(n.ta)));c=k.code}else return[au("Unsupported: filter expressions."),null];if(0<
Q(g,"lookup").length)return[au("Unsupported: lookups."),null]}return[Dr("const contextItem0 = contextItem;"+c,{type:2},d),e]};function Au(a,b,c){var d=a[0];switch(d){case du.qc:d="";M(a,"rootExpr")&&(d="\n\t\tlet documentNode = contextItem;\n\t\twhile (documentNode.nodeType !== /*DOCUMENT_NODE*/9) {\n\t\t\tdocumentNode = domFacade.getParentNode(documentNode);\n\t\t\tif (documentNode === null) {\n\t\t\t\tthrow new Error('XPDY0050: the root node of the context node is not a document node.');\n\t\t\t}\n\t\t}\n\t\tcontextItem = documentNode;\n\t\t");var e=t(zu(Q(a,"stepExpr"),c));a=e.next().value;e=e.next().value;return a.isAstAccepted?
[Dr("\n\tfunction "+b+"(contextItem) {\n\t\t"+d+"\n\t\t"+a.ta.join("\n")+"\n\t\tconst next = () => {\n\t\t\t"+a.code+"\n\t\t\treturn DONE_TOKEN;\n\t\t};\n\t\treturn {\n\t\t\tnext,\n\t\t\t[Symbol.iterator]() { return this; }\n\t\t};\n\t}\n\t",{type:3,i:{type:4}}),e]:[a,null];case du.Ob:return ru(a,b,c,"&&");case du.pc:return ru(a,b,c,"||");case du.sc:return a=M(a,"value")[1]||"",a=qu(a),[Dr("const "+b+" = "+a+";",{type:1}),null];case du.Sb:case du.nc:case du.dc:case du.cc:case du.Yb:case du.Xb:case du.Tb:case du.jc:case du.fc:case du.ec:case du.Zb:case du.Wb:case du.ac:case du.mc:case du.lc:a:{var f=
t(fu(a,b,"firstOperand",c));e=f.next().value;f.next();if(e.isAstAccepted)if(f=t(fu(a,b,"secondOperand",c)),c=f.next().value,f.next(),c.isAstAccepted)switch(d){case "eqOp":case "neOp":case "ltOp":case "leOp":case "gtOp":case "geOp":case "isOp":b=hu(a,d,e,c,b);break a;case "equalOp":case "notEqualOp":case "lessThanOrEqualOp":case "lessThanOp":case "greaterThanOrEqualOp":case "greaterThanOp":f=O(a,"type");var g=O(a,"type");b=f&&g?3===f.g&&3===g.g?hu(a,ju[d],e,c,b):au("generalCompare with sequences is still in development"):
au("types of compare are not known");break a;default:b=au("Unsupported compare type")}else b=c;else b=e}return[b,null];case du.Vb:return d=N(M(a,"functionName")),[void 0!==mu[d]?mu[d](a,b,c):au("Unsupported function: "+d),null];default:return[au("Unsupported: the base expression '"+d+"'."),null]}};function Bu(a,b,c){switch(a){case 9:c=t(Cr("compiledXPathExpression",b));a=c.next().value;if(4!==c.next().value.type)throw Error("Trying access generated code as an iterator while this is not the case.");return Dr("\n\tconst firstResult = "+a+".next();\n\tif (!firstResult.done) {\n\t\treturn firstResult.value\n\t}\n\treturn null;\n\t",{type:2});case 7:return c=t(Cr("compiledXPathExpression",b)),a=c.next().value,4!==c.next().value.type?au("Return type was not an iterator"):Dr("\n\tconst nodes = [];\n\tfor (const node of "+
a+") {\n\t\tnodes.push(node);\n\t}\n\treturn nodes;\n\t",{type:2});case 3:return c=bu("compiledXPathExpression","",b),c.isAstAccepted?Dr("return "+c.code+";",{type:2}):c;case 2:return void 0===c?c=au("Full AST wasn't annotated so we cannot correctly emit a string return"):C(c,1)||C(c,47)?(b=t(Cr("compiledXPathExpression",b)),a=b.next().value,b=b.next().value,c=Dr("return "+gu(a,b.type,c)+" || '';",{type:2})):c=au("Not implemented: returning anything but strings and attributes from codegen"),c;default:return au("Unsupported: the return type '"+
a+"'.")}}
function Cu(a,b,c){var d=M(a,"mainModule");if(!d)return au("Unsupported: Can not execute a library module.");if(M(d,"prolog"))return au("Unsupported: XQuery.");d=P(d,["queryBody","*"]);c.yb=Au;var e=t(Au(d,"compiledXPathExpression",c));c=e.next().value;e.next();if(!1===c.isAstAccepted)return c;e=c.ta?c.ta.join("\n"):"";d=O(d,"type");b=Bu(b,c.xa,d?d.type:void 0);if(!1===b.isAstAccepted)return b;b=e+c.code+b.code;c="\n\treturn (contextItem, domFacade, runtimeLib) => {\n\t\tconst {\n\t\t\tDONE_TOKEN,\n\t\t\tValueType,\n\t\t\tXPDY0002,\n\t\t\tdeterminePredicateTruthValue,\n\t\t\tisSubtypeOf,\n\t\t\tready,\n\t\t\tatomize,\n\t\t} = runtimeLib;";Du(a)&&
(c+='\n\t\tif (!contextItem) {\n\t\t\tthrow XPDY0002("Context is needed to evaluate the given path expression.");\n\t\t}\n\n\t\tif (!contextItem.nodeType) {\n\t\t\tthrow new Error("Context item must be subtype of node().");\n\t\t}\n\t\t');return{code:c+(b+"}\n//# sourceURL=generated.js"),isAstAccepted:!0}}function Du(a){var b=Q(a,"*");if("pathExpr"===a[0])return!0;a=t(b);for(b=a.next();!b.done;b=a.next())if(Du(b.value))return!0;return!1};function Eu(a,b,c){c=c||{};b=b||0;"string"===typeof a?(a=Wk(a),a=Eq(a,{aa:"XQuery3.1"===c.language||"XQueryUpdate3.1"===c.language,debug:!1})):a=Sk(a);var d=M(a,"mainModule");if(!d)return au("Unsupported: XQuery Library modules are not supported.");if(M(d,"prolog"))return au("Unsupported: XQuery Prologs are not supported.");d={ba:c.namespaceResolver||$q(null)};c=new th(new xg(new lg(d.ba,{},void 0===c.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":c.defaultFunctionNamespaceURI,
c.functionNameResolver||ar("http://www.w3.org/2005/xpath-functions"))));T(a,c);return Cu(a,b,d)};function Fu(a,b,c){c=c?c:new Gb;return a()(b,c,cu)};var Gu={},Hu=(Gu["http://www.w3.org/2005/XQueryX"]="xqx",Gu["http://www.w3.org/2007/xquery-update-10"]="xquf",Gu["http://fontoxml.com/fontoxpath"]="x",Gu);
function Iu(a,b){switch(a){case "copySource":case "insertAfter":case "insertAsFirst":case "insertAsLast":case "insertBefore":case "insertInto":case "modifyExpr":case "newNameExpr":case "replacementExpr":case "replaceValue":case "returnExpr":case "sourceExpr":case "targetExpr":case "transformCopies":case "transformCopy":return{localName:a,rb:b||"http://www.w3.org/2005/XQueryX"};case "deleteExpr":case "insertExpr":case "renameExpr":case "replaceExpr":case "transformExpr":return{localName:a,rb:"http://www.w3.org/2007/xquery-update-10"};
case "x:stackTrace":return{localName:"stackTrace",rb:"http://fontoxml.com/fontoxpath"};default:return{localName:a,rb:"http://www.w3.org/2005/XQueryX"}}}
function Ju(a,b,c,d,e){if("string"===typeof c)return 0===c.length?null:b.createTextNode(c);if(!Array.isArray(c))throw new TypeError("JsonML element should be an array or string");var f=Iu(c[0],d);d=f.rb;f=b.createElementNS(d,Hu[d]+":"+f.localName);var g=c[1],k=1;if("object"===typeof g&&!Array.isArray(g)){if(null!==g){k=t(Object.keys(g));for(var l=k.next();!l.done;l=k.next()){l=l.value;var n=g[l];null!==n&&("type"===l?void 0!==n&&a.setAttributeNS(f,d,"fontoxpath:"+l,vb(n)):e&&"prefix"===l&&""===n||
a.setAttributeNS(f,d,Hu[d]+":"+l,n))}}k=2}g=k;for(k=c.length;g<k;++g)l=Ju(a,b,c[g],d,e),null!==l&&a.insertBefore(f,l,null);return f}
function Ku(a,b,c,d){d=void 0===d?Ib:d;a=Wk(a);var e=Eq(a,{aa:"XQuery3.1"===b.language||"XQueryUpdate3.1"===b.language,debug:b.debug}),f=new lg(b.namespaceResolver||function(){return null},{},void 0===b.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":b.defaultFunctionNamespaceURI,b.functionNameResolver||function(){return null});f=new xg(f);var g=M(e,["mainModule","libraryModule"]),k=M(g,"moduleDecl");if(k){var l=N(M(k,"prefix"));k=N(M(k,"uri"));Bg(f,l,k)}(g=M(g,"prolog"))&&Hq(g,
f,!1);!1!==b.annotateAst&&lh(e,new th(f));f=new Gb;b=Ju(d,c,e,null,!1===b.Kc);d.insertBefore(b,c.createComment(a),f.getFirstChild(b));return b};function Lu(a){return Promise.resolve(a)};function Mu(a,b,c){var d=a.stack;d&&(d.includes(a.message)&&(d=d.substr(d.indexOf(a.message)+a.message.length).trim()),d=d.split("\n"),d.splice(10),d=d.map(function(e){return e.startsWith("    ")||e.startsWith("\t")?e:"    "+e}),d=d.join("\n"));a=Error.call(this,"Custom XPath function Q{"+c+"}"+b+" raised:\n"+a.message+"\n"+d);this.message=a.message;"stack"in a&&(this.stack=a.stack)}x(Mu,Error);
function Nu(a,b,c){return 0===b.g?a.G()?null:dr(a.first(),c).next(0).value:2===b.g||1===b.g?a.M().map(function(d){if(C(d.type,47))throw Error("Cannot pass attribute nodes to custom functions");return dr(d,c).next(0).value}):dr(a.first(),c).next(0).value}
function Ou(a){if("object"===typeof a)return a;a=a.split(":");if(2!==a.length)throw Error("Do not register custom functions in the default function namespace");var b=t(a);a=b.next().value;b=b.next().value;var c=kg[a];if(!c){c="generated_namespace_uri_"+a;if(kg[a])throw Error("Prefix already registered: Do not register the same prefix twice.");kg[a]=c}return{localName:b,namespaceURI:c}}
function Pu(a,b,c,d){a=Ou(a);var e=a.namespaceURI,f=a.localName;if(!e)throw qg();var g=b.map(function(l){return xb(l)}),k=xb(c);ig(e,f,g,k,function(l,n,q){var u=Array.from(arguments);u.splice(0,3);u=u.map(function(G,H){return Nu(G,g[H],n)});var v={};v=(v.currentContext=n.u,v.domFacade=n.h.h,v);try{var A=d.apply(void 0,[v].concat(w(u)))}catch(G){throw new Mu(G,f,e);}return A&&"object"===typeof A&&Object.getOwnPropertySymbols(A).includes(Yq)?E.create(A.Db):Ec(n.h,A,k)})};function Qu(a,b){b=void 0===b?{debug:!1}:b;b=Eq(a,{aa:!0,debug:b.debug});lh(b,new th(void 0));b=M(b,"libraryModule");if(!b)throw Error("XQuery module must be declared in a library module.");var c=M(b,"moduleDecl"),d=M(c,"uri"),e=N(d);c=M(c,"prefix");d=N(c);c=new xg(new lg(function(){return null},Object.create(null),"http://www.w3.org/2005/xpath-functions",ar("http://www.w3.org/2005/xpath-functions")));Bg(c,d,e);b=M(b,"prolog");if(null!==b){try{var f=Hq(b,c)}catch(g){bg(a,g)}f.Ma.forEach(function(g){if(e!==
g.namespaceURI)throw Error("XQST0048: Functions and variables declared in a module must reside in the module target namespace.");});Uk(e,f)}else Uk(e,{Ma:[],Ua:[]});return e};var Ru=new Map;function Su(a){var b;a:{if(b=Ck.get(a))for(var c=t(Object.keys(b)),d=c.next();!d.done;d=c.next())if(d=d.value,b[d]&&b[d].length){b=b[d][0].h;break a}b=null}if(b)return b;if(Ru.has(a))return Ru.get(a);b="string"===typeof a?Eq(a,{aa:!1}):Sk(a);b=P(b,["mainModule","queryBody","*"]);if(null===b)throw Error("Library modules do not have a specificity");b=Bk(b,{qa:!1,aa:!1});Ru.set(a,b);return b}function Tu(a){return Su(a).A()}function Uu(a,b){return zf(Su(a).s,Su(b).s)}var Vu=new Gb;
"undefined"!==typeof fontoxpathGlobal&&(fontoxpathGlobal.compareSpecificity=Uu,fontoxpathGlobal.compileXPathToJavaScript=Eu,fontoxpathGlobal.domFacade=Vu,fontoxpathGlobal.evaluateXPath=mr,fontoxpathGlobal.evaluateXPathToArray=sr,fontoxpathGlobal.evaluateXPathToAsyncIterator=or,fontoxpathGlobal.evaluateXPathToBoolean=tr,fontoxpathGlobal.evaluateXPathToFirstNode=ur,fontoxpathGlobal.evaluateXPathToMap=vr,fontoxpathGlobal.evaluateXPathToNodes=wr,fontoxpathGlobal.evaluateXPathToNumber=xr,fontoxpathGlobal.evaluateXPathToNumbers=
yr,fontoxpathGlobal.evaluateXPathToString=zr,fontoxpathGlobal.evaluateXPathToStrings=Ar,fontoxpathGlobal.evaluateUpdatingExpression=qr,fontoxpathGlobal.evaluateUpdatingExpressionSync=rr,fontoxpathGlobal.executeJavaScriptCompiledXPath=Fu,fontoxpathGlobal.executePendingUpdateList=Br,fontoxpathGlobal.getBucketForSelector=Tu,fontoxpathGlobal.getBucketsForNode=Fb,fontoxpathGlobal.precompileXPath=Lu,fontoxpathGlobal.registerXQueryModule=Qu,fontoxpathGlobal.registerCustomXPathFunction=Pu,fontoxpathGlobal.parseScript=
Ku,fontoxpathGlobal.profiler=jr,fontoxpathGlobal.createTypedValueFactory=Zq,fontoxpathGlobal.Language=lr,fontoxpathGlobal.ReturnType=fr);
return fontoxpathGlobal;
}

)
	.call(typeof window === 'undefined' ? undefined : window, xspattern, prsc);
export const compareSpecificity = fontoxpath.compareSpecificity;
export const compileXPathToJavaScript = fontoxpath.compileXPathToJavaScript;
export const createTypedValueFactory = fontoxpath.createTypedValueFactory;
export const domFacade = fontoxpath.domFacade;
export const evaluateUpdatingExpression = fontoxpath.evaluateUpdatingExpression;
export const evaluateUpdatingExpressionSync = fontoxpath.evaluateUpdatingExpressionSync;
export const evaluateXPath = fontoxpath.evaluateXPath;
export const evaluateXPathToArray = fontoxpath.evaluateXPathToArray;
export const evaluateXPathToAsyncIterator = fontoxpath.evaluateXPathToAsyncIterator;
export const evaluateXPathToBoolean = fontoxpath.evaluateXPathToBoolean;
export const evaluateXPathToFirstNode = fontoxpath.evaluateXPathToFirstNode;
export const evaluateXPathToMap = fontoxpath.evaluateXPathToMap;
export const evaluateXPathToNodes = fontoxpath.evaluateXPathToNodes;
export const evaluateXPathToNumber = fontoxpath.evaluateXPathToNumber;
export const evaluateXPathToNumbers = fontoxpath.evaluateXPathToNumbers;
export const evaluateXPathToString = fontoxpath.evaluateXPathToString;
export const evaluateXPathToStrings = fontoxpath.evaluateXPathToStrings;
export const executeJavaScriptCompiledXPath = fontoxpath.executeJavaScriptCompiledXPath;
export const executePendingUpdateList = fontoxpath.executePendingUpdateList;
export const getBucketForSelector = fontoxpath.getBucketForSelector;
export const getBucketsForNode = fontoxpath.getBucketsForNode;
export const Language = fontoxpath.Language;
export const parseScript = fontoxpath.parseScript;
export const precompileXPath = fontoxpath.precompileXPath;
export const profiler = fontoxpath.profiler;
export const registerCustomXPathFunction = fontoxpath.registerCustomXPathFunction;
export const registerXQueryModule = fontoxpath.registerXQueryModule;
export const ReturnType = fontoxpath.ReturnType;
export default fontoxpath;
