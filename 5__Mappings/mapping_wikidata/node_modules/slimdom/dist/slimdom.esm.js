class t{constructor(t,n,e,r){this.source=null,this.observer=t,this.node=n,this.options=e,this.source=r||null,r&&t.t.push(this)}collectInterestedObservers(t,n,e,r,o){if(this.node!==n&&!this.options.subtree)return;if("attributes"===t&&!this.options.attributes)return;if("characterData"===t&&!this.options.characterData)return;if("childList"===t&&!this.options.childList)return;let s=r.indexOf(this.observer);s<0&&(s=r.length,r.push(this.observer),o.push(void 0)),("attributes"===t&&this.options.attributeOldValue||"characterData"===t&&this.options.characterDataOldValue)&&(o[s]=e.oldValue)}}class n{constructor(t){this.o=[],this.i=t}register(n,e){const r=this.o;let o=!1;r.forEach((t=>{t.observer===n&&(o=!0,function(t){for(let n=t.observer.t.length-1;n>=0;--n){const e=t.observer.t[n];if(e.source!==t)return;e.node.o.removeTransientRegisteredObserver(e),t.observer.t.splice(n,1)}}(t),t.options=e)})),o||(this.o.push(new t(n,this.i,e)),n.u.push(this.i))}removeTransientRegisteredObserver(t){this.o.splice(this.o.indexOf(t),1)}removeForObserver(t){let n=0;for(let e=0,r=this.o.length;e<r;++e){const r=this.o[e];r.observer!==t&&(e!==n&&(this.o[n]=r),++n)}this.o.length=n}collectInterestedObservers(t,n,e,r,o){this.o.forEach((s=>{s.collectInterestedObservers(t,n,e,r,o)}))}appendTransientRegisteredObservers(t){this.o.forEach((n=>{n.options.subtree&&t.o.registerTransient(n)}))}registerTransient(n){this.o.push(new t(n.observer,this.i,n.options,n))}}function e(t,n,...e){"function"!=typeof queueMicrotask?Promise.resolve().then((()=>t.apply(n,e))):queueMicrotask((()=>t.apply(n,e)))}class r{constructor(){this.l=new Set,this.h=!1}appendRecord(t,n){t.m.push(n),this.l.add(t)}queueMutationObserverMicrotask(){this.h||(this.h=!0,e((()=>{this.p()}),this))}p(){this.h=!1;const t=Array.from(this.l);this.l.clear(),t.forEach((t=>{e((t=>{const n=t.takeRecords();var e;(e=t).t.forEach((t=>{t.node.o.removeTransientRegisteredObserver(t)})),e.t.length=0,n.length>0&&t.g(n,t)}),this,t)}))}}class o{constructor(t){this.v=t}deref(){return this.v}}const s=new class{constructor(){this.l=new r,this.C=[]}forEachRange(t){let n=this.C.length;for(let e=n-1;e>=0;--e){const r=this.C[e].deref();null==r?(this.C[e]=this.C[n-1],this.C.pop(),n-=1):t(r)}}addRange(t){var n;this.C.push((n=t,"function"==typeof WeakRef?new WeakRef(n):new o(n)))}removeRange(t){let n=this.C.length;for(let e=n-1;e>=0;--e){const r=this.C[e].deref();null!=r&&r!==t||(this.C[e]=this.C[n-1],this.C.pop(),n-=1)}}};function i(t){return s}function u(t,...n){return n.some((n=>t.nodeType===n))}function l(t){return u(t,2)}function c(t){return u(t,8,7,3,4)}function a(t){return u(t,3,4)}function h(t){switch(t.nodeType){case 3:case 7:case 8:return t.data.length;default:return t.childNodes.length}}function f(t){let n=t,e=[];for(;n;)e.unshift(n),n=n.parentNode;return e}function d(t){return u(t,9)?t:t.ownerDocument}function m(t){return t.parentNode.childNodes.indexOf(t)}function p(t){for(;t.parentNode;)t=t.parentNode;return t}function g(t,n){n(t);for(let e=t.firstChild;e;e=e.nextSibling)g(e,n)}function w(t,n){const e=[];return g(n,(r=>{if(r===n||1!==r.nodeType)return;const o=r;"*"!==t&&o.nodeName!==t||e.push(o)})),e}function b(t,n,e){""===t&&(t=null);const r=[];return g(e,(o=>{if(o===e||1!==o.nodeType)return;const s=o;"*"!==t&&s.namespaceURI!==t||"*"!==n&&s.localName!==n||r.push(s)})),r}function x(t,n,e){e||(e=d(t));let r=t.D(e);if(n)for(let n=t.firstChild;n;n=n.nextSibling)r.appendChild(x(n,!0,e));return r}function y(t,n){if(t.length<n)throw new TypeError(`Function should be called with at least ${n} arguments`)}const v={IndexSizeError:1,HierarchyRequestError:3,WrongDocumentError:4,InvalidCharacterError:5,NotFoundError:8,NotSupportedError:9,InUseAttributeError:10,InvalidStateError:11,NamespaceError:14,InvalidNodeTypeError:24};class C extends Error{constructor(t="",n="Error"){super(t),this.message=t,this.name=n,this.code=v[n]||0,this.stack=new Error(t).stack}}function D(t,n){return new C(`${t}: ${n}`,t)}function N(t){throw D("HierarchyRequestError",t)}function S(t){throw D("IndexSizeError",t)}function E(t){throw D("InvalidCharacterError",t)}function F(t){throw D("InvalidNodeTypeError",t)}function T(t){throw D("InvalidStateError",t)}function A(t){throw D("NamespaceError",t)}function k(t){throw D("NotFoundError",t)}function I(t){throw D("NotSupportedError",t)}function R(t){throw D("WrongDocumentError",t)}class z{constructor(t,n){this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null,this.type=t,this.target=n}}function M(t,n,e){const r=[],o=[];for(let s=n;s;s=s.parentNode)s.o.collectInterestedObservers(t,n,e,r,o);const s=i();r.forEach(((r,i)=>{const u=o[i],l=new z(t,n);void 0!==e.name&&void 0!==e.namespace&&(l.attributeName=e.name,l.attributeNamespace=e.namespace),void 0!==u&&(l.oldValue=u),void 0!==e.addedNodes&&(l.addedNodes=e.addedNodes),void 0!==e.removedNodes&&(l.removedNodes=e.removedNodes),void 0!==e.previousSibling&&(l.previousSibling=e.previousSibling),void 0!==e.nextSibling&&(l.nextSibling=e.nextSibling),s.l.appendRecord(r,l)})),s.l.queueMutationObserverMicrotask()}function P(t){return u(t,1,9,11)?t:null}function L(t){const n=[];for(let e=t.firstElementChild;e;e=e.nextElementSibling)n.push(e);return n}function V(t){return u(t,1,8,7,3,4)?t:null}function $(t){for(let n=t.previousSibling;n;n=n.previousSibling)if(u(n,1))return n;return null}function _(t){for(let n=t.nextSibling;n;n=n.nextSibling)if(u(n,1))return n;return null}function B(t,n,e){if(u(n,9,11,1)||N("parent must be a Document, DocumentFragment or Element node"),t.contains(n)&&N("node must not be an inclusive ancestor of parent"),e&&e.parentNode!==n&&k("child is not a child of parent"),u(t,11,10,1,3,4,7,8)||N("node must be a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction or Comment node"),u(t,3)&&u(n,9)&&N("can not insert a Text node under a Document"),u(t,10)&&!u(n,9)&&N("can only insert a DocumentType node under a Document"),u(n,9)){const r=n;switch(t.nodeType){case 11:const n=t;n.firstElementChild!==n.lastElementChild&&N("can not insert more than one element under a Document"),Array.from(n.childNodes).some((t=>u(t,3)))&&N("can not insert a Text node under a Document"),n.firstElementChild&&(r.documentElement||e&&u(e,10)||e&&r.doctype&&m(e)<m(r.doctype))&&N("Document should contain at most one doctype, followed by at most one element");break;case 1:(r.documentElement||e&&u(e,10)||e&&r.doctype&&m(e)<m(r.doctype))&&N("Document should contain at most one doctype, followed by at most one element");break;case 10:(r.doctype||e&&r.documentElement&&m(r.documentElement)<m(e)||!e&&r.documentElement)&&N("Document should contain at most one doctype, followed by at most one element")}}}function O(t,n,e){B(t,n,e);let r=e;return r===t&&(r=t.nextSibling),j(t,d(n)),U(t,n,r),t}function U(t,n,e,r=!1){const o=u(t,11),s=o?Array.from(t.childNodes):[t],l=s.length;if(0===l)return;if(o&&(s.forEach((t=>H(t,!0))),M("childList",t,{removedNodes:s})),null!==e){const t=m(e);i().forEachRange((e=>{e.startContainer===n&&e.startOffset>t&&(e.startOffset+=l),e.endContainer===n&&e.endOffset>t&&(e.endOffset+=l)}))}let c=null===e?n.lastChild:e.previousSibling;s.forEach((t=>{!function(t,n,e){t.parentNode=n;const r=null===e?n.lastChild:e.previousSibling,o=null===e?null:e;if(t.previousSibling=r,t.nextSibling=o,r?r.nextSibling=t:n.firstChild=t,o?(o.previousSibling=t,n.childNodes.splice(n.childNodes.indexOf(o),0,t)):(n.lastChild=t,n.childNodes.push(t)),u(t,1)){const e=t,s=P(n);if(s){let t=null;for(let n=r;n;n=n.previousSibling){if(u(n,1)){t=n;break}const e=V(n);if(e){t=e.previousElementSibling;break}}let n=null;for(let t=o;t;t=t.nextSibling){if(u(t,1)){n=t;break}const e=V(t);if(e){n=e.nextElementSibling;break}}t||(s.firstElementChild=e),n||(s.lastElementChild=e),s.childElementCount+=1}}if(u(n,9)){const e=n;u(t,1)?e.documentElement=t:u(t,10)&&(e.doctype=t)}}(t,n,e)})),r||M("childList",n,{addedNodes:s,nextSibling:e,previousSibling:c})}function q(t,n){return O(t,n,null)}function W(t,n,e){if(u(e,9,11,1)||N("Can not replace under a non-parent node"),n.contains(e)&&N("Can not insert a node under its own descendant"),t.parentNode!==e&&k("child is not a child of parent"),u(n,11,10,1,3,4,7,8)||N("Can not insert a node that isn't a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction or Comment"),u(n,3)&&u(e,9)&&N("can not insert a Text node under a Document"),u(n,10)&&!u(e,9)&&N("can only insert a DocumentType node under a Document"),u(e,9)){const r=e;switch(n.nodeType){case 11:const e=n;e.firstElementChild!==e.lastElementChild&&N("can not insert more than one element under a Document"),Array.from(e.childNodes).some((t=>u(t,3)))&&N("can not insert a Text node under a Document"),e.firstElementChild&&(r.documentElement&&r.documentElement!==t||t&&r.doctype&&m(t)<m(r.doctype))&&N("Document should contain at most one doctype, followed by at most one element");break;case 1:(r.documentElement&&r.documentElement!==t||r.doctype&&m(t)<m(r.doctype))&&N("Document should contain at most one doctype, followed by at most one element");break;case 10:(r.doctype&&r.doctype!==t||r.documentElement&&m(r.documentElement)<m(t))&&N("Document should contain at most one doctype, followed by at most one element")}}let r=t.nextSibling;r===n&&(r=n.nextSibling);const o=t.previousSibling;j(n,d(e));let s=[];null!==t.parentNode&&(s.push(t),H(t,!0));const i=u(n,11)?Array.from(n.childNodes):[n];return U(n,e,r,!0),M("childList",e,{addedNodes:i,removedNodes:s,nextSibling:r,previousSibling:o}),t}function X(t,n){null!==t&&j(t,d(n));const e=Array.from(n.childNodes);let r=[];null!==t&&(u(t,11)?t.childNodes.forEach((t=>{r.push(t)})):r.push(t)),e.forEach((t=>{H(t,!0)})),null!==t&&U(t,n,null,!0),(r.length>0||e.length>0)&&M("childList",n,{addedNodes:r,removedNodes:e})}function H(t,n=!1){const e=t.parentNode,r=m(t);i().forEachRange((n=>{t.contains(n.startContainer)&&(n.startContainer=e,n.startOffset=r),t.contains(n.endContainer)&&(n.endContainer=e,n.endOffset=r),n.startContainer===e&&n.startOffset>r&&(n.startOffset-=1),n.endContainer===e&&n.endOffset>r&&(n.endOffset-=1)}));const o=t.previousSibling,s=t.nextSibling;!function(t,n){const e=t.previousSibling,r=t.nextSibling,o=u(t,1),s=o?t.previousElementSibling:null,i=o?t.nextElementSibling:null;if(t.parentNode=null,t.previousSibling=null,t.nextSibling=null,e?e.nextSibling=r:n.firstChild=r,r?r.previousSibling=e:n.lastChild=e,n.childNodes.splice(n.childNodes.indexOf(t),1),o){const e=P(n);e&&(e.firstElementChild===t&&(e.firstElementChild=i),e.lastElementChild===t&&(e.lastElementChild=s),e.childElementCount-=1)}if(u(n,9)){const e=n;u(t,1)?e.documentElement=null:u(t,10)&&(e.doctype=null)}}(t,e);for(let n=e;n;n=n.parentNode)n.o.appendTransientRegisteredObservers(t);n||M("childList",e,{removedNodes:[t],nextSibling:s,previousSibling:o})}function j(t,n){const e=d(t);t.parentNode&&H(t),n!==e&&g(t,(t=>{if(t.ownerDocument=n,u(t,1))for(const e of t.attributes)e.ownerDocument=n}))}function Z(t){const n=[];return g(t,(t=>{u(t,3,4)&&n.push(t.data)})),n.join("")}function Q(t,n){let e=null;if(""!==n){e=new(i().Text)(n)}X(e,t)}function Y(t,n){const e=t.map((t=>t instanceof Node?t:n.createTextNode(String(t))));if(1===e.length)return e[0];{const t=n.createDocumentFragment();return e.forEach((n=>{t.appendChild(n)})),t}}function G(t,n){O(Y(n,d(t)),t,t.firstChild)}function J(t,n){q(Y(n,d(t)),t)}function K(t,n){const e=Y(n,d(t));B(e,t,null),X(e,t)}function tt(t,n){const e=t.parentNode;if(null===e)return;let r=t.previousSibling;for(;null!==r&&n.indexOf(r)>=0;)r=r.previousSibling;O(Y(n,d(t)),e,null===r?e.firstChild:r.nextSibling)}function nt(t,n){const e=t.parentNode;if(null===e)return;let r=t.nextSibling;for(;null!==r&&n.indexOf(r)>=0;)r=r.nextSibling;O(Y(n,d(t)),e,r)}function et(t,n){const e=t.parentNode;if(null===e)return;let r=t.nextSibling;for(;null!==r&&n.indexOf(r)>=0;)r=r.nextSibling;const o=Y(n,d(t));t.parentNode===e?W(t,o,e):O(o,e,r)}function rt(t){null!==t.parentNode&&H(t)}function ot(t,n){const e=n.startContainer;u(e,7)&&N("Can not insert into a processing instruction"),u(e,8)&&N("Can not insert into a comment"),a(e)&&null===e.parentNode&&N("Can not insert into a text node without a parent");let r=null;r=a(e)?e:e.childNodes[n.startOffset]||null;const o=null===r?e:r.parentNode;B(t,o,r),a(e)&&(r=e.splitText(n.startOffset)),t===r&&(r=r.nextSibling),null!==t.parentNode&&H(t);let s=null===r?h(o):m(r);u(t,11)?s+=h(t):s+=1,O(t,o,r),n.collapsed&&n.setEnd(o,s)}function st(t){return t>>>0}function it(t){return null===t?"":String(t)}function ut(t){return null==t?"":String(t)}function lt(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError(`Value should be an instance of ${n.name}`)}(t,n),t}function ct(t,n){return null==t?null:lt(t,n)}function at(t){return void 0===t?null:t}const ht=new WeakMap;function ft(t){let n=ht.get(t);return void 0===n&&(n=Math.random(),ht.set(t,n)),n}class Node{constructor(){this.ownerDocument=null,this.parentNode=null,this.childNodes=[],this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.o=new n(this)}get parentElement(){return this.parentNode&&u(this.parentNode,1)?this.parentNode:null}hasChildNodes(){return!!this.childNodes.length}normalize(){let t=this.firstChild,n=0;for(d(this);t;){let e=t.nextSibling;if(!u(t,3)){t.normalize(),t=e;continue}const r=t;let o=r.length;if(0===o){H(t),--n,t=e;continue}let s="";const l=[];for(let t=r.nextSibling;t&&u(t,3);t=t.nextSibling)s+=t.data,l.push(t);s&&r.replaceData(o,0,s);const c=i();for(let t=0,e=l.length;t<e;++t){const e=l[t],s=n+t+1;c.forEachRange((t=>{t.startContainer===e&&(t.startOffset+=o,t.startContainer=r),t.endContainer===e&&(t.endOffset+=o,t.endContainer=r),t.startContainer===this&&t.startOffset===s&&(t.startContainer=r,t.startOffset=o),t.endContainer===this&&t.endOffset===s&&(t.endContainer=r,t.endOffset=o)})),o+=e.length}for(;l.length;)H(l.shift());t=t.nextSibling,++n}}cloneNode(t=!1){return x(this,t)}compareDocumentPosition(t){if(y(arguments,1),this===(t=lt(t,Node)))return 0;let n=t,e=this,r=null,o=null;if(l(n)&&(r=n,n=r.ownerElement),l(e)&&(o=e,e=o.ownerElement,null!==r&&null!==n&&e===n))for(const t of e.attributes){if(t===r)return Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|Node.DOCUMENT_POSITION_PRECEDING;if(t===o)return Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|Node.DOCUMENT_POSITION_FOLLOWING}if(null===n||null===e)return Node.DOCUMENT_POSITION_DISCONNECTED|Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|(ft(n||r)>ft(e||o)?Node.DOCUMENT_POSITION_FOLLOWING:Node.DOCUMENT_POSITION_PRECEDING);const s=f(n),i=f(e);if(s[0]!==i[0])return Node.DOCUMENT_POSITION_DISCONNECTED|Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|(ft(s[0])>ft(i[0])?Node.DOCUMENT_POSITION_FOLLOWING:Node.DOCUMENT_POSITION_PRECEDING);let u=0;for(;u<s.length&&u<i.length&&s[u]===i[u];)++u;const c=n!==e&&u===s.length,a=n!==e&&u===i.length;return c&&null===r||n===e&&null!==o?Node.DOCUMENT_POSITION_CONTAINS|Node.DOCUMENT_POSITION_PRECEDING:a&&null===o||n===e&&null!==r?Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING:c||m(s[u])<m(i[u])?Node.DOCUMENT_POSITION_PRECEDING:Node.DOCUMENT_POSITION_FOLLOWING}contains(t){for(y(arguments,1),t=ct(t,Node);t&&t!=this;)t=t.parentNode;return t===this}isDefaultNamespace(t){y(arguments,1),""===(t=at(t))&&(t=null);return this.lookupNamespaceURI(null)===t}insertBefore(t,n){return y(arguments,2),O(t=lt(t,Node),this,n=ct(n,Node))}appendChild(t){return y(arguments,1),q(t=lt(t,Node),this)}replaceChild(t,n){return y(arguments,2),t=lt(t,Node),W(n=lt(n,Node),t,this)}removeChild(t){return y(arguments,1),function(t,n){return t.parentNode!==n&&k("child is not a child of parent"),H(t),t}(t=lt(t,Node),this)}}function dt(t,n,e,r){M("attributes",n,{name:t.localName,namespace:t.namespaceURI,oldValue:e})}function mt(t,n){dt(t,t.ownerElement,t.value),t.N=n}function pt(t,n){dt(t,n,null,t.value),n.attributes.push(t),t.ownerElement=n}function gt(t){const n=t.ownerElement;dt(t,n,t.value),n.attributes.splice(n.attributes.indexOf(t),1),t.ownerElement=null}Node.ELEMENT_NODE=1,Node.ATTRIBUTE_NODE=2,Node.TEXT_NODE=3,Node.CDATA_SECTION_NODE=4,Node.ENTITY_REFERENCE_NODE=5,Node.ENTITY_NODE=6,Node.PROCESSING_INSTRUCTION_NODE=7,Node.COMMENT_NODE=8,Node.DOCUMENT_NODE=9,Node.DOCUMENT_TYPE_NODE=10,Node.DOCUMENT_FRAGMENT_NODE=11,Node.NOTATION_NODE=12,Node.DOCUMENT_POSITION_DISCONNECTED=1,Node.DOCUMENT_POSITION_PRECEDING=2,Node.DOCUMENT_POSITION_FOLLOWING=4,Node.DOCUMENT_POSITION_CONTAINS=8,Node.DOCUMENT_POSITION_CONTAINED_BY=16,Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,Node.prototype.ELEMENT_NODE=1,Node.prototype.ATTRIBUTE_NODE=2,Node.prototype.TEXT_NODE=3,Node.prototype.CDATA_SECTION_NODE=4,Node.prototype.ENTITY_REFERENCE_NODE=5,Node.prototype.ENTITY_NODE=6,Node.prototype.PROCESSING_INSTRUCTION_NODE=7,Node.prototype.COMMENT_NODE=8,Node.prototype.DOCUMENT_NODE=9,Node.prototype.DOCUMENT_TYPE_NODE=10,Node.prototype.DOCUMENT_FRAGMENT_NODE=11,Node.prototype.NOTATION_NODE=12;class Attr extends Node{constructor(t,n,e,r,o){super(),this.namespaceURI=t,this.prefix=n,this.localName=e,this.name=null===n?e:`${n}:${e}`,this.N=r,this.ownerElement=o}get nodeType(){return 2}get nodeName(){return this.name}get nodeValue(){return this.N}set nodeValue(t){wt(this,t=ut(t))}get textContent(){return this.N}set textContent(t){wt(this,t=ut(t))}lookupPrefix(t){return y(arguments,1),null!==this.ownerElement?this.ownerElement.lookupPrefix(t):null}lookupNamespaceURI(t){return y(arguments,1),null===this.ownerElement?null:this.ownerElement.lookupNamespaceURI(t)}get value(){return this.N}set value(t){wt(this,t)}D(t){const n=new(i().Attr)(this.namespaceURI,this.prefix,this.localName,this.value,null);return n.ownerDocument=t,n}}function wt(t,n){n=String(n);null===t.ownerElement?t.N=n:mt(t,n)}class CharacterData extends Node{constructor(t){super(),this.S=String(t)}get nodeValue(){return this.S}set nodeValue(t){t=ut(t),bt(this,0,this.length,t)}get textContent(){return this.S}set textContent(t){t=ut(t),bt(this,0,this.length,t)}lookupPrefix(t){y(arguments,1);const n=this.parentElement;return null!==n?n.lookupPrefix(t):null}lookupNamespaceURI(t){y(arguments,1);const n=this.parentElement;return null===n?null:n.lookupNamespaceURI(t)}before(...t){tt(this,t)}after(...t){nt(this,t)}replaceWith(...t){et(this,t)}remove(){rt(this)}get previousElementSibling(){return $(this)}get nextElementSibling(){return _(this)}get data(){return this.S}set data(t){t=it(t),bt(this,0,this.length,t)}get length(){return this.data.length}substringData(t,n){return y(arguments,2),xt(this,t,n)}appendData(t){y(arguments,1),bt(this,this.length,0,t)}insertData(t,n){y(arguments,1),bt(this,t,0,n)}deleteData(t,n){y(arguments,2),bt(this,t,n,"")}replaceData(t,n,e){y(arguments,3),bt(this,t,n,e)}}function bt(t,n,e,r){n=st(n),e=st(e);const o=t.length;n>o&&S("can not replace data past the node's length"),n+e>o&&(e=o-n),M("characterData",t,{oldValue:t.data});const s=t.data,u=s.substring(0,n)+r+s.substring(n+e);t.S=u;i().forEachRange((o=>{o.startContainer===t&&o.startOffset>n&&o.startOffset<=n+e&&(o.startOffset=n),o.endContainer===t&&o.endOffset>n&&o.endOffset<=n+e&&(o.endOffset=n),o.startContainer===t&&o.startOffset>n+e&&(o.startOffset=o.startOffset+r.length-e),o.endContainer===t&&o.endOffset>n+e&&(o.endOffset=o.endOffset+r.length-e)}))}function xt(t,n,e){n=st(n),e=st(e);const r=t.length;return n>r&&S("can not substring data past the node's length"),n+e>r?t.data.substring(n):t.data.substring(n,n+e)}class Text extends CharacterData{get nodeType(){return 3}get nodeName(){return"#text"}constructor(t=""){super(t);const n=i();this.ownerDocument=n.document}splitText(t){return y(arguments,1),function(t,n){const e=t.length;n>e&&S("can not split past the node's length");const r=e-n,o=xt(t,n,r),s=new(i().Text)(o);s.ownerDocument=t.ownerDocument;const u=t.parentNode;if(null!==u){U(s,u,t.nextSibling);const e=m(t)+1;i().forEachRange((r=>{r.startContainer===t&&r.startOffset>n&&(r.startContainer=s,r.startOffset-=n),r.endContainer===t&&r.endOffset>n&&(r.endContainer=s,r.endOffset-=n),r.startContainer===u&&r.startOffset===e&&(r.startOffset+=1),r.endContainer===u&&r.endOffset===e&&(r.endOffset+=1)}))}return bt(t,n,r,""),s}(this,t=st(t))}D(t){const n=new(i().Text)(this.data);return n.ownerDocument=t,n}get wholeText(){const t=[this.data];let n=this.previousSibling;for(;null!==n&&u(n,3,4);){const e=n.data;t.unshift(e),n=n.previousSibling}let e=this.nextSibling;for(;null!==e&&u(e,3,4);){const n=e.data;t.push(n),e=e.nextSibling}return t.join("")}}class CDATASection extends Text{get nodeType(){return 4}get nodeName(){return"#cdata-section"}constructor(t){super(t)}D(t){const n=new(i().CDATASection)(this.data);return n.ownerDocument=t,n}}class Comment extends CharacterData{get nodeType(){return 8}get nodeName(){return"#comment"}constructor(t=""){super(t);const n=i();this.ownerDocument=n.document}D(t){const n=new(i().Comment)(this.data);return n.ownerDocument=t,n}}class DocumentType extends Node{constructor(t,n="",e=""){super(),this.name=t,this.publicId=n,this.systemId=e}get nodeType(){return 10}get nodeName(){return this.name}get nodeValue(){return null}set nodeValue(t){}get textContent(){return null}set textContent(t){}lookupPrefix(t){return y(arguments,1),null}lookupNamespaceURI(t){return y(arguments,1),null}before(...t){tt(this,t)}after(...t){nt(this,t)}replaceWith(...t){et(this,t)}remove(){rt(this)}D(t){const n=new(i().DocumentType)(this.name,this.publicId,this.systemId);return n.ownerDocument=t,n}}const yt="http://www.w3.org/1999/xhtml",vt="http://www.w3.org/XML/1998/namespace",Ct="http://www.w3.org/2000/xmlns/",Dt=/^(?:[:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:[\-\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/;function Nt(t){return Dt.test(t)}function St(t){(function(t){const n=t.split(":");return!(n.length>2)&&n.every((t=>Nt(t)))})(t)||E("The qualified name is not a valid QName")}function Et(t,n){""===t&&(t=null),St(n);let e=null,r=n;const o=n.indexOf(":");return o>=0&&(e=n.substring(0,o),r=n.substring(o+1)),null!==e&&null===t&&A("Qualified name with prefix can not have a null namespace"),"xml"===e&&t!==vt&&A("xml prefix can only be used for the XML namespace"),"xmlns"!==n&&"xmlns"!==e||t===Ct||A("xmlns prefix or qualifiedName must use the XMLNS namespace"),t===Ct&&"xmlns"!==n&&"xmlns"!==e&&A("xmlns prefix or qualifiedName must be used for the XMLNS namespace"),{namespace:t,prefix:e,localName:r}}function Ft(t,n){if(t.namespaceURI===n&&null!==t.prefix)return t.prefix;const e=Array.from(t.attributes).find((t=>"xmlns"===t.prefix&&t.value===n));return e?e.localName:null!==t.parentElement?Ft(t.parentElement,n):null}class Tt{constructor(){this.F=new Map}copy(){const t=new Tt;for(const[n,e]of Array.from(this.F.entries()))t.F.set(n,e.concat());return t}retrievePreferredPrefixString(t,n){const e=this.F.get(n);if(void 0===e)return null;for(const n of e)if(n===t)return n;return e[e.length-1]}checkIfFound(t,n){const e=this.F.get(n);return void 0!==e&&e.indexOf(t)>=0}add(t,n){const e=this.F.get(n);void 0===e?this.F.set(n,[t]):e.push(t)}}const At=/^(?:[\t\n\r -\uD7FF\uE000-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,kt=/^(?:[\n\r !#-%'-;=\?-Z_a-z])*$/,It=["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function Rt(t,n,e=!1){const r=e?[t]:t.childNodes,o=[];for(const t of r)zt(t,n,o);return o.join("")}function zt(t,n,e){const r=new Tt;r.add("xml",vt);const o={value:1};try{Mt(t,null,r,o,n,e)}catch(t){return T(t instanceof Error?t.message:"An error occurred during serialization.")}}function Mt(t,n,e,r,o,s){switch(t.nodeType){case 1:return void function(t,n,e,r,o,s){const i=t;if(o&&(i.localName.indexOf(":")>=0||!Nt(i.localName)))throw new Error(`Can not serialize an element because the localName "${i.localName}" is not allowed.`);s.push("<");let u="",l=!1,c=!1;const a=e.copy(),h={},f=function(t,n,e){let r=null;for(const o of t.attributes){const t=o.namespaceURI,s=o.prefix;if(t===Ct){if(null===s){r=o.value;continue}const t=o.localName;let i=o.value;if(i===vt)continue;if(""===i&&(i=null),n.checkIfFound(t,i))continue;n.add(t,i),e[t]=null===i?"":i}}return r}(i,a,h);let d=n;const m=i.namespaceURI;if(d===m)null!==f&&(c=!0),u+=m===vt?"xml:"+i.localName:i.localName,s.push(u);else{let t=i.prefix,n=a.retrievePreferredPrefixString(t,m);if("xmlns"===t){if(o)throw new Error('Can not serialize an element with prefix "xmlns" because it will not legally round-trip in a conforming XML parser.');n=t}null!==n?(u+=n+":"+i.localName,null!==f&&f!==vt&&(d=""===f?null:f),s.push(u)):null!==t?(t in h&&(t=Lt(a,m,r)),a.add(t,m),u+=t+":"+i.localName,s.push(u),s.push(" xmlns:",t,'="',Pt(m,o),'"'),null!==f&&(d=""===f?null:f)):null===f||null!==f&&f!==m?(c=!0,u+=i.localName,d=m,s.push(u),s.push(' xmlns="',Pt(m,o),'"')):(u+=i.localName,d=m,s.push(u))}(function(t,n,e,r,o,s,i){const u=[];for(const l of t.attributes){if(s&&u.find((t=>t.localName===l.localName&&t.namespaceURI===l.namespaceURI)))throw new Error(`Can not serialize a duplicate attribute for namespaceURI "${l.namespaceURI}", localName "${l.localName}".`);u.push({namespaceURI:l.namespaceURI,localName:l.localName});const t=l.namespaceURI;let c=null;if(null!==t)if(c=n.retrievePreferredPrefixString(l.prefix,t),t===Ct){if(l.value===vt)continue;if(null===l.prefix&&o)continue;if(null!==l.prefix&&(!(l.localName in r)||r[l.localName]!==l.value))continue;if(s&&l.value===Ct)throw new Error("The serialization of this attribute would produce invalid XML because the XMLNS namespace is reserved and cannot be applied as an element's namespace via XML parsing.");if(s&&null!==l.prefix&&""===l.value)throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace. Use a default namespace declaration instead.");"xmlns"===l.prefix&&(c="xmlns")}else null===c&&(c=null===l.prefix||l.prefix in r?Lt(n,t,e):l.prefix,n.add(c,l.namespaceURI),r[c]=l.namespaceURI,i.push(" xmlns:",c,'="',Pt(t,s),'"'));if(i.push(" "),null!==c&&i.push(c,":"),s&&(l.localName.indexOf(":")>=0||!Nt(l.localName)||"xmlns"===l.localName&&null===t))throw new Error(`Can not serialize an attribute because the localName "${l.localName}" is not allowed.`);i.push(l.localName,'="',Pt(l.value,s),'"')}})(i,a,r,h,c,o,s),m===yt&&!i.hasChildNodes()&&It.indexOf(i.localName)>=0&&(s.push(" /"),l=!0);m===yt||i.hasChildNodes()||(s.push("/"),l=!0);if(s.push(">"),l)return;for(const n of t.childNodes)Mt(n,d,a,r,o,s);s.push("</",u,">")}(t,n,e,r,o,s);case 9:return void function(t,n,e,r,o,s){const i=t;if(o&&null===i.documentElement)throw new Error("Can not serialize a document with no documentElement.");for(const t of i.childNodes)Mt(t,n,e,r,o,s)}(t,n,e,r,o,s);case 8:return void function(t,n,e,r,o,s){const i=t;if(o&&(!At.test(i.data)||i.data.indexOf("--")>=0||i.data.endsWith("-")))throw new Error("Can not serialize a comment because it contains invalid characters.");s.push("\x3c!--",i.data,"--\x3e")}(t,0,0,0,o,s);case 4:return void function(t,n,e,r,o,s){const i=t;s.push("<![CDATA[",i.data,"]]>")}(t,0,0,0,0,s);case 3:return void function(t,n,e,r,o,s){const i=t;if(o&&!At.test(i.data))throw new Error("Can not serialize a text node because it contains invalid characters.");let u=i.data;u=u.replace(/&/g,"&amp;"),u=u.replace(/</g,"&lt;"),u=u.replace(/>/g,"&gt;"),s.push(u)}(t,0,0,0,o,s);case 11:return void function(t,n,e,r,o,s){for(const i of t.childNodes)Mt(i,n,e,r,o,s)}(t,n,e,r,o,s);case 10:return void function(t,n,e,r,o,s){const i=t;if(o&&!kt.test(i.publicId))throw new Error("Can not serialize a document type because the publicId contains invalid characters.");if(o&&(!At.test(i.systemId)||i.systemId.indexOf('"')>=0&&i.systemId.indexOf("'")>=0))throw new Error("Can not serialize a document type because the systemId contains invalid characters.");s.push("<!DOCTYPE"),s.push(" "),s.push(i.name),""!==i.publicId&&s.push(' PUBLIC "',i.publicId,'"');""!==i.systemId&&""===i.publicId&&s.push(" SYSTEM");""!==i.systemId&&s.push(' "',i.systemId,'"');s.push(">")}(t,0,0,0,o,s);case 7:return void function(t,n,e,r,o,s){const i=t;if(o){if(i.target.indexOf(":")>=0)throw new Error(`Can not serialize a processing instruction because the target "${i.target}" may not contain ":".`);if("xml"===i.target.toLowerCase())throw new Error('Can not serialize a processing instruction because "xml" may not be used as target.')}if(o&&(!At.test(i.data)||i.data.indexOf("?>")>=0))throw new Error("Can not serialize a processing instruction because the data contains invalid characters.");s.push("<?",i.target," ",i.data,"?>")}(t,0,0,0,o,s);case 2:return;default:throw new TypeError("Only Nodes and Attr objects can be serialized by this algorithm.")}}function Pt(t,n){if(n&&null!==t&&!At.test(t))throw new Error("Can not serialize an attribute value because it contains invalid characters.");return null===t?"":t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&#9;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;")}function Lt(t,n,e){const r="ns"+e.value;return e.value+=1,t.add(r,n),r}class Element extends Node{constructor(t,n,e){super(),this.firstElementChild=null,this.lastElementChild=null,this.childElementCount=0,this.attributes=[],this.namespaceURI=t,this.prefix=n,this.localName=e,this.tagName=null===n?e:`${n}:${e}`}get nodeType(){return 1}get nodeName(){return this.tagName}get nodeValue(){return null}set nodeValue(t){}get textContent(){return Z(this)}set textContent(t){Q(this,t=ut(t))}lookupPrefix(t){return y(arguments,1),null===(t=at(t))||""===t?null:Ft(this,t)}lookupNamespaceURI(t){if(y(arguments,1),""===(t=at(t))&&(t=null),null!==this.namespaceURI&&this.prefix===t)return this.namespaceURI;let n=null;if(null!==t){const e=this.getAttributeNodeNS(Ct,t);e&&"xmlns"===e.prefix&&(n=e.value)}else{const t=this.getAttributeNodeNS(Ct,"xmlns");t&&null===t.prefix&&(n=t.value)}if(null!==n)return""!==n?n:null;const e=this.parentElement;return null===e?null:e.lookupNamespaceURI(t)}before(...t){tt(this,t)}after(...t){nt(this,t)}replaceWith(...t){et(this,t)}remove(){rt(this)}get children(){return L(this)}prepend(...t){G(this,t)}append(...t){J(this,t)}replaceChildren(...t){K(this,t)}get previousElementSibling(){return $(this)}get nextElementSibling(){return _(this)}hasAttributes(){return this.attributes.length>0}getAttribute(t){y(arguments,1);const n=$t(t=String(t),this);return null===n?null:n.value}getAttributeNS(t,n){y(arguments,2);const e=_t(t=at(t),n=String(n),this);return null===e?null:e.value}setAttribute(t,n){y(arguments,2),t=String(t),n=String(n),Nt(t)||E("The qualified name does not match the Name production");const e=$t(t,this);if(null===e){const e=new(i().Attr)(null,null,t,n,this);return e.ownerDocument=this.ownerDocument,void pt(e,this)}mt(e,n)}setAttributeNS(t,n,e){y(arguments,3),t=at(t),n=String(n),e=String(e);const{namespace:r,prefix:o,localName:s}=Et(t,n);!function(t,n,e,r,o){const s=_t(o,n,t);if(null===s){const s=new(i().Attr)(o,r,n,e,t);return s.ownerDocument=t.ownerDocument,void pt(s,t)}mt(s,e)}(this,s,e,o,r)}removeAttribute(t){y(arguments,1),Ot(t=String(t),this)}removeAttributeNS(t,n){y(arguments,2),function(t,n,e){const r=_t(t,n,e);null!==r&&gt(r)}(t=at(t),n=String(n),this)}toggleAttribute(t,n){Nt(t)||E("The qualified name does not match the Name production");if(null===$t(t,this)){if(void 0===n||!0===n){const n=new(i().Attr)(null,null,t,"",this);return n.ownerDocument=this.ownerDocument,pt(n,this),!0}return!1}return void 0!==n&&!1!==n||(Ot(t,this),!1)}hasAttribute(t){return y(arguments,1),null!==$t(t=String(t),this)}hasAttributeNS(t,n){return y(arguments,2),null!==_t(t=at(t),n=String(n),this)}getAttributeNode(t){return y(arguments,1),$t(t=String(t),this)}getAttributeNodeNS(t,n){return y(arguments,2),_t(t=at(t),n=String(n),this)}setAttributeNode(t){return y(arguments,1),Bt(t=lt(t,Attr),this)}setAttributeNodeNS(t){return y(arguments,1),Bt(t=lt(t,Attr),this)}removeAttributeNode(t){return y(arguments,1),t=lt(t,Attr),this.attributes.indexOf(t)<0&&k("the specified attribute does not exist"),gt(t),t}getElementsByTagName(t){return y(arguments,1),w(t=String(t),this)}getElementsByTagNameNS(t,n){return y(arguments,2),b(t=at(t),n=String(n),this)}D(t){const n=Vt(t,this.localName,this.namespaceURI,this.prefix);for(const e of this.attributes){const r=e.D(t);n.setAttributeNode(r)}return n}get innerHTML(){return Rt(this,!0)}get outerHTML(){return Rt(this,!0,!0)}}function Vt(t,n,e,r=null){let o=null;return o=new(i().Element)(e,r,n),o.ownerDocument=t,o}function $t(t,n){return n.attributes.find((n=>n.name===t))||null}function _t(t,n,e){return""===t&&(t=null),e.attributes.find((e=>e.namespaceURI===t&&e.localName===n))||null}function Bt(t,n){null!==t.ownerElement&&t.ownerElement!==n&&function(t){throw D("InUseAttributeError",t)}("attribute is in use by another element");const e=_t(t.namespaceURI,t.localName,n);return e===t?t:(null!==e?function(t,n){const e=t.ownerElement;dt(t,e,t.value,n.value),e.attributes.splice(e.attributes.indexOf(t),1,n),n.ownerElement=e,t.ownerElement=null}(e,t):pt(t,n),e)}function Ot(t,n){const e=$t(t,n);return null!==e&&gt(e),e}function Ut(t,n,e){const{namespace:r,prefix:o,localName:s}=Et(n,e);return Vt(t,s,r,o)}class DOMImplementation{constructor(t){this.T=t}createDocumentType(t,n,e){y(arguments,3),t=String(t),n=String(n),e=String(e),St(t);const r=new(i(this.T).DocumentType)(t,n,e);return r.ownerDocument=this.T,r}createDocument(t,n,e=null){y(arguments,2),t=at(t),n=it(n),e=ct(e,DocumentType);const r=new(i(this.T).XMLDocument);let o=null;return""!==n&&(o=Ut(r,t,n)),e&&r.appendChild(e),o&&r.appendChild(o),r}createHTMLDocument(t){t=at(t);const n=i(this.T),e=new n.Document,r=new n.DocumentType("html");r.ownerDocument=e,e.appendChild(r);const o=Vt(e,"html",yt);e.appendChild(o);const s=Vt(e,"head",yt);if(o.appendChild(s),null!==t){const n=Vt(e,"title",yt);s.appendChild(n),n.appendChild(e.createTextNode(t))}return o.appendChild(Vt(e,"body",yt)),e}}class Document extends Node{constructor(){super(),this.firstElementChild=null,this.lastElementChild=null,this.childElementCount=0,this.implementation=new DOMImplementation(this),this.doctype=null,this.documentElement=null}get nodeType(){return 9}get nodeName(){return"#document"}get nodeValue(){return null}set nodeValue(t){}get textContent(){return null}set textContent(t){}lookupPrefix(t){return y(arguments,1),null!==this.documentElement?this.documentElement.lookupPrefix(t):null}lookupNamespaceURI(t){return y(arguments,1),null===this.documentElement?null:this.documentElement.lookupNamespaceURI(t)}get children(){return L(this)}prepend(...t){G(this,t)}append(...t){J(this,t)}replaceChildren(...t){K(this,t)}getElementsByTagName(t){return y(arguments,1),w(t=String(t),this)}getElementsByTagNameNS(t,n){return y(arguments,2),b(t=at(t),n=String(n),this)}createElement(t){y(arguments,1),Nt(t=String(t))||E("The local name is not a valid Name");return Vt(this,t,null,null)}createElementNS(t,n){return y(arguments,2),Ut(this,t=at(t),n=String(n))}createDocumentFragment(){const t=new(i().DocumentFragment);return t.ownerDocument=this,t}createTextNode(t){y(arguments,1),t=String(t);const n=new(i().Text)(t);return n.ownerDocument=this,n}createCDATASection(t){y(arguments,1),(t=String(t)).indexOf("]]>")>=0&&E('Data must not contain the string "]]>"');const n=new(i().CDATASection)(t);return n.ownerDocument=this,n}createComment(t){y(arguments,1),t=String(t);const n=new(i().Comment)(t);return n.ownerDocument=this,n}createProcessingInstruction(t,n){y(arguments,2),t=String(t),n=String(n),Nt(t)||E("The target is not a valid Name"),n.indexOf("?>")>=0&&E('Data must not contain the string "?>"');const e=new(i().ProcessingInstruction)(t,n);return e.ownerDocument=this,e}importNode(t,n=!1){return y(arguments,1),u(t=lt(t,Node),9)&&I("importing a Document node is not supported"),x(t,n,this)}adoptNode(t){return y(arguments,1),u(t=lt(t,Node),9)&&I("adopting a Document node is not supported"),j(t,this),t}createAttribute(t){y(arguments,1),Nt(t=String(t))||E("The local name is not a valid Name");const n=new(i().Attr)(null,null,t,"",null);return n.ownerDocument=this,n}createAttributeNS(t,n){y(arguments,2),t=at(t),n=String(n);const{namespace:e,prefix:r,localName:o}=Et(t,n),s=new(i().Attr)(e,r,o,"",null);return s.ownerDocument=this,s}createRange(){const t=new(i().Range);return t.startContainer=this,t.startOffset=0,t.endContainer=this,t.endOffset=0,t}D(t){return new(i().Document)}}class DocumentFragment extends Node{constructor(){super(),this.firstElementChild=null,this.lastElementChild=null,this.childElementCount=0;const t=i();this.ownerDocument=t.document}get nodeType(){return 11}get nodeName(){return"#document-fragment"}get nodeValue(){return null}set nodeValue(t){}get textContent(){return Z(this)}set textContent(t){Q(this,t=ut(t))}lookupPrefix(t){return y(arguments,1),null}lookupNamespaceURI(t){return y(arguments,1),null}get children(){return L(this)}prepend(...t){G(this,t)}append(...t){J(this,t)}replaceChildren(...t){K(this,t)}D(t){const n=new(i().DocumentFragment);return n.ownerDocument=t,n}}class ProcessingInstruction extends CharacterData{constructor(t,n){super(n),this.target=t}get nodeType(){return 7}get nodeName(){return this.target}D(t){const n=new(i().ProcessingInstruction)(this.target,this.data);return n.ownerDocument=t,n}}class qt{constructor(t){u(t.startContainer,10,2)&&F("StaticRange startContainer must not be a doctype or attribute node"),u(t.endContainer,10,2)&&F("StaticRange endContainer must not be a doctype or attribute node"),this.startContainer=t.startContainer,this.startOffset=t.startOffset,this.endContainer=t.endContainer,this.endOffset=t.endOffset,this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset}}function Wt(t,n){if(t.collapsed)return;const e=f(t.startContainer),r=f(t.endContainer);let o=0;for(;o<e.length&&o<r.length&&e[o]===r[o];)++o;const s=t.endContainer.childNodes[t.endOffset]||null;for(let o=t.startContainer.childNodes[t.startOffset]||null;o&&o!==s&&o!==r[e.length];o=o.nextSibling)n(o);for(let t=e.length-1;t>=o;--t)for(let o=e[t].nextSibling;o&&o!==s&&o!==r[t];o=o.nextSibling)n(o);for(let t=o;t<r.length;++t)for(let e=r[t].firstChild;e&&e!==s&&e!==r[t+1];e=e.nextSibling)n(e)}function Xt(t,n){const e=d(t.startContainer),r=e.createDocumentFragment();if(t.collapsed)return r;const o=t.startContainer,s=t.startOffset,i=t.endContainer,l=t.endOffset;if(o===i&&c(o)){const t=o.cloneNode();return t.data=o.substringData(s,l-s),q(t,r),n||o.replaceData(s,l-s,""),r}const a=f(t.startContainer),p=f(t.endContainer);let g=0;for(;g<a.length&&g<p.length&&a[g]===p[g];)++g;const w=g===a.length,b=g===p.length;let x=null;w||(x=a[g]);let y=null;b||(y=p[g]);const v=[],C=x?x.nextSibling:o.childNodes[s],D=y||i.childNodes[l]||null;for(var S=C;S&&S!==D;S=S.nextSibling)u(S,10)&&N(n?"Can not clone a doctype using cloneContents":"Can not extract a doctype using extractContents"),v.push(S);let E,F;if(w||n)E=o,F=s;else{const t=a[g];E=t.parentNode,F=1+m(t)}if(null!==x&&c(x)){const t=x.cloneNode();t.data=x.substringData(s,x.length-s),q(t,r),n||x.replaceData(s,x.length-s,"")}else if(null!==x){const t=x.cloneNode();q(t,r);const i=e.createRange();i.setStart(o,s),i.setEnd(x,h(x));const u=Xt(i,n);i.detach(),q(u,t)}if(v.forEach((t=>{if(n){q(t.cloneNode(!0),r)}else q(t,r)})),y&&c(y)){const t=y.cloneNode();t.data=y.substringData(0,l),q(t,r),n||y.replaceData(0,l,"")}else if(null!==y){const t=y.cloneNode();q(t,r);const o=e.createRange();o.setStart(y,0),o.setEnd(i,l);const s=Xt(o,n);o.detach(),q(s,t)}return n||(t.setStart(E,F),t.collapse(!0)),r}class Range{constructor(){const t=i();this.startContainer=t.document,this.startOffset=0,this.endContainer=t.document,this.endOffset=0,t.addRange(this)}get collapsed(){return(t=this).startContainer===t.endContainer&&t.startOffset===t.endOffset;var t}get commonAncestorContainer(){const t=f(this.startContainer),n=f(this.endContainer);let e=t[0],r=0;for(;r<t.length&&r<n.length&&t[r]===n[r];)e=t[r],++r;return e}setStart(t,n){y(arguments,2),t=lt(t,Node),n=st(n),u(t,10)&&F("Can not set a range under a doctype node"),n>h(t)&&S("Can not set a range past the end of the node");Qt(this)===p(t)&&Zt(t,n,this.endContainer,this.endOffset)!==jt||(this.endContainer=t,this.endOffset=n),this.startContainer=t,this.startOffset=n}setEnd(t,n){y(arguments,2),t=lt(t,Node),n=st(n),u(t,10)&&F("Can not set a range under a doctype node"),n>h(t)&&S("Can not set a range past the end of the node");Qt(this)===p(t)&&Zt(t,n,this.startContainer,this.startOffset)!==Ht||(this.startContainer=t,this.startOffset=n),this.endContainer=t,this.endOffset=n}setStartBefore(t){y(arguments,1);const n=(t=lt(t,Node)).parentNode;if(null===n)return F("Can not set range before node without a parent");this.setStart(n,m(t))}setStartAfter(t){y(arguments,1);const n=(t=lt(t,Node)).parentNode;if(null===n)return F("Can not set range before node without a parent");this.setStart(n,m(t)+1)}setEndBefore(t){y(arguments,1);const n=(t=lt(t,Node)).parentNode;if(null===n)return F("Can not set range before node without a parent");this.setEnd(n,m(t))}setEndAfter(t){y(arguments,1);const n=(t=lt(t,Node)).parentNode;if(null===n)return F("Can not set range before node without a parent");this.setEnd(n,m(t)+1)}collapse(t=!1){t?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset)}selectNode(t){y(arguments,1);let n=(t=lt(t,Node)).parentNode;if(null===n)return F("Can not select node with null parent");const e=m(t);this.startContainer=n,this.startOffset=e,this.endContainer=n,this.endOffset=e+1}selectNodeContents(t){y(arguments,1),u(t=lt(t,Node),10)&&F("Can not place range inside a doctype node");const n=h(t);this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=n}compareBoundaryPoints(t,n){switch(y(arguments,2),n=lt(n,Range),t!==Range.START_TO_START&&t!==Range.START_TO_END&&t!==Range.END_TO_END&&t!==Range.END_TO_START&&I("Unsupported comparison type"),Qt(this)!==Qt(n)&&R("Can not compare positions of ranges in different trees"),t){case Range.START_TO_START:return Zt(this.startContainer,this.startOffset,n.startContainer,n.startOffset);case Range.START_TO_END:return Zt(this.endContainer,this.endOffset,n.startContainer,n.startOffset);case Range.END_TO_END:return Zt(this.endContainer,this.endOffset,n.endContainer,n.endOffset);default:return Zt(this.startContainer,this.startOffset,n.endContainer,n.endOffset)}}deleteContents(){if(this.collapsed)return;const t=this.startContainer,n=this.startOffset,e=this.endContainer,r=this.endOffset;if(t===e&&c(t))return void t.replaceData(n,r-n,"");const o=[];let s,i;if(Wt(this,(t=>{o.push(t)})),t.contains(e))s=t,i=n;else{let n=t;for(;null!==n.parentNode&&!n.parentNode.contains(e);)n=n.parentNode;s=n.parentNode,i=1+m(n)}c(t)&&t.replaceData(n,t.length-n,""),o.forEach((t=>{H(t)})),c(e)&&e.replaceData(0,r,""),this.setStart(s,i),this.collapse(!0)}extractContents(){return Xt(this,!1)}cloneContents(){return Xt(this,!0)}insertNode(t){y(arguments,1),ot(t=lt(t,Node),this)}surroundContents(t){y(arguments,1),t=lt(t,Node);(a(this.startContainer)?this.startContainer.parentNode:this.startContainer)!==(a(this.endContainer)?this.endContainer.parentNode:this.endContainer)&&T("Can not use surroundContents on a range that has partially selected a non-Text node"),u(t,9,10,11)&&F("Can not use Document, DocumentType, or DocumentFragment as a parent node in surroundContents");const n=Xt(this,!1);t.firstChild&&X(null,t),ot(t,this),q(n,t),this.selectNode(t)}cloneRange(){const t=new(i().Range);return t.startContainer=this.startContainer,t.startOffset=this.startOffset,t.endContainer=this.endContainer,t.endOffset=this.endOffset,t}detach(){i().removeRange(this)}isPointInRange(t,n){return y(arguments,2),t=lt(t,Node),n=st(n),p(t)===Qt(this)&&(u(t,10)&&F("Point can not be under a doctype"),n>h(t)&&S("Offset should not be past the end of node"),Zt(t,n,this.startContainer,this.startOffset)!==Ht&&Zt(t,n,this.endContainer,this.endOffset)!==jt)}comparePoint(t,n){return y(arguments,2),t=lt(t,Node),n=st(n),p(t)!==Qt(this)&&R("Can not compare point to range in different trees"),u(t,10)&&F("Point can not be under a doctype"),n>h(t)&&S("Offset should not be past the end of node"),Zt(t,n,this.startContainer,this.startOffset)===Ht?-1:Zt(t,n,this.endContainer,this.endOffset)===jt?1:0}intersectsNode(t){if(y(arguments,1),p(t=lt(t,Node))!==Qt(this))return!1;const n=t.parentNode;if(null===n)return!0;const e=m(t);return Zt(n,e,this.endContainer,this.endOffset)===Ht&&Zt(n,e+1,this.startContainer,this.startOffset)===jt}toString(){let t=[];const n=this.startContainer;if(a(n)){if(this.startContainer===this.endContainer)return n.substringData(this.startOffset,this.endOffset-this.startOffset);t.push(n.substringData(this.startOffset,n.length-this.startOffset))}Wt(this,(n=>{g(n,(n=>{a(n)&&t.push(n.data)}))}));const e=this.endContainer;return a(e)&&t.push(e.substringData(0,this.endOffset)),t.join("")}}Range.START_TO_START=0,Range.START_TO_END=1,Range.END_TO_END=2,Range.END_TO_START=3;const Ht=-1,jt=1;function Zt(t,n,e,r){if(t!==e){const o=f(t),s=f(e);for(;o[0]&&s[0]&&o[0]===s[0];)o.shift(),s.shift();o.length&&(n=m(o[0])+.5),s.length&&(r=m(s[0])+.5)}return n===r?0:n<r?Ht:jt}function Qt(t){return p(t.startContainer)}class XMLDocument extends Document{D(t){return new(i().XMLDocument)}}class XMLSerializer{constructor(){}serializeToString(t){const n=[];return zt(t=lt(t,Node),!1,n),n.join("")}}function Yt(t){const n=[];return zt(t=lt(t,Node),!0,n),n.join("")}class MutationObserver{constructor(t){this.u=[],this.m=[],this.t=[],y(arguments,1),t=lt(t,Function),this.g=t}observe(t,n){if(y(arguments,2),t=lt(t,Node),n.childList=!!n.childList,n.subtree=!!n.subtree,void 0!==n.attributeOldValue&&void 0===n.attributes&&(n.attributes=!0),void 0!==n.characterDataOldValue&&void 0===n.characterData&&(n.characterData=!0),!(n.childList||n.attributes||n.characterData))throw new TypeError('The options object must set at least one of "attributes", "characterData", or "childList" to true.');if(n.attributeOldValue&&!n.attributes)throw new TypeError('The options object may only set "attributeOldValue" to true when "attributes" is true or not present.');if(n.characterDataOldValue&&!n.characterData)throw new TypeError('The options object may only set "characterDataOldValue" to true when "characterData" is true or not present.');t.o.register(this,n)}disconnect(){this.u.forEach((t=>t.o.removeForObserver(this))),this.u.length=0,this.m.length=0}takeRecords(){const t=this.m.concat();return this.m.length=0,t}}function Gt(t,n,e,r,o){return new Attr(t,n,e,r,o)}function Jt(t,n,e,r=null){return Vt(t,n,e,r)}function Kt(t,n){pt(t,n)}const tn=new Document;s.document=tn,s.Attr=Attr,s.CDATASection=CDATASection,s.Comment=Comment,s.Document=Document,s.DocumentFragment=DocumentFragment,s.DocumentType=DocumentType,s.DOMImplementation=DOMImplementation,s.Element=Element,s.ProcessingInstruction=ProcessingInstruction,s.Range=Range,s.Text=Text,s.XMLDocument=XMLDocument;export{Attr,CDATASection,CharacterData,Comment,C as DOMException,DOMImplementation,Document,DocumentFragment,DocumentType,Element,MutationObserver,z as MutationRecord,Node,ProcessingInstruction,Range,qt as StaticRange,Text,XMLDocument,XMLSerializer,tn as document,Yt as serializeToWellFormedString,Kt as unsafeAppendAttribute,Gt as unsafeCreateAttribute,Jt as unsafeCreateElement};
//# sourceMappingURL=slimdom.esm.js.map
