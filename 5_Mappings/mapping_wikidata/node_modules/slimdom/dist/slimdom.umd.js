!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).slimdom={})}(this,(function(t){"use strict";class n{constructor(t,n,e,r){this.source=null,this.observer=t,this.node=n,this.options=e,this.source=r||null,r&&t.t.push(this)}collectInterestedObservers(t,n,e,r,o){if(this.node!==n&&!this.options.subtree)return;if("attributes"===t&&!this.options.attributes)return;if("characterData"===t&&!this.options.characterData)return;if("childList"===t&&!this.options.childList)return;let s=r.indexOf(this.observer);s<0&&(s=r.length,r.push(this.observer),o.push(void 0)),("attributes"===t&&this.options.attributeOldValue||"characterData"===t&&this.options.characterDataOldValue)&&(o[s]=e.oldValue)}}class e{constructor(t){this.o=[],this.i=t}register(t,e){const r=this.o;let o=!1;r.forEach((n=>{n.observer===t&&(o=!0,function(t){for(let n=t.observer.t.length-1;n>=0;--n){const e=t.observer.t[n];if(e.source!==t)return;e.node.o.removeTransientRegisteredObserver(e),t.observer.t.splice(n,1)}}(n),n.options=e)})),o||(this.o.push(new n(t,this.i,e)),t.u.push(this.i))}removeTransientRegisteredObserver(t){this.o.splice(this.o.indexOf(t),1)}removeForObserver(t){let n=0;for(let e=0,r=this.o.length;e<r;++e){const r=this.o[e];r.observer!==t&&(e!==n&&(this.o[n]=r),++n)}this.o.length=n}collectInterestedObservers(t,n,e,r,o){this.o.forEach((s=>{s.collectInterestedObservers(t,n,e,r,o)}))}appendTransientRegisteredObservers(t){this.o.forEach((n=>{n.options.subtree&&t.o.registerTransient(n)}))}registerTransient(t){this.o.push(new n(t.observer,this.i,t.options,t))}}function r(t,n,...e){"function"!=typeof queueMicrotask?Promise.resolve().then((()=>t.apply(n,e))):queueMicrotask((()=>t.apply(n,e)))}class o{constructor(){this.l=new Set,this.h=!1}appendRecord(t,n){t.m.push(n),this.l.add(t)}queueMutationObserverMicrotask(){this.h||(this.h=!0,r((()=>{this.p()}),this))}p(){this.h=!1;const t=Array.from(this.l);this.l.clear(),t.forEach((t=>{r((t=>{const n=t.takeRecords();var e;(e=t).t.forEach((t=>{t.node.o.removeTransientRegisteredObserver(t)})),e.t.length=0,n.length>0&&t.g(n,t)}),this,t)}))}}class s{constructor(t){this.v=t}deref(){return this.v}}const i=new class{constructor(){this.l=new o,this.C=[]}forEachRange(t){let n=this.C.length;for(let e=n-1;e>=0;--e){const r=this.C[e].deref();null==r?(this.C[e]=this.C[n-1],this.C.pop(),n-=1):t(r)}}addRange(t){var n;this.C.push((n=t,"function"==typeof WeakRef?new WeakRef(n):new s(n)))}removeRange(t){let n=this.C.length;for(let e=n-1;e>=0;--e){const r=this.C[e].deref();null!=r&&r!==t||(this.C[e]=this.C[n-1],this.C.pop(),n-=1)}}};function u(t){return i}function l(t,...n){return n.some((n=>t.nodeType===n))}function c(t){return l(t,2)}function a(t){return l(t,8,7,3,4)}function h(t){return l(t,3,4)}function f(t){switch(t.nodeType){case 3:case 7:case 8:return t.data.length;default:return t.childNodes.length}}function d(t){let n=t,e=[];for(;n;)e.unshift(n),n=n.parentNode;return e}function m(t){return l(t,9)?t:t.ownerDocument}function p(t){return t.parentNode.childNodes.indexOf(t)}function g(t){for(;t.parentNode;)t=t.parentNode;return t}function w(t,n){n(t);for(let e=t.firstChild;e;e=e.nextSibling)w(e,n)}function b(t,n){const e=[];return w(n,(r=>{if(r===n||1!==r.nodeType)return;const o=r;"*"!==t&&o.nodeName!==t||e.push(o)})),e}function x(t,n,e){""===t&&(t=null);const r=[];return w(e,(o=>{if(o===e||1!==o.nodeType)return;const s=o;"*"!==t&&s.namespaceURI!==t||"*"!==n&&s.localName!==n||r.push(s)})),r}function y(t,n,e){e||(e=m(t));let r=t.D(e);if(n)for(let n=t.firstChild;n;n=n.nextSibling)r.appendChild(y(n,!0,e));return r}function v(t,n){if(t.length<n)throw new TypeError(`Function should be called with at least ${n} arguments`)}const C={IndexSizeError:1,HierarchyRequestError:3,WrongDocumentError:4,InvalidCharacterError:5,NotFoundError:8,NotSupportedError:9,InUseAttributeError:10,InvalidStateError:11,NamespaceError:14,InvalidNodeTypeError:24};class D extends Error{constructor(t="",n="Error"){super(t),this.message=t,this.name=n,this.code=C[n]||0,this.stack=new Error(t).stack}}function N(t,n){return new D(`${t}: ${n}`,t)}function S(t){throw N("HierarchyRequestError",t)}function E(t){throw N("IndexSizeError",t)}function F(t){throw N("InvalidCharacterError",t)}function T(t){throw N("InvalidNodeTypeError",t)}function A(t){throw N("InvalidStateError",t)}function k(t){throw N("NamespaceError",t)}function I(t){throw N("NotFoundError",t)}function R(t){throw N("NotSupportedError",t)}function z(t){throw N("WrongDocumentError",t)}class M{constructor(t,n){this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null,this.type=t,this.target=n}}function P(t,n,e){const r=[],o=[];for(let s=n;s;s=s.parentNode)s.o.collectInterestedObservers(t,n,e,r,o);const s=u();r.forEach(((r,i)=>{const u=o[i],l=new M(t,n);void 0!==e.name&&void 0!==e.namespace&&(l.attributeName=e.name,l.attributeNamespace=e.namespace),void 0!==u&&(l.oldValue=u),void 0!==e.addedNodes&&(l.addedNodes=e.addedNodes),void 0!==e.removedNodes&&(l.removedNodes=e.removedNodes),void 0!==e.previousSibling&&(l.previousSibling=e.previousSibling),void 0!==e.nextSibling&&(l.nextSibling=e.nextSibling),s.l.appendRecord(r,l)})),s.l.queueMutationObserverMicrotask()}function L(t){return l(t,1,9,11)?t:null}function V(t){const n=[];for(let e=t.firstElementChild;e;e=e.nextElementSibling)n.push(e);return n}function $(t){return l(t,1,8,7,3,4)?t:null}function _(t){for(let n=t.previousSibling;n;n=n.previousSibling)if(l(n,1))return n;return null}function O(t){for(let n=t.nextSibling;n;n=n.nextSibling)if(l(n,1))return n;return null}function B(t,n,e){if(l(n,9,11,1)||S("parent must be a Document, DocumentFragment or Element node"),t.contains(n)&&S("node must not be an inclusive ancestor of parent"),e&&e.parentNode!==n&&I("child is not a child of parent"),l(t,11,10,1,3,4,7,8)||S("node must be a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction or Comment node"),l(t,3)&&l(n,9)&&S("can not insert a Text node under a Document"),l(t,10)&&!l(n,9)&&S("can only insert a DocumentType node under a Document"),l(n,9)){const r=n;switch(t.nodeType){case 11:const n=t;n.firstElementChild!==n.lastElementChild&&S("can not insert more than one element under a Document"),Array.from(n.childNodes).some((t=>l(t,3)))&&S("can not insert a Text node under a Document"),n.firstElementChild&&(r.documentElement||e&&l(e,10)||e&&r.doctype&&p(e)<p(r.doctype))&&S("Document should contain at most one doctype, followed by at most one element");break;case 1:(r.documentElement||e&&l(e,10)||e&&r.doctype&&p(e)<p(r.doctype))&&S("Document should contain at most one doctype, followed by at most one element");break;case 10:(r.doctype||e&&r.documentElement&&p(r.documentElement)<p(e)||!e&&r.documentElement)&&S("Document should contain at most one doctype, followed by at most one element")}}}function U(t,n,e){B(t,n,e);let r=e;return r===t&&(r=t.nextSibling),Z(t,m(n)),q(t,n,r),t}function q(t,n,e,r=!1){const o=l(t,11),s=o?Array.from(t.childNodes):[t],i=s.length;if(0===i)return;if(o&&(s.forEach((t=>H(t,!0))),P("childList",t,{removedNodes:s})),null!==e){const t=p(e);u().forEachRange((e=>{e.startContainer===n&&e.startOffset>t&&(e.startOffset+=i),e.endContainer===n&&e.endOffset>t&&(e.endOffset+=i)}))}let c=null===e?n.lastChild:e.previousSibling;s.forEach((t=>{!function(t,n,e){t.parentNode=n;const r=null===e?n.lastChild:e.previousSibling,o=null===e?null:e;if(t.previousSibling=r,t.nextSibling=o,r?r.nextSibling=t:n.firstChild=t,o?(o.previousSibling=t,n.childNodes.splice(n.childNodes.indexOf(o),0,t)):(n.lastChild=t,n.childNodes.push(t)),l(t,1)){const e=t,s=L(n);if(s){let t=null;for(let n=r;n;n=n.previousSibling){if(l(n,1)){t=n;break}const e=$(n);if(e){t=e.previousElementSibling;break}}let n=null;for(let t=o;t;t=t.nextSibling){if(l(t,1)){n=t;break}const e=$(t);if(e){n=e.nextElementSibling;break}}t||(s.firstElementChild=e),n||(s.lastElementChild=e),s.childElementCount+=1}}if(l(n,9)){const e=n;l(t,1)?e.documentElement=t:l(t,10)&&(e.doctype=t)}}(t,n,e)})),r||P("childList",n,{addedNodes:s,nextSibling:e,previousSibling:c})}function W(t,n){return U(t,n,null)}function X(t,n,e){if(l(e,9,11,1)||S("Can not replace under a non-parent node"),n.contains(e)&&S("Can not insert a node under its own descendant"),t.parentNode!==e&&I("child is not a child of parent"),l(n,11,10,1,3,4,7,8)||S("Can not insert a node that isn't a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction or Comment"),l(n,3)&&l(e,9)&&S("can not insert a Text node under a Document"),l(n,10)&&!l(e,9)&&S("can only insert a DocumentType node under a Document"),l(e,9)){const r=e;switch(n.nodeType){case 11:const e=n;e.firstElementChild!==e.lastElementChild&&S("can not insert more than one element under a Document"),Array.from(e.childNodes).some((t=>l(t,3)))&&S("can not insert a Text node under a Document"),e.firstElementChild&&(r.documentElement&&r.documentElement!==t||t&&r.doctype&&p(t)<p(r.doctype))&&S("Document should contain at most one doctype, followed by at most one element");break;case 1:(r.documentElement&&r.documentElement!==t||r.doctype&&p(t)<p(r.doctype))&&S("Document should contain at most one doctype, followed by at most one element");break;case 10:(r.doctype&&r.doctype!==t||r.documentElement&&p(r.documentElement)<p(t))&&S("Document should contain at most one doctype, followed by at most one element")}}let r=t.nextSibling;r===n&&(r=n.nextSibling);const o=t.previousSibling;Z(n,m(e));let s=[];null!==t.parentNode&&(s.push(t),H(t,!0));const i=l(n,11)?Array.from(n.childNodes):[n];return q(n,e,r,!0),P("childList",e,{addedNodes:i,removedNodes:s,nextSibling:r,previousSibling:o}),t}function j(t,n){null!==t&&Z(t,m(n));const e=Array.from(n.childNodes);let r=[];null!==t&&(l(t,11)?t.childNodes.forEach((t=>{r.push(t)})):r.push(t)),e.forEach((t=>{H(t,!0)})),null!==t&&q(t,n,null,!0),(r.length>0||e.length>0)&&P("childList",n,{addedNodes:r,removedNodes:e})}function H(t,n=!1){const e=t.parentNode,r=p(t);u().forEachRange((n=>{t.contains(n.startContainer)&&(n.startContainer=e,n.startOffset=r),t.contains(n.endContainer)&&(n.endContainer=e,n.endOffset=r),n.startContainer===e&&n.startOffset>r&&(n.startOffset-=1),n.endContainer===e&&n.endOffset>r&&(n.endOffset-=1)}));const o=t.previousSibling,s=t.nextSibling;!function(t,n){const e=t.previousSibling,r=t.nextSibling,o=l(t,1),s=o?t.previousElementSibling:null,i=o?t.nextElementSibling:null;if(t.parentNode=null,t.previousSibling=null,t.nextSibling=null,e?e.nextSibling=r:n.firstChild=r,r?r.previousSibling=e:n.lastChild=e,n.childNodes.splice(n.childNodes.indexOf(t),1),o){const e=L(n);e&&(e.firstElementChild===t&&(e.firstElementChild=i),e.lastElementChild===t&&(e.lastElementChild=s),e.childElementCount-=1)}if(l(n,9)){const e=n;l(t,1)?e.documentElement=null:l(t,10)&&(e.doctype=null)}}(t,e);for(let n=e;n;n=n.parentNode)n.o.appendTransientRegisteredObservers(t);n||P("childList",e,{removedNodes:[t],nextSibling:s,previousSibling:o})}function Z(t,n){const e=m(t);t.parentNode&&H(t),n!==e&&w(t,(t=>{if(t.ownerDocument=n,l(t,1))for(const e of t.attributes)e.ownerDocument=n}))}function Q(t){const n=[];return w(t,(t=>{l(t,3,4)&&n.push(t.data)})),n.join("")}function Y(t,n){let e=null;if(""!==n){e=new(u().Text)(n)}j(e,t)}function G(t,n){const e=t.map((t=>t instanceof Node?t:n.createTextNode(String(t))));if(1===e.length)return e[0];{const t=n.createDocumentFragment();return e.forEach((n=>{t.appendChild(n)})),t}}function J(t,n){U(G(n,m(t)),t,t.firstChild)}function K(t,n){W(G(n,m(t)),t)}function tt(t,n){const e=G(n,m(t));B(e,t,null),j(e,t)}function nt(t,n){const e=t.parentNode;if(null===e)return;let r=t.previousSibling;for(;null!==r&&n.indexOf(r)>=0;)r=r.previousSibling;U(G(n,m(t)),e,null===r?e.firstChild:r.nextSibling)}function et(t,n){const e=t.parentNode;if(null===e)return;let r=t.nextSibling;for(;null!==r&&n.indexOf(r)>=0;)r=r.nextSibling;U(G(n,m(t)),e,r)}function rt(t,n){const e=t.parentNode;if(null===e)return;let r=t.nextSibling;for(;null!==r&&n.indexOf(r)>=0;)r=r.nextSibling;const o=G(n,m(t));t.parentNode===e?X(t,o,e):U(o,e,r)}function ot(t){null!==t.parentNode&&H(t)}function st(t,n){const e=n.startContainer;l(e,7)&&S("Can not insert into a processing instruction"),l(e,8)&&S("Can not insert into a comment"),h(e)&&null===e.parentNode&&S("Can not insert into a text node without a parent");let r=null;r=h(e)?e:e.childNodes[n.startOffset]||null;const o=null===r?e:r.parentNode;B(t,o,r),h(e)&&(r=e.splitText(n.startOffset)),t===r&&(r=r.nextSibling),null!==t.parentNode&&H(t);let s=null===r?f(o):p(r);l(t,11)?s+=f(t):s+=1,U(t,o,r),n.collapsed&&n.setEnd(o,s)}function it(t){return t>>>0}function ut(t){return null===t?"":String(t)}function lt(t){return null==t?"":String(t)}function ct(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError(`Value should be an instance of ${n.name}`)}(t,n),t}function at(t,n){return null==t?null:ct(t,n)}function ht(t){return void 0===t?null:t}const ft=new WeakMap;function dt(t){let n=ft.get(t);return void 0===n&&(n=Math.random(),ft.set(t,n)),n}class Node{constructor(){this.ownerDocument=null,this.parentNode=null,this.childNodes=[],this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.o=new e(this)}get parentElement(){return this.parentNode&&l(this.parentNode,1)?this.parentNode:null}hasChildNodes(){return!!this.childNodes.length}normalize(){let t=this.firstChild,n=0;for(m(this);t;){let e=t.nextSibling;if(!l(t,3)){t.normalize(),t=e;continue}const r=t;let o=r.length;if(0===o){H(t),--n,t=e;continue}let s="";const i=[];for(let t=r.nextSibling;t&&l(t,3);t=t.nextSibling)s+=t.data,i.push(t);s&&r.replaceData(o,0,s);const c=u();for(let t=0,e=i.length;t<e;++t){const e=i[t],s=n+t+1;c.forEachRange((t=>{t.startContainer===e&&(t.startOffset+=o,t.startContainer=r),t.endContainer===e&&(t.endOffset+=o,t.endContainer=r),t.startContainer===this&&t.startOffset===s&&(t.startContainer=r,t.startOffset=o),t.endContainer===this&&t.endOffset===s&&(t.endContainer=r,t.endOffset=o)})),o+=e.length}for(;i.length;)H(i.shift());t=t.nextSibling,++n}}cloneNode(t=!1){return y(this,t)}compareDocumentPosition(t){if(v(arguments,1),this===(t=ct(t,Node)))return 0;let n=t,e=this,r=null,o=null;if(c(n)&&(r=n,n=r.ownerElement),c(e)&&(o=e,e=o.ownerElement,null!==r&&null!==n&&e===n))for(const t of e.attributes){if(t===r)return Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|Node.DOCUMENT_POSITION_PRECEDING;if(t===o)return Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|Node.DOCUMENT_POSITION_FOLLOWING}if(null===n||null===e)return Node.DOCUMENT_POSITION_DISCONNECTED|Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|(dt(n||r)>dt(e||o)?Node.DOCUMENT_POSITION_FOLLOWING:Node.DOCUMENT_POSITION_PRECEDING);const s=d(n),i=d(e);if(s[0]!==i[0])return Node.DOCUMENT_POSITION_DISCONNECTED|Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|(dt(s[0])>dt(i[0])?Node.DOCUMENT_POSITION_FOLLOWING:Node.DOCUMENT_POSITION_PRECEDING);let u=0;for(;u<s.length&&u<i.length&&s[u]===i[u];)++u;const l=n!==e&&u===s.length,a=n!==e&&u===i.length;return l&&null===r||n===e&&null!==o?Node.DOCUMENT_POSITION_CONTAINS|Node.DOCUMENT_POSITION_PRECEDING:a&&null===o||n===e&&null!==r?Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING:l||p(s[u])<p(i[u])?Node.DOCUMENT_POSITION_PRECEDING:Node.DOCUMENT_POSITION_FOLLOWING}contains(t){for(v(arguments,1),t=at(t,Node);t&&t!=this;)t=t.parentNode;return t===this}isDefaultNamespace(t){v(arguments,1),""===(t=ht(t))&&(t=null);return this.lookupNamespaceURI(null)===t}insertBefore(t,n){return v(arguments,2),U(t=ct(t,Node),this,n=at(n,Node))}appendChild(t){return v(arguments,1),W(t=ct(t,Node),this)}replaceChild(t,n){return v(arguments,2),t=ct(t,Node),X(n=ct(n,Node),t,this)}removeChild(t){return v(arguments,1),function(t,n){return t.parentNode!==n&&I("child is not a child of parent"),H(t),t}(t=ct(t,Node),this)}}function mt(t,n,e,r){P("attributes",n,{name:t.localName,namespace:t.namespaceURI,oldValue:e})}function pt(t,n){mt(t,t.ownerElement,t.value),t.N=n}function gt(t,n){mt(t,n,null,t.value),n.attributes.push(t),t.ownerElement=n}function wt(t){const n=t.ownerElement;mt(t,n,t.value),n.attributes.splice(n.attributes.indexOf(t),1),t.ownerElement=null}Node.ELEMENT_NODE=1,Node.ATTRIBUTE_NODE=2,Node.TEXT_NODE=3,Node.CDATA_SECTION_NODE=4,Node.ENTITY_REFERENCE_NODE=5,Node.ENTITY_NODE=6,Node.PROCESSING_INSTRUCTION_NODE=7,Node.COMMENT_NODE=8,Node.DOCUMENT_NODE=9,Node.DOCUMENT_TYPE_NODE=10,Node.DOCUMENT_FRAGMENT_NODE=11,Node.NOTATION_NODE=12,Node.DOCUMENT_POSITION_DISCONNECTED=1,Node.DOCUMENT_POSITION_PRECEDING=2,Node.DOCUMENT_POSITION_FOLLOWING=4,Node.DOCUMENT_POSITION_CONTAINS=8,Node.DOCUMENT_POSITION_CONTAINED_BY=16,Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,Node.prototype.ELEMENT_NODE=1,Node.prototype.ATTRIBUTE_NODE=2,Node.prototype.TEXT_NODE=3,Node.prototype.CDATA_SECTION_NODE=4,Node.prototype.ENTITY_REFERENCE_NODE=5,Node.prototype.ENTITY_NODE=6,Node.prototype.PROCESSING_INSTRUCTION_NODE=7,Node.prototype.COMMENT_NODE=8,Node.prototype.DOCUMENT_NODE=9,Node.prototype.DOCUMENT_TYPE_NODE=10,Node.prototype.DOCUMENT_FRAGMENT_NODE=11,Node.prototype.NOTATION_NODE=12;class Attr extends Node{constructor(t,n,e,r,o){super(),this.namespaceURI=t,this.prefix=n,this.localName=e,this.name=null===n?e:`${n}:${e}`,this.N=r,this.ownerElement=o}get nodeType(){return 2}get nodeName(){return this.name}get nodeValue(){return this.N}set nodeValue(t){bt(this,t=lt(t))}get textContent(){return this.N}set textContent(t){bt(this,t=lt(t))}lookupPrefix(t){return v(arguments,1),null!==this.ownerElement?this.ownerElement.lookupPrefix(t):null}lookupNamespaceURI(t){return v(arguments,1),null===this.ownerElement?null:this.ownerElement.lookupNamespaceURI(t)}get value(){return this.N}set value(t){bt(this,t)}D(t){const n=new(u().Attr)(this.namespaceURI,this.prefix,this.localName,this.value,null);return n.ownerDocument=t,n}}function bt(t,n){n=String(n);null===t.ownerElement?t.N=n:pt(t,n)}class CharacterData extends Node{constructor(t){super(),this.S=String(t)}get nodeValue(){return this.S}set nodeValue(t){t=lt(t),xt(this,0,this.length,t)}get textContent(){return this.S}set textContent(t){t=lt(t),xt(this,0,this.length,t)}lookupPrefix(t){v(arguments,1);const n=this.parentElement;return null!==n?n.lookupPrefix(t):null}lookupNamespaceURI(t){v(arguments,1);const n=this.parentElement;return null===n?null:n.lookupNamespaceURI(t)}before(...t){nt(this,t)}after(...t){et(this,t)}replaceWith(...t){rt(this,t)}remove(){ot(this)}get previousElementSibling(){return _(this)}get nextElementSibling(){return O(this)}get data(){return this.S}set data(t){t=ut(t),xt(this,0,this.length,t)}get length(){return this.data.length}substringData(t,n){return v(arguments,2),yt(this,t,n)}appendData(t){v(arguments,1),xt(this,this.length,0,t)}insertData(t,n){v(arguments,1),xt(this,t,0,n)}deleteData(t,n){v(arguments,2),xt(this,t,n,"")}replaceData(t,n,e){v(arguments,3),xt(this,t,n,e)}}function xt(t,n,e,r){n=it(n),e=it(e);const o=t.length;n>o&&E("can not replace data past the node's length"),n+e>o&&(e=o-n),P("characterData",t,{oldValue:t.data});const s=t.data,i=s.substring(0,n)+r+s.substring(n+e);t.S=i;u().forEachRange((o=>{o.startContainer===t&&o.startOffset>n&&o.startOffset<=n+e&&(o.startOffset=n),o.endContainer===t&&o.endOffset>n&&o.endOffset<=n+e&&(o.endOffset=n),o.startContainer===t&&o.startOffset>n+e&&(o.startOffset=o.startOffset+r.length-e),o.endContainer===t&&o.endOffset>n+e&&(o.endOffset=o.endOffset+r.length-e)}))}function yt(t,n,e){n=it(n),e=it(e);const r=t.length;return n>r&&E("can not substring data past the node's length"),n+e>r?t.data.substring(n):t.data.substring(n,n+e)}class Text extends CharacterData{get nodeType(){return 3}get nodeName(){return"#text"}constructor(t=""){super(t);const n=u();this.ownerDocument=n.document}splitText(t){return v(arguments,1),function(t,n){const e=t.length;n>e&&E("can not split past the node's length");const r=e-n,o=yt(t,n,r),s=new(u().Text)(o);s.ownerDocument=t.ownerDocument;const i=t.parentNode;if(null!==i){q(s,i,t.nextSibling);const e=p(t)+1;u().forEachRange((r=>{r.startContainer===t&&r.startOffset>n&&(r.startContainer=s,r.startOffset-=n),r.endContainer===t&&r.endOffset>n&&(r.endContainer=s,r.endOffset-=n),r.startContainer===i&&r.startOffset===e&&(r.startOffset+=1),r.endContainer===i&&r.endOffset===e&&(r.endOffset+=1)}))}return xt(t,n,r,""),s}(this,t=it(t))}D(t){const n=new(u().Text)(this.data);return n.ownerDocument=t,n}get wholeText(){const t=[this.data];let n=this.previousSibling;for(;null!==n&&l(n,3,4);){const e=n.data;t.unshift(e),n=n.previousSibling}let e=this.nextSibling;for(;null!==e&&l(e,3,4);){const n=e.data;t.push(n),e=e.nextSibling}return t.join("")}}class CDATASection extends Text{get nodeType(){return 4}get nodeName(){return"#cdata-section"}constructor(t){super(t)}D(t){const n=new(u().CDATASection)(this.data);return n.ownerDocument=t,n}}class Comment extends CharacterData{get nodeType(){return 8}get nodeName(){return"#comment"}constructor(t=""){super(t);const n=u();this.ownerDocument=n.document}D(t){const n=new(u().Comment)(this.data);return n.ownerDocument=t,n}}class DocumentType extends Node{constructor(t,n="",e=""){super(),this.name=t,this.publicId=n,this.systemId=e}get nodeType(){return 10}get nodeName(){return this.name}get nodeValue(){return null}set nodeValue(t){}get textContent(){return null}set textContent(t){}lookupPrefix(t){return v(arguments,1),null}lookupNamespaceURI(t){return v(arguments,1),null}before(...t){nt(this,t)}after(...t){et(this,t)}replaceWith(...t){rt(this,t)}remove(){ot(this)}D(t){const n=new(u().DocumentType)(this.name,this.publicId,this.systemId);return n.ownerDocument=t,n}}const vt="http://www.w3.org/1999/xhtml",Ct="http://www.w3.org/XML/1998/namespace",Dt="http://www.w3.org/2000/xmlns/",Nt=/^(?:[:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:[\-\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/;function St(t){return Nt.test(t)}function Et(t){(function(t){const n=t.split(":");return!(n.length>2)&&n.every((t=>St(t)))})(t)||F("The qualified name is not a valid QName")}function Ft(t,n){""===t&&(t=null),Et(n);let e=null,r=n;const o=n.indexOf(":");return o>=0&&(e=n.substring(0,o),r=n.substring(o+1)),null!==e&&null===t&&k("Qualified name with prefix can not have a null namespace"),"xml"===e&&t!==Ct&&k("xml prefix can only be used for the XML namespace"),"xmlns"!==n&&"xmlns"!==e||t===Dt||k("xmlns prefix or qualifiedName must use the XMLNS namespace"),t===Dt&&"xmlns"!==n&&"xmlns"!==e&&k("xmlns prefix or qualifiedName must be used for the XMLNS namespace"),{namespace:t,prefix:e,localName:r}}function Tt(t,n){if(t.namespaceURI===n&&null!==t.prefix)return t.prefix;const e=Array.from(t.attributes).find((t=>"xmlns"===t.prefix&&t.value===n));return e?e.localName:null!==t.parentElement?Tt(t.parentElement,n):null}class At{constructor(){this.F=new Map}copy(){const t=new At;for(const[n,e]of Array.from(this.F.entries()))t.F.set(n,e.concat());return t}retrievePreferredPrefixString(t,n){const e=this.F.get(n);if(void 0===e)return null;for(const n of e)if(n===t)return n;return e[e.length-1]}checkIfFound(t,n){const e=this.F.get(n);return void 0!==e&&e.indexOf(t)>=0}add(t,n){const e=this.F.get(n);void 0===e?this.F.set(n,[t]):e.push(t)}}const kt=/^(?:[\t\n\r -\uD7FF\uE000-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,It=/^(?:[\n\r !#-%'-;=\?-Z_a-z])*$/,Rt=["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function zt(t,n,e=!1){const r=e?[t]:t.childNodes,o=[];for(const t of r)Mt(t,n,o);return o.join("")}function Mt(t,n,e){const r=new At;r.add("xml",Ct);const o={value:1};try{Pt(t,null,r,o,n,e)}catch(t){return A(t instanceof Error?t.message:"An error occurred during serialization.")}}function Pt(t,n,e,r,o,s){switch(t.nodeType){case 1:return void function(t,n,e,r,o,s){const i=t;if(o&&(i.localName.indexOf(":")>=0||!St(i.localName)))throw new Error(`Can not serialize an element because the localName "${i.localName}" is not allowed.`);s.push("<");let u="",l=!1,c=!1;const a=e.copy(),h={},f=function(t,n,e){let r=null;for(const o of t.attributes){const t=o.namespaceURI,s=o.prefix;if(t===Dt){if(null===s){r=o.value;continue}const t=o.localName;let i=o.value;if(i===Ct)continue;if(""===i&&(i=null),n.checkIfFound(t,i))continue;n.add(t,i),e[t]=null===i?"":i}}return r}(i,a,h);let d=n;const m=i.namespaceURI;if(d===m)null!==f&&(c=!0),u+=m===Ct?"xml:"+i.localName:i.localName,s.push(u);else{let t=i.prefix,n=a.retrievePreferredPrefixString(t,m);if("xmlns"===t){if(o)throw new Error('Can not serialize an element with prefix "xmlns" because it will not legally round-trip in a conforming XML parser.');n=t}null!==n?(u+=n+":"+i.localName,null!==f&&f!==Ct&&(d=""===f?null:f),s.push(u)):null!==t?(t in h&&(t=Vt(a,m,r)),a.add(t,m),u+=t+":"+i.localName,s.push(u),s.push(" xmlns:",t,'="',Lt(m,o),'"'),null!==f&&(d=""===f?null:f)):null===f||null!==f&&f!==m?(c=!0,u+=i.localName,d=m,s.push(u),s.push(' xmlns="',Lt(m,o),'"')):(u+=i.localName,d=m,s.push(u))}(function(t,n,e,r,o,s,i){const u=[];for(const l of t.attributes){if(s&&u.find((t=>t.localName===l.localName&&t.namespaceURI===l.namespaceURI)))throw new Error(`Can not serialize a duplicate attribute for namespaceURI "${l.namespaceURI}", localName "${l.localName}".`);u.push({namespaceURI:l.namespaceURI,localName:l.localName});const t=l.namespaceURI;let c=null;if(null!==t)if(c=n.retrievePreferredPrefixString(l.prefix,t),t===Dt){if(l.value===Ct)continue;if(null===l.prefix&&o)continue;if(null!==l.prefix&&(!(l.localName in r)||r[l.localName]!==l.value))continue;if(s&&l.value===Dt)throw new Error("The serialization of this attribute would produce invalid XML because the XMLNS namespace is reserved and cannot be applied as an element's namespace via XML parsing.");if(s&&null!==l.prefix&&""===l.value)throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace. Use a default namespace declaration instead.");"xmlns"===l.prefix&&(c="xmlns")}else null===c&&(c=null===l.prefix||l.prefix in r?Vt(n,t,e):l.prefix,n.add(c,l.namespaceURI),r[c]=l.namespaceURI,i.push(" xmlns:",c,'="',Lt(t,s),'"'));if(i.push(" "),null!==c&&i.push(c,":"),s&&(l.localName.indexOf(":")>=0||!St(l.localName)||"xmlns"===l.localName&&null===t))throw new Error(`Can not serialize an attribute because the localName "${l.localName}" is not allowed.`);i.push(l.localName,'="',Lt(l.value,s),'"')}})(i,a,r,h,c,o,s),m===vt&&!i.hasChildNodes()&&Rt.indexOf(i.localName)>=0&&(s.push(" /"),l=!0);m===vt||i.hasChildNodes()||(s.push("/"),l=!0);if(s.push(">"),l)return;for(const n of t.childNodes)Pt(n,d,a,r,o,s);s.push("</",u,">")}(t,n,e,r,o,s);case 9:return void function(t,n,e,r,o,s){const i=t;if(o&&null===i.documentElement)throw new Error("Can not serialize a document with no documentElement.");for(const t of i.childNodes)Pt(t,n,e,r,o,s)}(t,n,e,r,o,s);case 8:return void function(t,n,e,r,o,s){const i=t;if(o&&(!kt.test(i.data)||i.data.indexOf("--")>=0||i.data.endsWith("-")))throw new Error("Can not serialize a comment because it contains invalid characters.");s.push("\x3c!--",i.data,"--\x3e")}(t,0,0,0,o,s);case 4:return void function(t,n,e,r,o,s){const i=t;s.push("<![CDATA[",i.data,"]]>")}(t,0,0,0,0,s);case 3:return void function(t,n,e,r,o,s){const i=t;if(o&&!kt.test(i.data))throw new Error("Can not serialize a text node because it contains invalid characters.");let u=i.data;u=u.replace(/&/g,"&amp;"),u=u.replace(/</g,"&lt;"),u=u.replace(/>/g,"&gt;"),s.push(u)}(t,0,0,0,o,s);case 11:return void function(t,n,e,r,o,s){for(const i of t.childNodes)Pt(i,n,e,r,o,s)}(t,n,e,r,o,s);case 10:return void function(t,n,e,r,o,s){const i=t;if(o&&!It.test(i.publicId))throw new Error("Can not serialize a document type because the publicId contains invalid characters.");if(o&&(!kt.test(i.systemId)||i.systemId.indexOf('"')>=0&&i.systemId.indexOf("'")>=0))throw new Error("Can not serialize a document type because the systemId contains invalid characters.");s.push("<!DOCTYPE"),s.push(" "),s.push(i.name),""!==i.publicId&&s.push(' PUBLIC "',i.publicId,'"');""!==i.systemId&&""===i.publicId&&s.push(" SYSTEM");""!==i.systemId&&s.push(' "',i.systemId,'"');s.push(">")}(t,0,0,0,o,s);case 7:return void function(t,n,e,r,o,s){const i=t;if(o){if(i.target.indexOf(":")>=0)throw new Error(`Can not serialize a processing instruction because the target "${i.target}" may not contain ":".`);if("xml"===i.target.toLowerCase())throw new Error('Can not serialize a processing instruction because "xml" may not be used as target.')}if(o&&(!kt.test(i.data)||i.data.indexOf("?>")>=0))throw new Error("Can not serialize a processing instruction because the data contains invalid characters.");s.push("<?",i.target," ",i.data,"?>")}(t,0,0,0,o,s);case 2:return;default:throw new TypeError("Only Nodes and Attr objects can be serialized by this algorithm.")}}function Lt(t,n){if(n&&null!==t&&!kt.test(t))throw new Error("Can not serialize an attribute value because it contains invalid characters.");return null===t?"":t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&#9;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;")}function Vt(t,n,e){const r="ns"+e.value;return e.value+=1,t.add(r,n),r}class Element extends Node{constructor(t,n,e){super(),this.firstElementChild=null,this.lastElementChild=null,this.childElementCount=0,this.attributes=[],this.namespaceURI=t,this.prefix=n,this.localName=e,this.tagName=null===n?e:`${n}:${e}`}get nodeType(){return 1}get nodeName(){return this.tagName}get nodeValue(){return null}set nodeValue(t){}get textContent(){return Q(this)}set textContent(t){Y(this,t=lt(t))}lookupPrefix(t){return v(arguments,1),null===(t=ht(t))||""===t?null:Tt(this,t)}lookupNamespaceURI(t){if(v(arguments,1),""===(t=ht(t))&&(t=null),null!==this.namespaceURI&&this.prefix===t)return this.namespaceURI;let n=null;if(null!==t){const e=this.getAttributeNodeNS(Dt,t);e&&"xmlns"===e.prefix&&(n=e.value)}else{const t=this.getAttributeNodeNS(Dt,"xmlns");t&&null===t.prefix&&(n=t.value)}if(null!==n)return""!==n?n:null;const e=this.parentElement;return null===e?null:e.lookupNamespaceURI(t)}before(...t){nt(this,t)}after(...t){et(this,t)}replaceWith(...t){rt(this,t)}remove(){ot(this)}get children(){return V(this)}prepend(...t){J(this,t)}append(...t){K(this,t)}replaceChildren(...t){tt(this,t)}get previousElementSibling(){return _(this)}get nextElementSibling(){return O(this)}hasAttributes(){return this.attributes.length>0}getAttribute(t){v(arguments,1);const n=_t(t=String(t),this);return null===n?null:n.value}getAttributeNS(t,n){v(arguments,2);const e=Ot(t=ht(t),n=String(n),this);return null===e?null:e.value}setAttribute(t,n){v(arguments,2),t=String(t),n=String(n),St(t)||F("The qualified name does not match the Name production");const e=_t(t,this);if(null===e){const e=new(u().Attr)(null,null,t,n,this);return e.ownerDocument=this.ownerDocument,void gt(e,this)}pt(e,n)}setAttributeNS(t,n,e){v(arguments,3),t=ht(t),n=String(n),e=String(e);const{namespace:r,prefix:o,localName:s}=Ft(t,n);!function(t,n,e,r,o){const s=Ot(o,n,t);if(null===s){const s=new(u().Attr)(o,r,n,e,t);return s.ownerDocument=t.ownerDocument,void gt(s,t)}pt(s,e)}(this,s,e,o,r)}removeAttribute(t){v(arguments,1),Ut(t=String(t),this)}removeAttributeNS(t,n){v(arguments,2),function(t,n,e){const r=Ot(t,n,e);null!==r&&wt(r)}(t=ht(t),n=String(n),this)}toggleAttribute(t,n){St(t)||F("The qualified name does not match the Name production");if(null===_t(t,this)){if(void 0===n||!0===n){const n=new(u().Attr)(null,null,t,"",this);return n.ownerDocument=this.ownerDocument,gt(n,this),!0}return!1}return void 0!==n&&!1!==n||(Ut(t,this),!1)}hasAttribute(t){return v(arguments,1),null!==_t(t=String(t),this)}hasAttributeNS(t,n){return v(arguments,2),null!==Ot(t=ht(t),n=String(n),this)}getAttributeNode(t){return v(arguments,1),_t(t=String(t),this)}getAttributeNodeNS(t,n){return v(arguments,2),Ot(t=ht(t),n=String(n),this)}setAttributeNode(t){return v(arguments,1),Bt(t=ct(t,Attr),this)}setAttributeNodeNS(t){return v(arguments,1),Bt(t=ct(t,Attr),this)}removeAttributeNode(t){return v(arguments,1),t=ct(t,Attr),this.attributes.indexOf(t)<0&&I("the specified attribute does not exist"),wt(t),t}getElementsByTagName(t){return v(arguments,1),b(t=String(t),this)}getElementsByTagNameNS(t,n){return v(arguments,2),x(t=ht(t),n=String(n),this)}D(t){const n=$t(t,this.localName,this.namespaceURI,this.prefix);for(const e of this.attributes){const r=e.D(t);n.setAttributeNode(r)}return n}get innerHTML(){return zt(this,!0)}get outerHTML(){return zt(this,!0,!0)}}function $t(t,n,e,r=null){let o=null;return o=new(u().Element)(e,r,n),o.ownerDocument=t,o}function _t(t,n){return n.attributes.find((n=>n.name===t))||null}function Ot(t,n,e){return""===t&&(t=null),e.attributes.find((e=>e.namespaceURI===t&&e.localName===n))||null}function Bt(t,n){null!==t.ownerElement&&t.ownerElement!==n&&function(t){throw N("InUseAttributeError",t)}("attribute is in use by another element");const e=Ot(t.namespaceURI,t.localName,n);return e===t?t:(null!==e?function(t,n){const e=t.ownerElement;mt(t,e,t.value,n.value),e.attributes.splice(e.attributes.indexOf(t),1,n),n.ownerElement=e,t.ownerElement=null}(e,t):gt(t,n),e)}function Ut(t,n){const e=_t(t,n);return null!==e&&wt(e),e}function qt(t,n,e){const{namespace:r,prefix:o,localName:s}=Ft(n,e);return $t(t,s,r,o)}class DOMImplementation{constructor(t){this.T=t}createDocumentType(t,n,e){v(arguments,3),t=String(t),n=String(n),e=String(e),Et(t);const r=new(u(this.T).DocumentType)(t,n,e);return r.ownerDocument=this.T,r}createDocument(t,n,e=null){v(arguments,2),t=ht(t),n=ut(n),e=at(e,DocumentType);const r=new(u(this.T).XMLDocument);let o=null;return""!==n&&(o=qt(r,t,n)),e&&r.appendChild(e),o&&r.appendChild(o),r}createHTMLDocument(t){t=ht(t);const n=u(this.T),e=new n.Document,r=new n.DocumentType("html");r.ownerDocument=e,e.appendChild(r);const o=$t(e,"html",vt);e.appendChild(o);const s=$t(e,"head",vt);if(o.appendChild(s),null!==t){const n=$t(e,"title",vt);s.appendChild(n),n.appendChild(e.createTextNode(t))}return o.appendChild($t(e,"body",vt)),e}}class Document extends Node{constructor(){super(),this.firstElementChild=null,this.lastElementChild=null,this.childElementCount=0,this.implementation=new DOMImplementation(this),this.doctype=null,this.documentElement=null}get nodeType(){return 9}get nodeName(){return"#document"}get nodeValue(){return null}set nodeValue(t){}get textContent(){return null}set textContent(t){}lookupPrefix(t){return v(arguments,1),null!==this.documentElement?this.documentElement.lookupPrefix(t):null}lookupNamespaceURI(t){return v(arguments,1),null===this.documentElement?null:this.documentElement.lookupNamespaceURI(t)}get children(){return V(this)}prepend(...t){J(this,t)}append(...t){K(this,t)}replaceChildren(...t){tt(this,t)}getElementsByTagName(t){return v(arguments,1),b(t=String(t),this)}getElementsByTagNameNS(t,n){return v(arguments,2),x(t=ht(t),n=String(n),this)}createElement(t){v(arguments,1),St(t=String(t))||F("The local name is not a valid Name");return $t(this,t,null,null)}createElementNS(t,n){return v(arguments,2),qt(this,t=ht(t),n=String(n))}createDocumentFragment(){const t=new(u().DocumentFragment);return t.ownerDocument=this,t}createTextNode(t){v(arguments,1),t=String(t);const n=new(u().Text)(t);return n.ownerDocument=this,n}createCDATASection(t){v(arguments,1),(t=String(t)).indexOf("]]>")>=0&&F('Data must not contain the string "]]>"');const n=new(u().CDATASection)(t);return n.ownerDocument=this,n}createComment(t){v(arguments,1),t=String(t);const n=new(u().Comment)(t);return n.ownerDocument=this,n}createProcessingInstruction(t,n){v(arguments,2),t=String(t),n=String(n),St(t)||F("The target is not a valid Name"),n.indexOf("?>")>=0&&F('Data must not contain the string "?>"');const e=new(u().ProcessingInstruction)(t,n);return e.ownerDocument=this,e}importNode(t,n=!1){return v(arguments,1),l(t=ct(t,Node),9)&&R("importing a Document node is not supported"),y(t,n,this)}adoptNode(t){return v(arguments,1),l(t=ct(t,Node),9)&&R("adopting a Document node is not supported"),Z(t,this),t}createAttribute(t){v(arguments,1),St(t=String(t))||F("The local name is not a valid Name");const n=new(u().Attr)(null,null,t,"",null);return n.ownerDocument=this,n}createAttributeNS(t,n){v(arguments,2),t=ht(t),n=String(n);const{namespace:e,prefix:r,localName:o}=Ft(t,n),s=new(u().Attr)(e,r,o,"",null);return s.ownerDocument=this,s}createRange(){const t=new(u().Range);return t.startContainer=this,t.startOffset=0,t.endContainer=this,t.endOffset=0,t}D(t){return new(u().Document)}}class DocumentFragment extends Node{constructor(){super(),this.firstElementChild=null,this.lastElementChild=null,this.childElementCount=0;const t=u();this.ownerDocument=t.document}get nodeType(){return 11}get nodeName(){return"#document-fragment"}get nodeValue(){return null}set nodeValue(t){}get textContent(){return Q(this)}set textContent(t){Y(this,t=lt(t))}lookupPrefix(t){return v(arguments,1),null}lookupNamespaceURI(t){return v(arguments,1),null}get children(){return V(this)}prepend(...t){J(this,t)}append(...t){K(this,t)}replaceChildren(...t){tt(this,t)}D(t){const n=new(u().DocumentFragment);return n.ownerDocument=t,n}}class ProcessingInstruction extends CharacterData{constructor(t,n){super(n),this.target=t}get nodeType(){return 7}get nodeName(){return this.target}D(t){const n=new(u().ProcessingInstruction)(this.target,this.data);return n.ownerDocument=t,n}}function Wt(t,n){if(t.collapsed)return;const e=d(t.startContainer),r=d(t.endContainer);let o=0;for(;o<e.length&&o<r.length&&e[o]===r[o];)++o;const s=t.endContainer.childNodes[t.endOffset]||null;for(let o=t.startContainer.childNodes[t.startOffset]||null;o&&o!==s&&o!==r[e.length];o=o.nextSibling)n(o);for(let t=e.length-1;t>=o;--t)for(let o=e[t].nextSibling;o&&o!==s&&o!==r[t];o=o.nextSibling)n(o);for(let t=o;t<r.length;++t)for(let e=r[t].firstChild;e&&e!==s&&e!==r[t+1];e=e.nextSibling)n(e)}function Xt(t,n){const e=m(t.startContainer),r=e.createDocumentFragment();if(t.collapsed)return r;const o=t.startContainer,s=t.startOffset,i=t.endContainer,u=t.endOffset;if(o===i&&a(o)){const t=o.cloneNode();return t.data=o.substringData(s,u-s),W(t,r),n||o.replaceData(s,u-s,""),r}const c=d(t.startContainer),h=d(t.endContainer);let g=0;for(;g<c.length&&g<h.length&&c[g]===h[g];)++g;const w=g===c.length,b=g===h.length;let x=null;w||(x=c[g]);let y=null;b||(y=h[g]);const v=[],C=x?x.nextSibling:o.childNodes[s],D=y||i.childNodes[u]||null;for(var N=C;N&&N!==D;N=N.nextSibling)l(N,10)&&S(n?"Can not clone a doctype using cloneContents":"Can not extract a doctype using extractContents"),v.push(N);let E,F;if(w||n)E=o,F=s;else{const t=c[g];E=t.parentNode,F=1+p(t)}if(null!==x&&a(x)){const t=x.cloneNode();t.data=x.substringData(s,x.length-s),W(t,r),n||x.replaceData(s,x.length-s,"")}else if(null!==x){const t=x.cloneNode();W(t,r);const i=e.createRange();i.setStart(o,s),i.setEnd(x,f(x));const u=Xt(i,n);i.detach(),W(u,t)}if(v.forEach((t=>{if(n){W(t.cloneNode(!0),r)}else W(t,r)})),y&&a(y)){const t=y.cloneNode();t.data=y.substringData(0,u),W(t,r),n||y.replaceData(0,u,"")}else if(null!==y){const t=y.cloneNode();W(t,r);const o=e.createRange();o.setStart(y,0),o.setEnd(i,u);const s=Xt(o,n);o.detach(),W(s,t)}return n||(t.setStart(E,F),t.collapse(!0)),r}class Range{constructor(){const t=u();this.startContainer=t.document,this.startOffset=0,this.endContainer=t.document,this.endOffset=0,t.addRange(this)}get collapsed(){return(t=this).startContainer===t.endContainer&&t.startOffset===t.endOffset;var t}get commonAncestorContainer(){const t=d(this.startContainer),n=d(this.endContainer);let e=t[0],r=0;for(;r<t.length&&r<n.length&&t[r]===n[r];)e=t[r],++r;return e}setStart(t,n){v(arguments,2),t=ct(t,Node),n=it(n),l(t,10)&&T("Can not set a range under a doctype node"),n>f(t)&&E("Can not set a range past the end of the node");Qt(this)===g(t)&&Zt(t,n,this.endContainer,this.endOffset)!==Ht||(this.endContainer=t,this.endOffset=n),this.startContainer=t,this.startOffset=n}setEnd(t,n){v(arguments,2),t=ct(t,Node),n=it(n),l(t,10)&&T("Can not set a range under a doctype node"),n>f(t)&&E("Can not set a range past the end of the node");Qt(this)===g(t)&&Zt(t,n,this.startContainer,this.startOffset)!==jt||(this.startContainer=t,this.startOffset=n),this.endContainer=t,this.endOffset=n}setStartBefore(t){v(arguments,1);const n=(t=ct(t,Node)).parentNode;if(null===n)return T("Can not set range before node without a parent");this.setStart(n,p(t))}setStartAfter(t){v(arguments,1);const n=(t=ct(t,Node)).parentNode;if(null===n)return T("Can not set range before node without a parent");this.setStart(n,p(t)+1)}setEndBefore(t){v(arguments,1);const n=(t=ct(t,Node)).parentNode;if(null===n)return T("Can not set range before node without a parent");this.setEnd(n,p(t))}setEndAfter(t){v(arguments,1);const n=(t=ct(t,Node)).parentNode;if(null===n)return T("Can not set range before node without a parent");this.setEnd(n,p(t)+1)}collapse(t=!1){t?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset)}selectNode(t){v(arguments,1);let n=(t=ct(t,Node)).parentNode;if(null===n)return T("Can not select node with null parent");const e=p(t);this.startContainer=n,this.startOffset=e,this.endContainer=n,this.endOffset=e+1}selectNodeContents(t){v(arguments,1),l(t=ct(t,Node),10)&&T("Can not place range inside a doctype node");const n=f(t);this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=n}compareBoundaryPoints(t,n){switch(v(arguments,2),n=ct(n,Range),t!==Range.START_TO_START&&t!==Range.START_TO_END&&t!==Range.END_TO_END&&t!==Range.END_TO_START&&R("Unsupported comparison type"),Qt(this)!==Qt(n)&&z("Can not compare positions of ranges in different trees"),t){case Range.START_TO_START:return Zt(this.startContainer,this.startOffset,n.startContainer,n.startOffset);case Range.START_TO_END:return Zt(this.endContainer,this.endOffset,n.startContainer,n.startOffset);case Range.END_TO_END:return Zt(this.endContainer,this.endOffset,n.endContainer,n.endOffset);default:return Zt(this.startContainer,this.startOffset,n.endContainer,n.endOffset)}}deleteContents(){if(this.collapsed)return;const t=this.startContainer,n=this.startOffset,e=this.endContainer,r=this.endOffset;if(t===e&&a(t))return void t.replaceData(n,r-n,"");const o=[];let s,i;if(Wt(this,(t=>{o.push(t)})),t.contains(e))s=t,i=n;else{let n=t;for(;null!==n.parentNode&&!n.parentNode.contains(e);)n=n.parentNode;s=n.parentNode,i=1+p(n)}a(t)&&t.replaceData(n,t.length-n,""),o.forEach((t=>{H(t)})),a(e)&&e.replaceData(0,r,""),this.setStart(s,i),this.collapse(!0)}extractContents(){return Xt(this,!1)}cloneContents(){return Xt(this,!0)}insertNode(t){v(arguments,1),st(t=ct(t,Node),this)}surroundContents(t){v(arguments,1),t=ct(t,Node);(h(this.startContainer)?this.startContainer.parentNode:this.startContainer)!==(h(this.endContainer)?this.endContainer.parentNode:this.endContainer)&&A("Can not use surroundContents on a range that has partially selected a non-Text node"),l(t,9,10,11)&&T("Can not use Document, DocumentType, or DocumentFragment as a parent node in surroundContents");const n=Xt(this,!1);t.firstChild&&j(null,t),st(t,this),W(n,t),this.selectNode(t)}cloneRange(){const t=new(u().Range);return t.startContainer=this.startContainer,t.startOffset=this.startOffset,t.endContainer=this.endContainer,t.endOffset=this.endOffset,t}detach(){u().removeRange(this)}isPointInRange(t,n){return v(arguments,2),t=ct(t,Node),n=it(n),g(t)===Qt(this)&&(l(t,10)&&T("Point can not be under a doctype"),n>f(t)&&E("Offset should not be past the end of node"),Zt(t,n,this.startContainer,this.startOffset)!==jt&&Zt(t,n,this.endContainer,this.endOffset)!==Ht)}comparePoint(t,n){return v(arguments,2),t=ct(t,Node),n=it(n),g(t)!==Qt(this)&&z("Can not compare point to range in different trees"),l(t,10)&&T("Point can not be under a doctype"),n>f(t)&&E("Offset should not be past the end of node"),Zt(t,n,this.startContainer,this.startOffset)===jt?-1:Zt(t,n,this.endContainer,this.endOffset)===Ht?1:0}intersectsNode(t){if(v(arguments,1),g(t=ct(t,Node))!==Qt(this))return!1;const n=t.parentNode;if(null===n)return!0;const e=p(t);return Zt(n,e,this.endContainer,this.endOffset)===jt&&Zt(n,e+1,this.startContainer,this.startOffset)===Ht}toString(){let t=[];const n=this.startContainer;if(h(n)){if(this.startContainer===this.endContainer)return n.substringData(this.startOffset,this.endOffset-this.startOffset);t.push(n.substringData(this.startOffset,n.length-this.startOffset))}Wt(this,(n=>{w(n,(n=>{h(n)&&t.push(n.data)}))}));const e=this.endContainer;return h(e)&&t.push(e.substringData(0,this.endOffset)),t.join("")}}Range.START_TO_START=0,Range.START_TO_END=1,Range.END_TO_END=2,Range.END_TO_START=3;const jt=-1,Ht=1;function Zt(t,n,e,r){if(t!==e){const o=d(t),s=d(e);for(;o[0]&&s[0]&&o[0]===s[0];)o.shift(),s.shift();o.length&&(n=p(o[0])+.5),s.length&&(r=p(s[0])+.5)}return n===r?0:n<r?jt:Ht}function Qt(t){return g(t.startContainer)}class XMLDocument extends Document{D(t){return new(u().XMLDocument)}}const Yt=new Document;i.document=Yt,i.Attr=Attr,i.CDATASection=CDATASection,i.Comment=Comment,i.Document=Document,i.DocumentFragment=DocumentFragment,i.DocumentType=DocumentType,i.DOMImplementation=DOMImplementation,i.Element=Element,i.ProcessingInstruction=ProcessingInstruction,i.Range=Range,i.Text=Text,i.XMLDocument=XMLDocument,t.Attr=Attr,t.CDATASection=CDATASection,t.CharacterData=CharacterData,t.Comment=Comment,t.DOMException=D,t.DOMImplementation=DOMImplementation,t.Document=Document,t.DocumentFragment=DocumentFragment,t.DocumentType=DocumentType,t.Element=Element,t.MutationObserver=class{constructor(t){this.u=[],this.m=[],this.t=[],v(arguments,1),t=ct(t,Function),this.g=t}observe(t,n){if(v(arguments,2),t=ct(t,Node),n.childList=!!n.childList,n.subtree=!!n.subtree,void 0!==n.attributeOldValue&&void 0===n.attributes&&(n.attributes=!0),void 0!==n.characterDataOldValue&&void 0===n.characterData&&(n.characterData=!0),!(n.childList||n.attributes||n.characterData))throw new TypeError('The options object must set at least one of "attributes", "characterData", or "childList" to true.');if(n.attributeOldValue&&!n.attributes)throw new TypeError('The options object may only set "attributeOldValue" to true when "attributes" is true or not present.');if(n.characterDataOldValue&&!n.characterData)throw new TypeError('The options object may only set "characterDataOldValue" to true when "characterData" is true or not present.');t.o.register(this,n)}disconnect(){this.u.forEach((t=>t.o.removeForObserver(this))),this.u.length=0,this.m.length=0}takeRecords(){const t=this.m.concat();return this.m.length=0,t}},t.MutationRecord=M,t.Node=Node,t.ProcessingInstruction=ProcessingInstruction,t.Range=Range,t.StaticRange=class{constructor(t){l(t.startContainer,10,2)&&T("StaticRange startContainer must not be a doctype or attribute node"),l(t.endContainer,10,2)&&T("StaticRange endContainer must not be a doctype or attribute node"),this.startContainer=t.startContainer,this.startOffset=t.startOffset,this.endContainer=t.endContainer,this.endOffset=t.endOffset,this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset}},t.Text=Text,t.XMLDocument=XMLDocument,t.XMLSerializer=class{constructor(){}serializeToString(t){const n=[];return Mt(t=ct(t,Node),!1,n),n.join("")}},t.document=Yt,t.serializeToWellFormedString=function(t){const n=[];return Mt(t=ct(t,Node),!0,n),n.join("")},t.unsafeAppendAttribute=function(t,n){gt(t,n)},t.unsafeCreateAttribute=function(t,n,e,r,o){return new Attr(t,n,e,r,o)},t.unsafeCreateElement=function(t,n,e,r=null){return $t(t,n,e,r)},Object.defineProperty(t,"A",{value:!0})}));
//# sourceMappingURL=slimdom.umd.js.map
